/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{1513:function(e,t,n){var r,o,l;!function(d){"use strict";o=[n(447)],r=function(e){e.ui=e.ui||{};e.ui.version="1.13.0";var t=0,n=Array.prototype.hasOwnProperty,r=Array.prototype.slice;e.cleanData=e.cleanData||(o=e.cleanData,function(t){var n,r,i;for(i=0;null!=(r=t[i]);i++)(n=e._data(r,"events"))&&n.remove&&e(r).triggerHandler("remove");o(t)}),e.widget=e.widget||function(t,base,n){var r,o,l,d={},c=t.split(".")[0],f=c+"-"+(t=t.split(".")[1]);return n||(n=base,base=e.Widget),Array.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr.pseudos[f.toLowerCase()]=function(t){return!!e.data(t,f)},e[c]=e[c]||{},r=e[c][t],o=e[c][t]=function(e,element){if(!this._createWidget)return new o(e,element);arguments.length&&this._createWidget(e,element)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(l=new base).options=e.widget.extend({},l.options),e.each(n,(function(e,t){d[e]="function"==typeof t?function(){function n(){return base.prototype[e].apply(this,arguments)}function r(t){return base.prototype[e].apply(this,t)}return function(){var e,o=this._super,l=this._superApply;return this._super=n,this._superApply=r,e=t.apply(this,arguments),this._super=o,this._superApply=l,e}}():t})),o.prototype=e.widget.extend(l,{widgetEventPrefix:r&&l.widgetEventPrefix||t},d,{constructor:o,namespace:c,widgetName:t,widgetFullName:f}),r?(e.each(r._childConstructors,(function(i,t){var n=t.prototype;e.widget(n.namespace+"."+n.widgetName,o,t._proto)})),delete r._childConstructors):base._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var o,l,input=r.call(arguments,1),d=0,c=input.length;d<c;d++)for(o in input[d])l=input[d][o],n.call(input[d],o)&&void 0!==l&&(e.isPlainObject(l)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],l):e.widget.extend({},l):t[o]=l);return t},e.widget.bridge=function(t,object){var n=object.prototype.widgetFullName||t;e.fn[t]=function(o){var l="string"==typeof o,d=r.call(arguments,1),c=this;return l?this.length||"instance"!==o?this.each((function(){var r,l=e.data(this,n);return"instance"===o?(c=l,!1):l?"function"!=typeof l[o]||"_"===o.charAt(0)?e.error("no such method '"+o+"' for "+t+" widget instance"):(r=l[o].apply(l,d))!==l&&void 0!==r?(c=r&&r.jquery?c.pushStack(r.get()):r,!1):void 0:e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):c=void 0:(d.length&&(o=e.widget.extend.apply(null,[o].concat(d))),this.each((function(){var t=e.data(this,n);t?(t.option(o||{}),t._init&&t._init()):e.data(this,n,new object(o,this))}))),c}},e.Widget=e.Widget||function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,element){element=e(element||this.defaultElement||this)[0],this.element=e(element),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},element!==this&&(e.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===element&&this.destroy()}}),this.document=e(element.style?element.ownerDocument:element.document||element),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,o,i,l=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(l={},r=t.split("."),t=r.shift(),r.length){for(o=l[t]=e.widget.extend({},this.options[t]),i=0;i<r.length-1;i++)o[r[i]]=o[r[i]]||{},o=o[r[i]];if(t=r.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];l[t]=n}return this._setOptions(l),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(r=e(o.get()),this._removeClass(o,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],r=this;function o(){t.element.each((function(t,element){e.map(r.classesElementLookup,(function(e){return e})).some((function(e){return e.is(element)}))||r._on(e(element),{remove:"_untrackClassesElement"})}))}function l(l,d){var c,i;for(i=0;i<l.length;i++)c=r.classesElementLookup[l[i]]||e(),t.add?(o(),c=e(e.uniqueSort(c.get().concat(t.element.get())))):c=e(c.not(t.element).get()),r.classesElementLookup[l[i]]=c,n.push(l[i]),d&&t.classes[l[i]]&&n.push(t.classes[l[i]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&l(t.keys.match(/\S+/g)||[],!0),t.extra&&l(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(r,o){-1!==e.inArray(t.target,o)&&(n.classesElementLookup[r]=e(o.not(t.target).get()))})),this._off(e(t.target))},_removeClass:function(element,e,t){return this._toggleClass(element,e,t,!1)},_addClass:function(element,e,t){return this._toggleClass(element,e,t,!0)},_toggleClass:function(element,e,t,n){n="boolean"==typeof n?n:t;var r="string"==typeof element||null===element,o={extra:r?e:t,keys:r?element:e,element:r?this.element:element,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(t,element,n){var r,o=this;"boolean"!=typeof t&&(n=element,element=t,t=!1),n?(element=r=e(element),this.bindings=this.bindings.add(element)):(n=element,element=this.element,r=this.widget()),e.each(n,(function(n,l){function d(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof l?o[l]:l).apply(o,arguments)}"string"!=typeof l&&(d.guid=l.guid=l.guid||d.guid||e.guid++);var c=n.match(/^([\w:-]*)\s*(.*)$/),f=c[1]+o.eventNamespace,h=c[2];h?r.on(f,h,d):element.on(f,d)}))},_off:function(element,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.off(t),this.bindings=e(this.bindings.not(element).get()),this.focusable=e(this.focusable.not(element).get()),this.hoverable=e(this.hoverable.not(element).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,data){var r,o,l=this.options[t];if(data=data||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,data),!("function"==typeof l&&!1===l.apply(this.element[0],[n].concat(data))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(element,r,o){var l;"string"==typeof r&&(r={effect:r});var d=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})?r={duration:r}:!0===r&&(r={}),l=!e.isEmptyObject(r),r.complete=o,r.delay&&element.delay(r.delay),l&&e.effects&&e.effects.effect[d]?element[t](r):d!==t&&element[d]?element[d](r.duration,r.easing,o):element.queue((function(n){e(this)[t](),o&&o.call(element[0]),n()}))}}));var o;e.widget;!function(){var t,n=Math.max,r=Math.abs,o=/left|center|right/,l=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,f=/%$/,h=e.fn.position;function y(e,t,n){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?n/100:1)]}function v(element,t){return parseInt(e.css(element,t),10)||0}function m(e){return null!=e&&e===e.window}function x(e){var t=e[0];return 9===t.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:m(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}e.position=e.position||{scrollbarWidth:function(){if(void 0!==t)return t;var n,r,div=e("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),o=div.children()[0];return e("body").append(div),n=o.offsetWidth,div.css("overflow","scroll"),n===(r=o.offsetWidth)&&(r=div[0].clientWidth),div.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(element){var t=e(element||window),n=m(t[0]),r=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:n,isDocument:r,offset:!n&&!r?e(element).offset():{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return h.apply(this,arguments);var f,m,k,w,_,C,N="string"==typeof(t=e.extend({},t)).of?e(document).find(t.of):e(t.of),S=e.position.getWithinInfo(t.within),A=e.position.getScrollInfo(S),E=(t.collision||"flip").split(" "),T={};return C=x(N),N[0].preventDefault&&(t.at="left top"),m=C.width,k=C.height,w=C.offset,_=e.extend({},w),e.each(["my","at"],(function(){var e,n,r=(t[this]||"").split(" ");1===r.length&&(r=o.test(r[0])?r.concat(["center"]):l.test(r[0])?["center"].concat(r):["center","center"]),r[0]=o.test(r[0])?r[0]:"center",r[1]=l.test(r[1])?r[1]:"center",e=d.exec(r[0]),n=d.exec(r[1]),T[this]=[e?e[0]:0,n?n[0]:0],t[this]=[c.exec(r[0])[0],c.exec(r[1])[0]]})),1===E.length&&(E[1]=E[0]),"right"===t.at[0]?_.left+=m:"center"===t.at[0]&&(_.left+=m/2),"bottom"===t.at[1]?_.top+=k:"center"===t.at[1]&&(_.top+=k/2),f=y(T.at,m,k),_.left+=f[0],_.top+=f[1],this.each((function(){var o,l,d=e(this),c=d.outerWidth(),h=d.outerHeight(),x=v(this,"marginLeft"),C=v(this,"marginTop"),D=c+x+v(this,"marginRight")+A.width,L=h+C+v(this,"marginBottom")+A.height,P=e.extend({},_),O=y(T.my,d.outerWidth(),d.outerHeight());"right"===t.my[0]?P.left-=c:"center"===t.my[0]&&(P.left-=c/2),"bottom"===t.my[1]?P.top-=h:"center"===t.my[1]&&(P.top-=h/2),P.left+=O[0],P.top+=O[1],o={marginLeft:x,marginTop:C},e.each(["left","top"],(function(i,n){e.ui.position[E[i]]&&e.ui.position[E[i]][n](P,{targetWidth:m,targetHeight:k,elemWidth:c,elemHeight:h,collisionPosition:o,collisionWidth:D,collisionHeight:L,offset:[f[0]+O[0],f[1]+O[1]],my:t.my,at:t.at,within:S,elem:d})})),t.using&&(l=function(e){var o=w.left-P.left,l=o+m-c,f=w.top-P.top,y=f+k-h,v={target:{element:N,left:w.left,top:w.top,width:m,height:k},element:{element:d,left:P.left,top:P.top,width:c,height:h},horizontal:l<0?"left":o>0?"right":"center",vertical:y<0?"top":f>0?"bottom":"middle"};m<c&&r(o+l)<m&&(v.horizontal="center"),k<h&&r(f+y)<k&&(v.vertical="middle"),n(r(o),r(l))>n(r(f),r(y))?v.important="horizontal":v.important="vertical",t.using.call(this,e,v)}),d.offset(e.extend(P,{using:l}))}))},e.ui.position={fit:{left:function(e,data){var t,r=data.within,o=r.isWindow?r.scrollLeft:r.offset.left,l=r.width,d=e.left-data.collisionPosition.marginLeft,c=o-d,f=d+data.collisionWidth-l-o;data.collisionWidth>l?c>0&&f<=0?(t=e.left+c+data.collisionWidth-l-o,e.left+=c-t):e.left=f>0&&c<=0?o:c>f?o+l-data.collisionWidth:o:c>0?e.left+=c:f>0?e.left-=f:e.left=n(e.left-d,e.left)},top:function(e,data){var t,r=data.within,o=r.isWindow?r.scrollTop:r.offset.top,l=data.within.height,d=e.top-data.collisionPosition.marginTop,c=o-d,f=d+data.collisionHeight-l-o;data.collisionHeight>l?c>0&&f<=0?(t=e.top+c+data.collisionHeight-l-o,e.top+=c-t):e.top=f>0&&c<=0?o:c>f?o+l-data.collisionHeight:o:c>0?e.top+=c:f>0?e.top-=f:e.top=n(e.top-d,e.top)}},flip:{left:function(e,data){var t,n,o=data.within,l=o.offset.left+o.scrollLeft,d=o.width,c=o.isWindow?o.scrollLeft:o.offset.left,f=e.left-data.collisionPosition.marginLeft,h=f-c,y=f+data.collisionWidth-d-c,v="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,m="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,x=-2*data.offset[0];h<0?((t=e.left+v+m+x+data.collisionWidth-d-l)<0||t<r(h))&&(e.left+=v+m+x):y>0&&((n=e.left-data.collisionPosition.marginLeft+v+m+x-c)>0||r(n)<y)&&(e.left+=v+m+x)},top:function(e,data){var t,n,o=data.within,l=o.offset.top+o.scrollTop,d=o.height,c=o.isWindow?o.scrollTop:o.offset.top,f=e.top-data.collisionPosition.marginTop,h=f-c,y=f+data.collisionHeight-d-c,v="top"===data.my[1]?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,m="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,x=-2*data.offset[1];h<0?((n=e.top+v+m+x+data.collisionHeight-d-l)<0||n<r(h))&&(e.top+=v+m+x):y>0&&((t=e.top-data.collisionPosition.marginTop+v+m+x-c)>0||r(t)<y)&&(e.top+=v+m+x)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();e.ui.position;e.expr.pseudos||(e.expr.pseudos=e.expr[":"]);e.uniqueSort||(e.uniqueSort=e.unique);if(!e.escapeSelector){var l=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,d=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};e.escapeSelector=function(e){return(e+"").replace(l,d)}}e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter((function(i){return i%2==0}))},odd:function(){return this.filter((function(i){return i%2==1}))}});e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.scrollParent=function(t){var n=this.css("position"),r="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,l=this.parents().filter((function(){var t=e(this);return(!r||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==n&&l.length?l:e(this[0].ownerDocument||document)},e.fn.extend({uniqueId:(c=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++c)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}});var c},void 0===(l="function"==typeof r?r.apply(t,o):r)||(e.exports=l)}()},1514:function(e,t,n){var content=n(1515);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(24).default)("a77bad98",content,!0,{sourceMap:!1})},1515:function(e,t,n){var r=n(23),o=n(329),l=n(1516),d=n(1517),c=r(!1),f=o(l),h=o(d);c.push([e.i,'/*!\n * Fancytree "material" skin.\n *\n * DON\'T EDIT THE CSS FILE DIRECTLY, since it is automatically generated from\n * the LESS templates.\n */.fancytree-helper-hidden{display:none}.fancytree-helper-indeterminate-cb{color:#777}.fancytree-helper-disabled{color:silver}.fancytree-helper-spin{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}@-webkit-keyframes spin{0%{transform:rotate(0)}to{transform:rotate(359deg)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(359deg)}}ul.fancytree-container{font-family:"Roboto Regular",tahoma,arial,helvetica;font-size:24px;white-space:nowrap;padding:3px;margin:0;background-color:#fff;border:1px dotted grey;min-height:0;position:relative}ul.fancytree-container ul{padding:0 0 0 24px}ul.fancytree-container ul>li:before{content:none}ul.fancytree-container li{list-style-image:none;list-style-position:outside;list-style-type:none;-moz-background-clip:border;-moz-background-inline-policy:continuous;-moz-background-origin:padding;background-attachment:scroll;background-color:transparent;background-position:0 0;background-repeat:repeat-y;background-image:none;margin:0}ul.fancytree-container li.fancytree-lastsib{background-image:none}.ui-fancytree-disabled ul.fancytree-container{opacity:.5;background-color:silver}ul.fancytree-connectors.fancytree-container li{background-image:url('+f+");background-position:0 0}ul.fancytree-container li.fancytree-lastsib,ul.fancytree-no-connector>li{background-image:none}li.fancytree-animating{position:relative}#fancytree-drop-marker,span.fancytree-checkbox,span.fancytree-drag-helper-img,span.fancytree-empty,span.fancytree-expander,span.fancytree-icon,span.fancytree-vline{width:24px;height:24px;display:inline-block;vertical-align:top;background-repeat:no-repeat;background-position:0 0}span.fancytree-checkbox,span.fancytree-custom-icon,span.fancytree-expander,span.fancytree-icon{margin-top:0}span.fancytree-custom-icon{width:24px;height:24px;display:inline-block;margin-left:3px;background-position:0 0}img.fancytree-icon{width:24px;height:24px;margin-left:3px;margin-top:0;vertical-align:top;border-style:none}span.fancytree-expander{cursor:pointer}.fancytree-exp-nl span.fancytree-expander,.fancytree-exp-n span.fancytree-expander{background-image:none;cursor:default}.fancytree-connectors .fancytree-exp-nl span.fancytree-expander,.fancytree-connectors .fancytree-exp-n span.fancytree-expander{margin-top:0}.fancytree-fade-expander span.fancytree-expander{transition:opacity 1.5s;opacity:0}.fancytree-fade-expander.fancytree-treefocus span.fancytree-expander,.fancytree-fade-expander .fancytree-treefocus span.fancytree-expander,.fancytree-fade-expander:hover span.fancytree-expander,.fancytree-fade-expander [class*=fancytree-statusnode-] span.fancytree-expander{transition:opacity .6s;opacity:1}span.fancytree-checkbox{margin-left:3px}.fancytree-unselectable span.fancytree-checkbox{opacity:.4}.fancytree-container.fancytree-checkbox-auto-hide span.fancytree-checkbox{visibility:hidden}.fancytree-container.fancytree-checkbox-auto-hide .fancytree-node.fancytree-selected span.fancytree-checkbox,.fancytree-container.fancytree-checkbox-auto-hide .fancytree-node:hover span.fancytree-checkbox,.fancytree-container.fancytree-checkbox-auto-hide.fancytree-treefocus .fancytree-node.fancytree-active span.fancytree-checkbox,.fancytree-container.fancytree-checkbox-auto-hide.fancytree-treefocus tr.fancytree-active td span.fancytree-checkbox,.fancytree-container.fancytree-checkbox-auto-hide tr.fancytree-selected td span.fancytree-checkbox,.fancytree-container.fancytree-checkbox-auto-hide tr:hover td span.fancytree-checkbox{visibility:unset}span.fancytree-icon{margin-left:3px}.fancytree-loading span.fancytree-expander,.fancytree-loading span.fancytree-expander:hover,.fancytree-statusnode-loading span.fancytree-icon,.fancytree-statusnode-loading span.fancytree-icon:hover,span.fancytree-icon.fancytree-icon-loading{background-image:none}span.fancytree-node{display:inherit;width:100%;margin-top:1px;min-height:24px}span.fancytree-title{color:#212121;cursor:pointer;display:inline-block;vertical-align:top;min-height:24px;padding:0 3px;margin:0 0 0 3px;border:1px solid transparent;border-radius:0}span.fancytree-node.fancytree-error span.fancytree-title{color:red}span.fancytree-childcounter{color:#fff;background:#337ab7;border:1px solid grey;border-radius:10px;padding:2px;text-align:center}div.fancytree-drag-helper span.fancytree-childcounter,div.fancytree-drag-helper span.fancytree-dnd-modifier{display:inline-block;color:#fff;background:#337ab7;border:1px solid grey;min-width:10px;height:10px;line-height:1;vertical-align:baseline;border-radius:10px;padding:2px;text-align:center;font-size:9px}div.fancytree-drag-helper span.fancytree-childcounter{position:absolute;top:-6px;right:-6px}div.fancytree-drag-helper span.fancytree-dnd-modifier{background:#5cb85c;border:none;font-weight:bolder}#fancytree-drop-marker{width:48px;position:absolute;margin:0}#fancytree-drop-marker.fancytree-drop-after,#fancytree-drop-marker.fancytree-drop-before{width:96px}span.fancytree-drag-source.fancytree-drag-remove{opacity:.15}.fancytree-container.fancytree-rtl .fancytree-exp-nl span.fancytree-expander,.fancytree-container.fancytree-rtl .fancytree-exp-n span.fancytree-expander{background-image:none}ul.fancytree-container.fancytree-rtl ul{padding:0 16px 0 0}ul.fancytree-container.fancytree-rtl.fancytree-connectors li{background-position:right 0;background-image:url("+h+')}ul.fancytree-container.fancytree-rtl.fancytree-no-connector>li,ul.fancytree-container.fancytree-rtl li.fancytree-lastsib{background-image:none}table.fancytree-ext-table{font-family:"Roboto Regular",tahoma,arial,helvetica;font-size:24px}table.fancytree-ext-table span.fancytree-node{display:inline-block;box-sizing:border-box}table.fancytree-ext-table td.fancytree-status-merged{text-align:center;font-style:italic;color:silver}table.fancytree-ext-table tr.fancytree-statusnode-error td.fancytree-status-merged{color:red}table.fancytree-ext-table.fancytree-ext-ariagrid.fancytree-cell-mode>tbody>tr.fancytree-active>td{background-color:#eee}table.fancytree-ext-table.fancytree-ext-ariagrid.fancytree-cell-mode>tbody>tr>td.fancytree-active-cell{background-color:#cbe8f6}table.fancytree-ext-table.fancytree-ext-ariagrid.fancytree-cell-mode.fancytree-cell-nav-mode>tbody>tr>td.fancytree-active-cell{background-color:#3875d7}table.fancytree-ext-columnview tbody tr td{position:relative;vertical-align:top;overflow:auto}table.fancytree-ext-columnview tbody tr td>ul{padding:0}table.fancytree-ext-columnview tbody tr td>ul li{list-style-image:none;list-style-position:outside;list-style-type:none;-moz-background-clip:border;-moz-background-inline-policy:continuous;-moz-background-origin:padding;background-attachment:scroll;background-color:transparent;background-position:0 0;background-repeat:repeat-y;background-image:none;margin:0}table.fancytree-ext-columnview span.fancytree-node{position:relative;display:inline-block}table.fancytree-ext-columnview span.fancytree-node.fancytree-expanded{background-color:#e0e0e0}table.fancytree-ext-columnview span.fancytree-node.fancytree-active{background-color:#cbe8f6}table.fancytree-ext-columnview .fancytree-has-children span.fancytree-cv-right{position:absolute;right:3px}.fancytree-ext-filter-dimm span.fancytree-node span.fancytree-title{color:silver;font-weight:lighter}.fancytree-ext-filter-dimm span.fancytree-node.fancytree-submatch span.fancytree-title,.fancytree-ext-filter-dimm tr.fancytree-submatch span.fancytree-title{color:#000;font-weight:400}.fancytree-ext-filter-dimm span.fancytree-node.fancytree-match span.fancytree-title,.fancytree-ext-filter-dimm tr.fancytree-match span.fancytree-title{color:#000;font-weight:700}.fancytree-ext-filter-hide span.fancytree-node.fancytree-hide,.fancytree-ext-filter-hide tr.fancytree-hide{display:none}.fancytree-ext-filter-hide span.fancytree-node.fancytree-submatch span.fancytree-title,.fancytree-ext-filter-hide tr.fancytree-submatch span.fancytree-title{color:silver;font-weight:lighter}.fancytree-ext-filter-hide span.fancytree-node.fancytree-match span.fancytree-title,.fancytree-ext-filter-hide tr.fancytree-match span.fancytree-title{color:#000;font-weight:400}.fancytree-ext-filter-hide-expanders span.fancytree-node.fancytree-match span.fancytree-expander,.fancytree-ext-filter-hide-expanders tr.fancytree-match span.fancytree-expander{visibility:hidden}.fancytree-ext-filter-hide-expanders span.fancytree-node.fancytree-submatch span.fancytree-expander,.fancytree-ext-filter-hide-expanders tr.fancytree-submatch span.fancytree-expander{visibility:visible}.fancytree-ext-childcounter span.fancytree-custom-icon,.fancytree-ext-childcounter span.fancytree-icon,.fancytree-ext-filter span.fancytree-custom-icon,.fancytree-ext-filter span.fancytree-icon{position:relative}.fancytree-ext-childcounter span.fancytree-childcounter,.fancytree-ext-filter span.fancytree-childcounter{color:#fff;background:#777;border:1px solid grey;position:absolute;top:-6px;right:-6px;min-width:10px;height:10px;line-height:1;vertical-align:baseline;border-radius:10px;padding:2px;text-align:center;font-size:9px}ul.fancytree-ext-wide{min-width:100%;box-sizing:border-box}ul.fancytree-ext-wide,ul.fancytree-ext-wide span.fancytree-node>span{position:relative;z-index:2}ul.fancytree-ext-wide span.fancytree-node span.fancytree-title{position:absolute;z-index:1;left:0;min-width:100%;margin-left:0;margin-right:0;box-sizing:border-box}.fancytree-ext-fixed-wrapper .fancytree-ext-fixed-hidden{display:none}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-scroll-border-bottom{border-bottom:3px solid rgba(0,0,0,.75)}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-scroll-border-right{border-right:3px solid rgba(0,0,0,.75)}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-tl{position:absolute;overflow:hidden;z-index:3;top:0;left:0}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-tr{position:absolute;overflow:hidden;z-index:2;top:0}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-bl{position:absolute;overflow:hidden;z-index:2;left:0}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-br{position:absolute;overflow:scroll;z-index:1}ul.fancytree-container ul{padding:.3em 0 0 1em;margin:0;font-size:24px;color:#212121}.fancytree-plain span.fancytree-selected span.fancytree-title{background-color:#f5f5f5}.fancytree-plain span.fancytree-active span.fancytree-title,.fancytree-plain span.fancytree-selected span.fancytree-title:hover{background-color:#eee}.fancytree-container span.fancytree-checkbox{color:#ff4081}table.fancytree-ext-table{border-collapse:collapse}table.fancytree-ext-table tbody tr.fancytree-focused,table.fancytree-ext-table tbody tr.fancytree-selected{background-color:#f5f5f5}table.fancytree-ext-table tbody tr.fancytree-active,table.fancytree-ext-table tbody tr:hover{background-color:#eee}table.fancytree-ext-columnview tbody tr td{border:1px solid grey}table.fancytree-ext-columnview span.fancytree-node.fancytree-expanded{background-color:#ccc}table.fancytree-ext-columnview span.fancytree-node.fancytree-active{background-color:#4169e1}',""]),e.exports=c},1516:function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAPcAAAAAAIAAAACAAICAAAAAgIAAgACAgMDAwMDcwKbK8P///6Wlpf/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////78KCgpICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAP4ALAAAAAAQABAAAAgpAP0JFHhvoMGDCBMiLKiwocOBDB9KXDixosGIFidizPhwI8eGHj8KDAgAOw=="},1517:function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAPcAAAAAAIAAAACAAICAAAAAgIAAgACAgMDAwMDcwKbK8P///6Wlpf/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////78KCgpICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAP4ALAAAAAAQABAAAAgnAP0JHEjwHsGDCBMq9GdwocOHDR9KRBhxokWGFzNWzAiRo8WNGQMCADs="},1518:function(e,t,n){var r,o,l;o=[n(447),n(666)],r=function(e){"use strict";var t=e.ui.fancytree,n={awesome3:{_addClass:"",checkbox:"icon-check-empty",checkboxSelected:"icon-check",checkboxUnknown:"icon-check icon-muted",dragHelper:"icon-caret-right",dropMarker:"icon-caret-right",error:"icon-exclamation-sign",expanderClosed:"icon-caret-right",expanderLazy:"icon-angle-right",expanderOpen:"icon-caret-down",loading:"icon-refresh icon-spin",nodata:"icon-meh",noExpander:"",radio:"icon-circle-blank",radioSelected:"icon-circle",doc:"icon-file-alt",docOpen:"icon-file-alt",folder:"icon-folder-close-alt",folderOpen:"icon-folder-open-alt"},awesome4:{_addClass:"fa",checkbox:"fa-square-o",checkboxSelected:"fa-check-square-o",checkboxUnknown:"fa-square fancytree-helper-indeterminate-cb",dragHelper:"fa-arrow-right",dropMarker:"fa-long-arrow-right",error:"fa-warning",expanderClosed:"fa-caret-right",expanderLazy:"fa-angle-right",expanderOpen:"fa-caret-down",loading:{html:"<span class='fa fa-spinner fa-pulse' />"},nodata:"fa-meh-o",noExpander:"",radio:"fa-circle-thin",radioSelected:"fa-circle",doc:"fa-file-o",docOpen:"fa-file-o",folder:"fa-folder-o",folderOpen:"fa-folder-open-o"},awesome5:{_addClass:"",checkbox:"far fa-square",checkboxSelected:"far fa-check-square",checkboxUnknown:"fas fa-square fancytree-helper-indeterminate-cb",radio:"far fa-circle",radioSelected:"fas fa-circle",radioUnknown:"far fa-dot-circle",dragHelper:"fas fa-arrow-right",dropMarker:"fas fa-long-arrow-alt-right",error:"fas fa-exclamation-triangle",expanderClosed:"fas fa-caret-right",expanderLazy:"fas fa-angle-right",expanderOpen:"fas fa-caret-down",loading:"fas fa-spinner fa-pulse",nodata:"far fa-meh",noExpander:"",doc:"far fa-file",docOpen:"far fa-file",folder:"far fa-folder",folderOpen:"far fa-folder-open"},bootstrap3:{_addClass:"glyphicon",checkbox:"glyphicon-unchecked",checkboxSelected:"glyphicon-check",checkboxUnknown:"glyphicon-expand fancytree-helper-indeterminate-cb",dragHelper:"glyphicon-play",dropMarker:"glyphicon-arrow-right",error:"glyphicon-warning-sign",expanderClosed:"glyphicon-menu-right",expanderLazy:"glyphicon-menu-right",expanderOpen:"glyphicon-menu-down",loading:"glyphicon-refresh fancytree-helper-spin",nodata:"glyphicon-info-sign",noExpander:"",radio:"glyphicon-remove-circle",radioSelected:"glyphicon-ok-circle",doc:"glyphicon-file",docOpen:"glyphicon-file",folder:"glyphicon-folder-close",folderOpen:"glyphicon-folder-open"},material:{_addClass:"material-icons",checkbox:{text:"check_box_outline_blank"},checkboxSelected:{text:"check_box"},checkboxUnknown:{text:"indeterminate_check_box"},dragHelper:{text:"play_arrow"},dropMarker:{text:"arrow-forward"},error:{text:"warning"},expanderClosed:{text:"chevron_right"},expanderLazy:{text:"last_page"},expanderOpen:{text:"expand_more"},loading:{text:"autorenew",addClass:"fancytree-helper-spin"},nodata:{text:"info"},noExpander:{text:""},radio:{text:"radio_button_unchecked"},radioSelected:{text:"radio_button_checked"},doc:{text:"insert_drive_file"},docOpen:{text:"insert_drive_file"},folder:{text:"folder"},folderOpen:{text:"folder_open"}}};function r(t,span,n,r,o){var map=r.map,l=map[o],d=e(span),c=d.find(".fancytree-childcounter"),f=n+" "+(map._addClass||"");"function"==typeof l&&(l=l.call(this,t,span,o)),"string"==typeof l?(span.innerHTML="",d.attr("class",f+" "+l).append(c)):l&&(l.text?span.textContent=""+l.text:l.html?span.innerHTML=l.html:span.innerHTML="",d.attr("class",f+" "+(l.addClass||"")).append(c))}return e.ui.fancytree.registerExtension({name:"glyph",version:"2.38.2",options:{preset:null,map:{}},treeInit:function(r){var o=r.tree,l=r.options.glyph;l.preset?(t.assert(!!n[l.preset],"Invalid value for `options.glyph.preset`: "+l.preset),l.map=e.extend({},n[l.preset],l.map)):o.warn("ext-glyph: missing `preset` option."),this._superApply(arguments),o.$container.addClass("fancytree-ext-glyph")},nodeRenderStatus:function(n){var o,l,d,span,c=n.node,f=e(c.span),h=n.options.glyph;return d=this._super(n),c.isRootNode()||((span=f.children(".fancytree-expander").get(0))&&(l=c.expanded&&c.hasChildren()?"expanderOpen":c.isUndefined()?"expanderLazy":c.hasChildren()?"expanderClosed":"noExpander",r(c,span,"fancytree-expander",h,l)),(span=c.tr?e("td",c.tr).find(".fancytree-checkbox").get(0):f.children(".fancytree-checkbox").get(0))&&(o=t.evalOption("checkbox",c,c,h,!1),c.parent&&c.parent.radiogroup||"radio"===o?r(c,span,"fancytree-checkbox fancytree-radio",h,l=c.selected?"radioSelected":"radio"):r(c,span,"fancytree-checkbox",h,l=c.selected?"checkboxSelected":c.partsel?"checkboxUnknown":"checkbox")),(span=f.children(".fancytree-icon").get(0))&&(l=c.statusNodeType?c.statusNodeType:c.folder?c.expanded&&c.hasChildren()?"folderOpen":"folder":c.expanded?"docOpen":"doc",r(c,span,"fancytree-icon",h,l))),d},nodeSetStatus:function(t,n,o,details){var l,span,d=t.options.glyph,c=t.node;return l=this._superApply(arguments),"error"!==n&&"loading"!==n&&"nodata"!==n||(c.parent?(span=e(".fancytree-expander",c.span).get(0))&&r(c,span,"fancytree-expander",d,n):(span=e(".fancytree-statusnode-"+n,c[this.nodeContainerAttrName]).find(".fancytree-icon").get(0))&&r(c,span,"fancytree-icon",d,n)),l}}),e.ui.fancytree},void 0===(l="function"==typeof r?r.apply(t,o):r)||(e.exports=l)},1519:function(e,t,n){var r,o,l;o=[n(447),n(666)],r=function(e){"use strict";var t,n,r=e.ui.fancytree,o=/Mac/.test(navigator.platform),l="fancytree-drag-source",d="fancytree-drag-remove",c="fancytree-drop-accept",f="fancytree-drop-after",h="fancytree-drop-before",y="fancytree-drop-over",v="fancytree-drop-reject",m="fancytree-drop-target",x="application/x-fancytree-node",k=null,w=null,_=null,C=null,N=null,S=null,A=null,E=null,T=null,D=null;function L(){N=null,D=null,A=null,E=null,S=null,w=null,_=null,C&&C.removeClass(l+" "+d),C=null,k&&k.hide(),n&&(n.remove(),n=null)}function P(e){return 0===e?"":e>0?"+"+e:""+e}function O(t){var n;return!!t&&(n=e.isPlainObject(t)?{over:!!t.over,before:!!t.before,after:!!t.after}:Array.isArray(t)?{over:e.inArray("over",t)>=0,before:e.inArray("before",t)>=0,after:e.inArray("after",t)>=0}:{over:!0===t||"over"===t,before:!0===t||"before"===t,after:!0===t||"after"===t},0!==Object.keys(n).length&&n)}function H(t,n){var r,o,l=t.options.dnd5,d=t.$scrollParent[0],c=l.scrollSensitivity,f=l.scrollSpeed,h=0;return d!==document&&"HTML"!==d.tagName?(r=t.$scrollParent.offset(),o=d.scrollTop,r.top+d.offsetHeight-n.pageY<c?d.scrollHeight-t.$scrollParent.innerHeight()-o>0&&(d.scrollTop=h=o+f):o>0&&n.pageY-r.top<c&&(d.scrollTop=h=o-f)):(o=e(document).scrollTop())>0&&n.pageY-o<c?(h=o-f,e(document).scrollTop(h)):e(window).height()-(n.pageY-o)<c&&(h=o+f,e(document).scrollTop(h)),h&&t.debug("autoScroll: "+h+"px"),h}function I(e,t,n){var r=n;return o?t.metaKey&&t.altKey||t.ctrlKey?r="link":t.metaKey?r="move":t.altKey&&(r="copy"):t.ctrlKey?r="copy":t.shiftKey?r="move":t.altKey&&(r="link"),r!==S&&e.info("evalEffectModifiers: "+t.type+" - evalEffectModifiers(): "+S+" -> "+r),S=r,r}function R(e,data){var t=data.tree,n=data.dataTransfer;"dragstart"===e.type?(data.effectAllowed=t.options.dnd5.effectAllowed,data.dropEffect=t.options.dnd5.dropEffectDefault):(data.effectAllowed=E,data.dropEffect=A),data.dropEffectSuggested=I(t,e,t.options.dnd5.dropEffectDefault),data.isMove="move"===data.dropEffect,data.files=n.files||[]}function M(e,data,t){var n=data.tree,r=data.dataTransfer;return"dragstart"!==e.type&&E!==data.effectAllowed&&n.warn("effectAllowed should only be changed in dragstart event: "+e.type+": data.effectAllowed changed from "+E+" -> "+data.effectAllowed),!1===t&&(n.info("applyDropEffectCallback: allowDrop === false"),data.effectAllowed="none",data.dropEffect="none"),data.isMove="move"===data.dropEffect,"dragstart"===e.type&&(E=data.effectAllowed,A=data.dropEffect),r.effectAllowed=E,r.dropEffect=A,A}function F(t,data){if(data.options.dnd5.scroll&&H(data.tree,t),!data.node)return data.tree.warn("Ignored dragover for non-node"),T;var n,o,l,d,x=null,w=data.tree,_=w.options,C=_.dnd5,S=data.node,A=data.otherNode,E="center",D=e(S.span),L=D.find("span.fancytree-title");if(!1===N)return w.debug("Ignored dragover, since dragenter returned false."),!1;if("string"==typeof N&&e.error("assert failed: dragenter returned string"),o=D.offset(),d=(t.pageY-o.top)/D.height(),void 0===t.pageY&&w.warn("event.pageY is undefined: see issue #1013."),N.after&&d>.75||!N.over&&N.after&&d>.5?x="after":N.before&&d<=.25||!N.over&&N.before&&d<=.5?x="before":N.over&&(x="over"),C.preventVoidMoves&&"move"===data.dropEffect&&(S===A?(S.debug("Drop over source node prevented."),x=null):"before"===x&&A&&S===A.getNextSibling()?(S.debug("Drop after source node prevented."),x=null):"after"===x&&A&&S===A.getPrevSibling()?(S.debug("Drop before source node prevented."),x=null):"over"===x&&A&&A.parent===S&&A.isLastSibling()&&(S.debug("Drop last child over own parent prevented."),x=null)),data.hitMode=x,x&&C.dragOver&&(R(t,data),C.dragOver(S,data),M(t,data,!!x),x=data.hitMode),T=x,"after"===x||"before"===x||"over"===x){switch(n=C.dropMarkerOffsetX||0,x){case"before":E="top",n+=C.dropMarkerInsertOffsetX||0;break;case"after":E="bottom",n+=C.dropMarkerInsertOffsetX||0}l={my:"left"+P(n)+" center",at:"left "+E,of:L},_.rtl&&(l.my="right"+P(-n)+" center",l.at="right "+E),k.toggleClass(f,"after"===x).toggleClass(y,"over"===x).toggleClass(h,"before"===x).show().position(r.fixPositionOptions(l))}else k.hide();return e(S.span).toggleClass(m,"after"===x||"before"===x||"over"===x).toggleClass(f,"after"===x).toggleClass(h,"before"===x).toggleClass(c,"over"===x).toggleClass(v,!1===x),x}function W(o){var c,f=this,h=f.options.dnd5,y=r.getNode(o),v=o.dataTransfer||o.originalEvent.dataTransfer,data={tree:f,node:y,options:f.options,originalEvent:o.originalEvent,widget:f.widget,dataTransfer:v,useDefaultImage:!0,dropEffect:void 0,dropEffectSuggested:void 0,effectAllowed:void 0,files:void 0,isCancelled:void 0,isMove:void 0};switch(o.type){case"dragstart":if(!y)return f.info("Ignored dragstart on a non-node."),!1;w=y,_=!1===h.multiSource?[y]:!0===h.multiSource?y.isSelected()?f.getSelectedNodes():[y]:h.multiSource(y,data),(C=e(e.map(_,(function(e){return e.span})))).addClass(l);var m=y.toDict(!0,h.sourceCopyHook);m.treeId=y.tree._id,c=JSON.stringify(m);try{v.setData(x,c),v.setData("text/html",e(y.span).html()),v.setData("text/plain",y.title)}catch(e){f.warn("Could not set data (IE only accepts 'text') - "+e)}return h.setTextTypeJson?v.setData("text",c):v.setData("text",y.title),R(o,data),!1===h.dragStart(y,data)?(L(),!1):(M(o,data),n=null,data.useDefaultImage&&(t=e(y.span).find(".fancytree-title"),_&&_.length>1&&(n=e("<span class='fancytree-childcounter'/>").text("+"+(_.length-1)).appendTo(t)),v.setDragImage&&v.setDragImage(t[0],-10,-10)),!0);case"drag":R(o,data),h.dragDrag(y,data),M(o,data),C.toggleClass(d,data.isMove);break;case"dragend":R(o,data),L(),data.isCancelled=!T,h.dragEnd(y,data,!T)}}function z(t){var n,o,l,d,f=this,h=f.options.dnd5,m=null,C=r.getNode(t),S=t.dataTransfer||t.originalEvent.dataTransfer,data={tree:f,node:C,options:f.options,originalEvent:t.originalEvent,widget:f.widget,hitMode:N,dataTransfer:S,otherNode:w||null,otherNodeList:_||null,otherNodeData:null,useDefaultImage:!0,dropEffect:void 0,dropEffectSuggested:void 0,effectAllowed:void 0,files:null,isCancelled:void 0,isMove:void 0};switch(t.type){case"dragenter":if(D=null,!C){f.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className),N=!1;break}if(e(C.span).addClass(y).removeClass(c+" "+v),l=e.inArray(x,S.types)>=0,h.preventNonNodes&&!l){C.debug("Reject dropping a non-node."),N=!1;break}if(h.preventForeignNodes&&(!w||w.tree!==C.tree)){C.debug("Reject dropping a foreign node."),N=!1;break}if(h.preventSameParent&&data.otherNode&&data.otherNode.tree===C.tree&&C.parent===data.otherNode.parent){C.debug("Reject dropping as sibling (same parent)."),N=!1;break}if(h.preventRecursion&&data.otherNode&&data.otherNode.tree===C.tree&&C.isDescendantOf(data.otherNode)){C.debug("Reject dropping below own ancestor."),N=!1;break}if(h.preventLazyParents&&!C.isLoaded()){C.warn("Drop over unloaded target node prevented."),N=!1;break}k.show(),R(t,data),d=O(h.dragEnter(C,data)),N=d,M(t,data,m=d&&(d.over||d.before||d.after));break;case"dragover":if(!C){f.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className);break}R(t,data),m=!!(T=F(t,data)),"over"!==T&&!1!==T||C.expanded||!1===C.hasChildren()?D=null:D?!(h.autoExpandMS&&Date.now()-D>h.autoExpandMS)||C.isLoading()||h.dragExpand&&!1===h.dragExpand(C,data)||C.setExpanded():D=Date.now();break;case"dragleave":if(!C){f.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className);break}if(!e(C.span).hasClass(y)){C.debug("Ignore dragleave (multi).");break}e(C.span).removeClass(y+" "+c+" "+v),C.scheduleAction("cancel"),h.dragLeave(C,data),k.hide();break;case"drop":if(e.inArray(x,S.types)>=0&&(o=S.getData(x),f.info(t.type+": getData('application/x-fancytree-node'): '"+o+"'")),o||(o=S.getData("text"),f.info(t.type+": getData('text'): '"+o+"'")),o)try{void 0!==(n=JSON.parse(o)).title&&(data.otherNodeData=n)}catch(e){}f.debug(t.type+": nodeData: '"+o+"', otherNodeData: ",data.otherNodeData),e(C.span).removeClass(y+" "+c+" "+v),data.hitMode=T,R(t,data,!T),data.isCancelled=!T;var A=w&&w.span,E=w&&w.tree;h.dragDrop(C,data),t.preventDefault(),A&&!document.body.contains(A)&&(E===f?(f.debug("Drop handler removed source element: generating dragEnd."),h.dragEnd(w,data)):f.warn("Drop handler removed source element: dragend event may be lost.")),L()}if(m)return t.preventDefault(),!1}return e.ui.fancytree.getDragNodeList=function(){return _||[]},e.ui.fancytree.getDragNode=function(){return w},e.ui.fancytree.registerExtension({name:"dnd5",version:"2.38.2",options:{autoExpandMS:1500,dropMarkerInsertOffsetX:-16,dropMarkerOffsetX:-24,dropMarkerParent:"body",multiSource:!1,effectAllowed:"all",dropEffectDefault:"move",preventForeignNodes:!1,preventLazyParents:!0,preventNonNodes:!1,preventRecursion:!0,preventSameParent:!1,preventVoidMoves:!0,scroll:!0,scrollSensitivity:20,scrollSpeed:5,setTextTypeJson:!1,sourceCopyHook:null,dragStart:null,dragDrag:e.noop,dragEnd:e.noop,dragEnter:null,dragOver:e.noop,dragExpand:e.noop,dragDrop:e.noop,dragLeave:e.noop},treeInit:function(t){var n,o=t.tree,l=t.options,glyph=l.glyph||null,d=l.dnd5;e.inArray("dnd",l.extensions)>=0&&e.error("Extensions 'dnd' and 'dnd5' are mutually exclusive."),d.dragStop&&e.error("dragStop is not used by ext-dnd5. Use dragEnd instead."),null!=d.preventRecursiveMoves&&e.error("preventRecursiveMoves was renamed to preventRecursion."),d.dragStart&&r.overrideMethod(t.options,"createNode",(function(e,data){this._super.apply(this,arguments),data.node.span?data.node.span.draggable=!0:data.node.warn("Cannot add `draggable`: no span tag")})),this._superApply(arguments),this.$container.addClass("fancytree-ext-dnd5"),n=e("<span>").appendTo(this.$container),this.$scrollParent=n.scrollParent(),n.remove(),(k=e("#fancytree-drop-marker")).length||(k=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3,"pointer-events":"none"}).prependTo(d.dropMarkerParent),glyph&&r.setSpanIcon(k[0],glyph.map._addClass,glyph.map.dropMarker)),k.toggleClass("fancytree-rtl",!!l.rtl),d.dragStart&&o.$container.on("dragstart drag dragend",W.bind(o)),d.dragEnter&&o.$container.on("dragenter dragover dragleave drop",z.bind(o))}}),e.ui.fancytree},void 0===(l="function"==typeof r?r.apply(t,o):r)||(e.exports=l)},1520:function(e,t,n){var r,o,l;o=[n(447),n(666)],r=function(e){"use strict";var t=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function n(t,n){var r=e("#"+(t="fancytree-style-"+t));if(!n)return r.remove(),null;r.length||(r=e("<style />").attr("id",t).addClass("fancytree-style").prop("type","text/css").appendTo("head"));try{r.html(n)}catch(e){r[0].styleSheet.cssText=n}return r}function r(e,t,n,r,o,l){var i,d="#"+e+" span.fancytree-level-",c=[];for(i=0;i<t;i++)c.push(d+(i+1)+" span.fancytree-title { padding-left: "+(i*n+r)+l+"; }");return c.push("#"+e+" div.ui-effects-wrapper ul li span.fancytree-title, #"+e+" li.fancytree-animating span.fancytree-title { padding-left: "+o+l+"; position: static; width: auto; }"),c.join("\n")}return e.ui.fancytree.registerExtension({name:"wide",version:"2.38.2",options:{iconWidth:null,iconSpacing:null,labelSpacing:null,levelOfs:null},treeCreate:function(o){this._superApply(arguments),this.$container.addClass("fancytree-ext-wide");var l,d,c,f,h,y=o.options.wide,v=e("<li id='fancytreeTemp'><span class='fancytree-node'><span class='fancytree-icon' /><span class='fancytree-title' /></span><ul />").appendTo(o.tree.$container),m=v.find(".fancytree-icon"),x=v.find("ul"),k=y.iconSpacing||m.css("margin-left"),w=y.iconWidth||m.css("width"),_=y.labelSpacing||"3px",C=y.levelOfs||x.css("padding-left");v.remove(),d=k.match(t)[2],k=parseFloat(k,10),c=_.match(t)[2],_=parseFloat(_,10),f=w.match(t)[2],w=parseFloat(w,10),h=C.match(t)[2],d===f&&h===f&&c===f||e.error("iconWidth, iconSpacing, and levelOfs must have the same css measure unit"),this._local.measureUnit=f,this._local.levelOfs=parseFloat(C),this._local.lineOfs=(1+(o.options.checkbox?1:0)+(!1===o.options.icon?0:1))*(w+k)+k,this._local.labelOfs=_,this._local.maxDepth=10,n(l=this.$container.uniqueId().attr("id"),r(l,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.labelOfs,this._local.measureUnit))},treeDestroy:function(e){return n(this.$container.attr("id"),null),this._superApply(arguments)},nodeRenderStatus:function(t){var o,l,d=t.node,c=d.getLevel();return l=this._super(t),c>this._local.maxDepth&&(o=this.$container.attr("id"),this._local.maxDepth*=2,d.debug("Define global ext-wide css up to level "+this._local.maxDepth),n(o,r(o,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.labelSpacing,this._local.measureUnit))),e(d.span).addClass("fancytree-level-"+c),l}}),e.ui.fancytree},void 0===(l="function"==typeof r?r.apply(t,o):r)||(e.exports=l)},1521:function(e,t,n){var r,o,l;o=[n(447),n(666)],r=function(e){"use strict";var t=e.ui.fancytree.assert;function n(e,t){e.insertBefore(t,e.firstChild)}function r(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function o(e,t){e.visit((function(e){var tr=e.tr;if(tr&&(tr.style.display=e.hide||!t?"none":""),!e.expanded)return"skip"}))}function l(n){var r,o,l=n.parent,d=l?l.children:null;if(d&&d.length>1&&d[0]!==n)for(o=d[e.inArray(n,d)-1],t(o.tr);o.children&&o.children.length&&(r=o.children[o.children.length-1]).tr;)o=r;else o=l;return o}return e.ui.fancytree.registerExtension({name:"table",version:"2.38.2",options:{checkboxColumnIdx:null,indentation:16,mergeStatusColumns:!0,nodeColumnIdx:0},treeInit:function(n){var i,r,o,l,d=n.tree,c=n.options,f=c.table,h=d.widget.element;if(null!=f.customStatus&&(null==c.renderStatusColumns?(d.warn("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' instead."),c.renderStatusColumns=f.customStatus):e.error("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' only instead.")),c.renderStatusColumns&&!0===c.renderStatusColumns&&(c.renderStatusColumns=c.renderColumns),h.addClass("fancytree-container fancytree-ext-table"),(l=h.find(">tbody")).length||(h.find(">tr").length&&e.error("Expected table > tbody > tr. If you see this please open an issue."),l=e("<tbody>").appendTo(h)),d.tbody=l[0],d.columnCount=e("thead >tr",h).last().find(">th",h).length,(o=l.children("tr").first()).length)r=o.children("td").length,d.columnCount&&r!==d.columnCount&&(d.warn("Column count mismatch between thead ("+d.columnCount+") and tbody ("+r+"): using tbody."),d.columnCount=r),o=o.clone();else for(t(d.columnCount>=1,"Need either <thead> or <tbody> with <td> elements to determine column count."),o=e("<tr />"),i=0;i<d.columnCount;i++)o.append("<td />");o.find(">td").eq(f.nodeColumnIdx).html("<span class='fancytree-node' />"),c.aria&&(o.attr("role","row"),o.find("td").attr("role","gridcell")),d.rowFragment=document.createDocumentFragment(),d.rowFragment.appendChild(o.get(0)),l.empty(),d.statusClassPropName="tr",d.ariaPropName="tr",this.nodeContainerAttrName="tr",d.$container=h,this._superApply(arguments),e(d.rootNode.ul).remove(),d.rootNode.ul=null,this.$container.attr("tabindex",c.tabindex),c.aria&&d.$container.attr("role","treegrid").attr("aria-readonly",!0)},nodeRemoveChildMarkup:function(t){t.node.visit((function(t){t.tr&&(e(t.tr).remove(),t.tr=null)}))},nodeRemoveMarkup:function(t){var n=t.node;n.tr&&(e(n.tr).remove(),n.tr=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(d,c,f,h,y){var v,m,i,x,k,w,_,C,N=d.tree,S=d.node,A=d.options,E=!S.parent;if(!1!==N._enableUpdate){if(y||(d.hasCollapsedParents=S.parent&&!S.parent.expanded),!E)if(S.tr&&c&&this.nodeRemoveMarkup(d),S.tr)c?this.nodeRenderTitle(d):this.nodeRenderStatus(d);else{if(d.hasCollapsedParents&&!f)return;k=N.rowFragment.firstChild.cloneNode(!0),w=l(S),t(w),(!0===h&&y||f&&d.hasCollapsedParents)&&(k.style.display="none"),w.tr?r(w.tr,k):(t(!w.parent,"prev. row must have a tr, or be system root"),n(N.tbody,k)),S.tr=k,S.key&&A.generateIds&&(S.tr.id=A.idPrefix+S.key),S.tr.ftnode=S,S.span=e("span.fancytree-node",S.tr).get(0),this.nodeRenderTitle(d),A.createNode&&A.createNode.call(N,{type:"createNode"},d)}if(A.renderNode&&A.renderNode.call(N,{type:"renderNode"},d),(v=S.children)&&(E||f||S.expanded))for(i=0,x=v.length;i<x;i++)(C=e.extend({},d,{node:v[i]})).hasCollapsedParents=C.hasCollapsedParents||!S.expanded,this.nodeRender(C,c,f,h,!0);v&&!y&&(_=S.tr||null,m=N.tbody.firstChild,S.visit((function(e){if(e.tr){if(e.parent.expanded||"none"===e.tr.style.display||(e.tr.style.display="none",o(e,!1)),e.tr.previousSibling!==_){S.debug("_fixOrder: mismatch at node: "+e);var t=_?_.nextSibling:m;N.tbody.insertBefore(e.tr,t)}_=e.tr}})))}},nodeRenderTitle:function(t,title){var n,r,o=t.tree,l=t.node,d=t.options,c=l.isStatusNode();return r=this._super(t,title),l.isRootNode()||(d.checkbox&&!c&&null!=d.table.checkboxColumnIdx&&(n=e("span.fancytree-checkbox",l.span),e(l.tr).find("td").eq(+d.table.checkboxColumnIdx).html(n)),this.nodeRenderStatus(t),c?d.renderStatusColumns?d.renderStatusColumns.call(o,{type:"renderStatusColumns"},t):d.table.mergeStatusColumns&&l.isTopLevel()&&e(l.tr).find(">td").eq(0).prop("colspan",o.columnCount).text(l.title).addClass("fancytree-status-merged").nextAll().remove():d.renderColumns&&d.renderColumns.call(o,{type:"renderColumns"},t)),r},nodeRenderStatus:function(t){var n,r=t.node,o=t.options;this._super(t),e(r.tr).removeClass("fancytree-node"),n=(r.getLevel()-1)*o.table.indentation,o.rtl?e(r.span).css({paddingRight:n+"px"}):e(r.span).css({paddingLeft:n+"px"})},nodeSetExpanded:function(t,n,r){if(n=!1!==n,t.node.expanded&&n||!t.node.expanded&&!n)return this._superApply(arguments);var l=new e.Deferred,d=e.extend({},r,{noEvents:!0,noAnimation:!0});function c(e,d){e?(o(t.node,n),n&&t.options.autoScroll&&!r.noAnimation&&t.node.hasChildren()?t.node.getLastChild().scrollIntoView(!0,{topNode:t.node}).always((function(){r.noEvents||t.tree._triggerNodeEvent(n?"expand":"collapse",t),l.resolveWith(t.node)})):(r.noEvents||t.tree._triggerNodeEvent(n?"expand":"collapse",t),l.resolveWith(t.node))):(r.noEvents||t.tree._triggerNodeEvent(n?"expand":"collapse",t),l.rejectWith(t.node))}return r=r||{},this._super(t,n,d).done((function(){c(!0,arguments)})).fail((function(){c(!1,arguments)})),l.promise()},nodeSetStatus:function(t,n,r,details){if("ok"===n){var o=t.node,l=o.children?o.children[0]:null;l&&l.isStatusNode()&&e(l.tr).remove()}return this._superApply(arguments)},treeClear:function(e){return this.nodeRemoveChildMarkup(this._makeHookContext(this.rootNode)),this._superApply(arguments)},treeDestroy:function(e){return this.$container.find("tbody").empty(),this.$source&&this.$source.removeClass("fancytree-helper-hidden"),this._superApply(arguments)}}),e.ui.fancytree},void 0===(l="function"==typeof r?r.apply(t,o):r)||(e.exports=l)},666:function(e,t,n){var r,o,l;o=[n(447),n(1513)],r=function(e){"use strict";if(!e.ui||!e.ui.fancytree){var i,t,n=null,r=new RegExp(/\.|\//),o=/[&<>"'/]/g,l=/[<>"'/]/g,d="$recursive_request",c="$request_target_invalid",f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},h={16:!0,17:!0,18:!0},y={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},v={16:"shift",17:"ctrl",18:"alt",91:"meta",93:"meta"},m={0:"",1:"left",2:"middle",3:"right"},x="active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),k={},w="columns types".split(" "),_="checkbox expanded extraClasses folder icon iconTooltip key lazy partsel radiogroup refKey selected statusNodeType title tooltip type unselectable unselectableIgnore unselectableStatus".split(" "),C={},N={},S={active:!0,children:!0,data:!0,focus:!0};for(i=0;i<x.length;i++)k[x[i]]=!0;for(i=0;i<_.length;i++)t=_[i],C[t]=!0,t!==t.toLowerCase()&&(N[t.toLowerCase()]=t);var A=Array.isArray;return E(e.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),Date.now||(Date.now=function(){return(new Date).getTime()}),V.prototype={_findDirectChild:function(e){var i,t,n=this.children;if(n)if("string"==typeof e){for(i=0,t=n.length;i<t;i++)if(n[i].key===e)return n[i]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){E(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var i=0,t=e.length;i<t;i++)this.children.push(new V(this,e[i]));this.tree._callHook("treeStructureChanged",this.tree,"setChildren")},addChildren:function(t,n){var i,r,o,l=this.getFirstChild(),d=this.getLastChild(),c=null,f=[];for(e.isPlainObject(t)&&(t=[t]),this.children||(this.children=[]),i=0,r=t.length;i<r;i++)f.push(new V(this,t[i]));if(c=f[0],null==n?this.children=this.children.concat(f):(n=this._findDirectChild(n),E((o=e.inArray(n,this.children))>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[o,0].concat(f))),l&&!n){for(i=0,r=f.length;i<r;i++)f[i].render();l!==this.getFirstChild()&&l.renderStatus(),d!==this.getLastChild()&&d.renderStatus()}else(!this.parent||this.parent.ul||this.tr)&&this.render();return 3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===f.length?f[0]:null),c},addClass:function(e){return this.toggleClass(e,!0)},addNode:function(e,t){switch(void 0!==t&&"over"!==t||(t="child"),t){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"firstChild":var n=this.children?this.children[0]:null;return this.addChildren(e,n);case"child":case"over":return this.addChildren(e)}E(!1,"Invalid mode: "+t)},addPagingNode:function(t,n){var i,r;if(n=n||"child",!1!==t)return t=e.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},t),this.partload=!0,this.addNode(t,n);for(i=this.children.length-1;i>=0;i--)"paging"===(r=this.children[i]).statusNodeType&&this.removeChild(r);this.partload=!1},appendSibling:function(e){return this.addNode(e,"after")},applyCommand:function(e,t){return this.tree.applyCommand(e,this,t)},applyPatch:function(e){if(null===e)return this.remove(),F(this);var t,n,r={children:!0,expanded:!0,parent:!0};for(t in e)T(e,t)&&(n=e[t],r[t]||D(n)||(C[t]?this[t]=n:this.data[t]=n));return T(e,"children")&&(this.removeChildren(),e.children&&this._setChildren(e.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),T(e,"expanded")?this.setExpanded(e.expanded):F(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,map){return e.addNode(this.toDict(!0,map),t)},countChildren:function(e){var i,t,n,r=this.children;if(!r)return 0;if(n=r.length,!1!==e)for(i=0,t=n;i<t;i++)n+=r[i].countChildren();return n},debug:function(e){this.tree.options.debugLevel>=4&&(Array.prototype.unshift.call(arguments,this.toString()),P("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(e){var t=e?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(t,this)},error:function(e){this.tree.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),P("error",arguments))},findAll:function(e){e=D(e)?e:K(e);var t=[];return this.visit((function(n){e(n)&&t.push(n)})),t},findFirst:function(e){e=D(e)?e:K(e);var t=null;return this.visit((function(n){if(e(n))return t=n,!1})),t},findRelatedNode:function(e,t){return this.tree.findRelatedNode(this,e,t)},_changeSelectStatusAttrs:function(e){var t=!1,r=this.tree.options,o=n.evalOption("unselectable",this,this,r,!1),l=n.evalOption("unselectableStatus",this,this,r,void 0);switch(o&&null!=l&&(e=l),e){case!1:t=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:t=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case void 0:t=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:E(!1,"invalid state: "+e)}return t&&this.renderStatus(),t},fixSelection3AfterClick:function(e){var t=this.isSelected();this.visit((function(e){if(e._changeSelectStatusAttrs(t),e.radiogroup)return"skip"})),this.fixSelection3FromEndNodes(e)},fixSelection3FromEndNodes:function(e){var t=this.tree.options;function r(e){var i,o,l,s,d,c,f,h,y=e.children;if(y&&y.length){for(c=!0,f=!1,i=0,o=y.length;i<o;i++)s=r(l=y[i]),n.evalOption("unselectableIgnore",l,l,t,!1)||(!1!==s&&(f=!0),!0!==s&&(c=!1));d=!!c||!!f&&void 0}else d=null==(h=n.evalOption("unselectableStatus",e,e,t,void 0))?!!e.selected:!!h;return e.partsel&&!e.selected&&e.lazy&&null==e.children&&(d=void 0),e._changeSelectStatusAttrs(d),d}E(3===t.selectMode,"expected selectMode 3"),r(this),this.visitParents((function(e){var i,r,o,l,d,c=e.children,f=!0,h=!1;for(i=0,r=c.length;i<r;i++)o=c[i],n.evalOption("unselectableIgnore",o,o,t,!1)||(((l=null==(d=n.evalOption("unselectableStatus",o,o,t,void 0))?!!o.selected:!!d)||o.partsel)&&(h=!0),l||(f=!1));l=!!f||!!h&&void 0,e._changeSelectStatusAttrs(l)}))},fromDict:function(t){for(var n in t)C[n]?this[n]=t[n]:"data"===n?e.extend(this.data,t.data):D(t[n])||S[n]||(this.data[n]=t[n]);t.children&&(this.removeChildren(),this.addChildren(t.children)),this.renderTitle()},getChildren:function(){if(void 0!==this.hasChildren())return this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return e.inArray(this,this.parent.children)},getIndexHier:function(t,n){t=t||".";var s,r=[];return e.each(this.getParentList(!1,!0),(function(i,e){s=""+(e.getIndex()+1),n&&(s=("0000000"+s).substr(-n)),r.push(s)})),r.join(t)},getKeyPath:function(e){var t=this.tree.options.keyPathSeparator;return t+this.getPath(!e,"key",t)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent){var i,e,t=this.parent.children;for(i=0,e=t.length-1;i<e;i++)if(t[i]===this)return t[i+1]}return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var n=[],r=t?this:this.parent;r;)(e||r.parent)&&n.unshift(r),r=r.parent;return n},getPath:function(e,t,n){e=!1!==e,n=n||"/";var r,path=[],o=D(t=t||"title");return this.visitParents((function(e){e.parent&&(r=o?t(e):e[t],path.unshift(r))}),e),path.join(n)},getPrevSibling:function(){if(this.parent){var i,e,t=this.parent.children;for(i=1,e=t.length;i<e;i++)if(t[i]===this)return t[i-1]}return null},getSelectedNodes:function(e){var t=[];return this.visit((function(n){if(n.selected&&(t.push(n),!0===e))return"skip"})),t},hasChildren:function(){if(this.lazy){if(null==this.children)return;if(0===this.children.length)return!1;if(1===this.children.length&&this.children[0].isStatusNode())return;return!0}return!(!this.children||!this.children.length)},hasClass:function(e){return(" "+(this.extraClasses||"")+" ").indexOf(" "+e+" ")>=0},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(e){this.tree.options.debugLevel>=3&&(Array.prototype.unshift.call(arguments,this.toString()),P("info",arguments))},isActive:function(){return this.tree.activeNode===this},isBelowOf:function(e){return this.getIndexHier(".",5)>e.getIndexHier(".",5)},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(t){if(!t||t.tree!==this.tree)return!1;for(var p=this.parent;p;){if(p===t)return!0;p===p.parent&&e.error("Recursive parent link: "+p),p=p.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var p=this.parent;return!p||p.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var p=this.parent;return!p||p.children[p.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||void 0!==this.hasChildren()},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartsel:function(){return!this.selected&&!!this.partsel},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return void 0===this.hasChildren()},isVisible:function(){var i,e,t=this.tree.enableFilter,n=this.getParentList(!1,!1);if(t&&!this.match&&!this.subMatchCount)return!1;for(i=0,e=n.length;i<e;i++)if(!n[i].expanded)return!1;return!0},lazyLoad:function(t){e.error("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead.")},load:function(e){var t,source,n=this,r=this.isExpanded();return E(this.isLazy(),"load() requires a lazy node"),e||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),!1===(source=this.tree._triggerNodeEvent("lazyLoad",this))?F(this):(E("boolean"!=typeof source,"lazyLoad event must return source in data.result"),t=this.tree._callHook("nodeLoadChildren",this,source),r?(this.expanded=!0,t.always((function(){n.render()}))):t.always((function(){n.renderStatus()})),t)):F(this)},makeVisible:function(t){var i,n=this,r=[],o=new e.Deferred,l=this.getParentList(!1,!1),d=l.length,c=!(t&&!0===t.noAnimation),f=!(t&&!1===t.scrollIntoView);for(i=d-1;i>=0;i--)r.push(l[i].setExpanded(!0,t));return e.when.apply(e,r).done((function(){f?n.scrollIntoView(c).done((function(){o.resolve()})):o.resolve()})),o.promise()},moveTo:function(t,n,map){void 0===n||"over"===n?n="child":"firstChild"===n&&(t.children&&t.children.length?(n="before",t=t.children[0]):n="child");var r,o=this.tree,l=this.parent,d="child"===n?t:t.parent;if(this!==t){if(this.parent?d.isDescendantOf(this)&&e.error("Cannot move a node to its own descendant"):e.error("Cannot move system root"),d!==l&&l.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===d)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else E((r=e.inArray(this,this.parent.children))>=0,"invalid source parent"),this.parent.children.splice(r,1);if(this.parent=d,d.hasChildren())switch(n){case"child":d.children.push(this);break;case"before":E((r=e.inArray(t,d.children))>=0,"invalid target parent"),d.children.splice(r,0,this);break;case"after":E((r=e.inArray(t,d.children))>=0,"invalid target parent"),d.children.splice(r+1,0,this);break;default:e.error("Invalid mode "+n)}else d.children=[this];map&&t.visit(map,!0),d===l?d.triggerModifyChild("move",this):d.triggerModifyChild("add",this),o!==t.tree&&(this.warn("Cross-tree moveTo is experimental!"),this.visit((function(e){e.tree=t.tree}),!0)),o._callHook("treeStructureChanged",o,"moveTo"),l.isDescendantOf(d)||l.render(),d.isDescendantOf(l)||d===l||d.render()}},navigate:function(t,n){var r,o=e.ui.keyCode;switch(t){case"left":case o.LEFT:if(this.expanded)return this.setExpanded(!1);break;case"right":case o.RIGHT:if(!this.expanded&&(this.children||this.lazy))return this.setExpanded()}if(r=this.findRelatedNode(t)){try{r.makeVisible({scrollIntoView:!1})}catch(e){}return!1===n?(r.setFocus(),F()):r.setActive()}return this.warn("Could not find related node '"+t+"'."),F()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(source){var t,n=this.parent,r=e.inArray(this,n.children),o=this;return E(this.isPagingNode(),"replaceWith() currently requires a paging status node"),(t=this.tree._callHook("nodeLoadChildren",this,source)).done((function(data){var e=o.children;for(i=0;i<e.length;i++)e[i].parent=n;n.children.splice.apply(n.children,[r+1,0].concat(e)),o.children=null,o.remove(),n.render()})).fail((function(){o.setExpanded()})),t},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=void 0,this.renderStatus()},scheduleAction:function(t,n){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.debug("clearTimeout(%o)",this.tree.timer)),this.tree.timer=null;var r=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout((function(){r.tree.debug("setTimeout: trigger expand"),r.setExpanded(!0)}),n);break;case"activate":this.tree.timer=setTimeout((function(){r.tree.debug("setTimeout: trigger activate"),r.setActive(!0)}),n);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(t,n){if(void 0!==n&&O(n))throw Error("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead.");var r=e.extend({effects:!0===t?{duration:200,queue:!1}:t,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent,topNode:null},n),o=r.scrollParent,l=this.tree.$container,d=l.css("overflow-y");o?o.jquery||(o=e(o)):o=this.tree.tbody?l.scrollParent():"scroll"===d||"auto"===d?l:l.scrollParent(),o[0]!==document&&o[0]!==document.body||(this.debug("scrollIntoView(): normalizing scrollParent to 'window':",o[0]),o=e(window));var c,f,h,y=new e.Deferred,v=this,m=e(this.span).height(),x=r.scrollOfs.top||0,k=r.scrollOfs.bottom||0,w=o.height(),_=o.scrollTop(),C=o,N=o[0]===window,S=r.topNode||null,A=null;return this.isRootNode()||!this.isVisible()?(this.info("scrollIntoView(): node is invisible."),F()):(N?(f=e(this.span).offset().top,c=S&&S.span?e(S.span).offset().top:0,C=e("html,body")):(E(o[0]!==document&&o[0]!==document.body,"scrollParent should be a simple element or `window`, not document or body."),h=o.offset().top,f=e(this.span).offset().top-h+_,c=S?e(S.span).offset().top-h+_:0,w-=Math.max(0,o.innerHeight()-o[0].clientHeight)),f<_+x?A=f-x:f+m>_+w-k&&(A=f+m-w+k,S&&(E(S.isRootNode()||S.isVisible(),"topNode must be visible"),c<A&&(A=c-x))),null===A?y.resolveWith(this):r.effects?(r.effects.complete=function(){y.resolveWith(v)},C.stop(!0).animate({scrollTop:A},r.effects)):(C[0].scrollTop=A,y.resolveWith(this)),y.promise())},setActive:function(e,t){return this.tree._callHook("nodeSetActive",this,e,t)},setExpanded:function(e,t){return this.tree._callHook("nodeSetExpanded",this,e,t)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e,t){return this.tree._callHook("nodeSetSelected",this,e,t)},setStatus:function(e,t,details){return this.tree._callHook("nodeSetStatus",this,e,t,details)},setTitle:function(title){this.title=title,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(e,t){var i,n,r=this.children;if(r){if(e=e||function(a,b){var e=a.title.toLowerCase(),t=b.title.toLowerCase();return e===t?0:e>t?1:-1},r.sort(e),t)for(i=0,n=r.length;i<n;i++)r[i].children&&r[i].sortChildren(e,"$norender$");"$norender$"!==t&&this.render(),this.triggerModifyChild("sort")}},toDict:function(t,n){var i,r,o,l,d={},c=this;if(e.each(_,(function(i,a){(c[a]||!1===c[a])&&(d[a]=c[a])})),e.isEmptyObject(this.data)||(d.data=e.extend({},this.data),e.isEmptyObject(d.data)&&delete d.data),n){if(!1===(l=n(d,c)))return!1;"skip"===l&&(t=!1)}if(t&&A(this.children))for(d.children=[],i=0,r=this.children.length;i<r;i++)(o=this.children[i]).isStatusNode()||!1!==(l=o.toDict(!0,n))&&d.children.push(l);return d},toggleClass:function(t,n){var r,o,l=/\S+/g,d=t.match(l)||[],i=0,c=!1,f=this[this.tree.statusClassPropName],h=" "+(this.extraClasses||"")+" ";for(f&&e(f).toggleClass(t,n);r=d[i++];)if(o=h.indexOf(" "+r+" ")>=0,n=void 0===n?!o:!!n)o||(h+=r+" ",c=!0);else for(;h.indexOf(" "+r+" ")>-1;)h=h.replace(" "+r+" "," ");return this.extraClasses=L(h),c},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"FancytreeNode@"+this.key+"[title='"+this.title+"']"},triggerModifyChild:function(t,n,r){var data,o=this.tree.options.modifyChild;o&&(n&&n.parent!==this&&e.error("childNode "+n+" is not a child of "+this),data={node:this,tree:this.tree,operation:t,childNode:n||null},r&&e.extend(data,r),o({type:"modifyChild"},data))},triggerModify:function(e,t){this.parent.triggerModifyChild(e,this,t)},visit:function(e,t){var i,n,r=!0,o=this.children;if(!0===t&&(!1===(r=e(this))||"skip"===r))return r;if(o)for(i=0,n=o.length;i<n&&!1!==(r=o[i].visit(e,!0));i++);return r},visitAndLoad:function(t,n,r){var o,l,d,c=this;return!t||!0!==n||!1!==(l=t(c))&&"skip"!==l?c.children||c.lazy?(o=new e.Deferred,d=[],c.load().done((function(){for(var i=0,n=c.children.length;i<n;i++){if(!1===(l=c.children[i].visitAndLoad(t,!0,!0))){o.reject();break}"skip"!==l&&d.push(l)}e.when.apply(this,d).then((function(){o.resolve()}))})),o.promise()):F():r?l:F()},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var p=this.parent;p;){if(!1===e(p))return!1;p=p.parent}return!0},visitSiblings:function(e,t){var i,n,r,o=this.parent.children;for(i=0,n=o.length;i<n;i++)if(r=o[i],(t||r!==this)&&!1===e(r))return!1;return!0},warn:function(e){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),P("warn",arguments))}},B.prototype={_makeHookContext:function(t,n,r){var o,l;return void 0!==t.node?(n&&t.originalEvent!==n&&e.error("invalid args"),o=t):t.tree?o={node:t,tree:l=t.tree,widget:l.widget,options:l.widget.options,originalEvent:n,typeInfo:l.types[t.type]||{}}:t.widget?o={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:n}:e.error("invalid args"),r&&e.extend(o,r),o},_callHook:function(t,n,r){var o=this._makeHookContext(n),l=this[t],d=Array.prototype.slice.call(arguments,2);return D(l)||e.error("_callHook('"+t+"') is not a function"),d.unshift(o),l.apply(this,d)},_setExpiringValue:function(e,t,n){this._tempCache[e]={value:t,expire:Date.now()+(+n||50)}},_getExpiringValue:function(e){var t=this._tempCache[e];return t&&t.expire>Date.now()?t.value:(delete this._tempCache[e],null)},_usesExtension:function(t){return e.inArray(t,this.options.extensions)>=0},_requireExtension:function(t,n,r,o){null!=r&&(r=!!r);var l=this._local.name,d=this.options.extensions,c=e.inArray(t,d)<e.inArray(l,d),f=n&&null==this.ext[t],h=!f&&null!=r&&r!==c;return E(l&&l!==t,"invalid or same name '"+l+"' (require yourself?)"),!f&&!h||(o||(f||n?(o="'"+l+"' extension requires '"+t+"'",h&&(o+=" to be registered "+(r?"before":"after")+" itself")):o="If used together, `"+t+"` must be registered "+(r?"before":"after")+" `"+l+"`"),e.error(o),!1)},activateKey:function(e,t){var n=this.getNodeByKey(e);return n?n.setActive(!0,t):this.activeNode&&this.activeNode.setActive(!1,t),n},addPagingNode:function(e,t){return this.rootNode.addPagingNode(e,t)},applyCommand:function(t,n,r){var o;switch(n=n||this.getActiveNode(),t){case"moveUp":(o=n.getPrevSibling())&&(n.moveTo(o,"before"),n.setActive());break;case"moveDown":(o=n.getNextSibling())&&(n.moveTo(o,"after"),n.setActive());break;case"indent":(o=n.getPrevSibling())&&(n.moveTo(o,"child"),o.setExpanded(),n.setActive());break;case"outdent":n.isTopLevel()||(n.moveTo(n.getParent(),"after"),n.setActive());break;case"remove":o=n.getPrevSibling()||n.getParent(),n.remove(),o&&o.setActive();break;case"addChild":n.editCreateNode("child","");break;case"addSibling":n.editCreateNode("after","");break;case"rename":n.editStart();break;case"down":case"first":case"last":case"left":case"parent":case"right":case"up":return n.navigate(t);default:e.error("Unhandled command: '"+t+"'")}},applyPatch:function(t){var n,i,r,o,l,d,c=t.length,f=[];for(i=0;i<c;i++)E(2===(r=t[i]).length,"patchList must be an array of length-2-arrays"),o=r[0],l=r[1],(d=null===o?this.rootNode:this.getNodeByKey(o))?(n=new e.Deferred,f.push(n),d.applyPatch(l).always(z(n,d))):this.warn("could not find node with key '"+o+"'");return e.when.apply(e,f).promise()},clear:function(source){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(e){this.options.debugLevel>=4&&(Array.prototype.unshift.call(arguments,this.toString()),P("log",arguments))},destroy:function(){this.widget.destroy()},enable:function(e){!1===e?this.widget.disable():this.widget.enable()},enableUpdate:function(e){return e=!1!==e,!!this._enableUpdate==!!e?e:(this._enableUpdate=e,e?(this.debug("enableUpdate(true): redraw "),this._callHook("treeStructureChanged",this,"enableUpdate"),this.render()):this.debug("enableUpdate(false)..."),!e)},error:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),P("error",arguments))},expandAll:function(e,t){var n=this.enableUpdate(!1);e=!1!==e,this.visit((function(n){!1!==n.hasChildren()&&n.isExpanded()!==e&&n.setExpanded(e,t)})),this.enableUpdate(n)},findAll:function(e){return this.rootNode.findAll(e)},findFirst:function(e){return this.rootNode.findFirst(e)},findNextNode:function(e,t){var n=null,r=this.getFirstChild();function o(r){if(e(r)&&(n=r),n||r===t)return!1}return e="string"==typeof e?U(e):e,t=t||r,this.visitRows(o,{start:t,includeSelf:!1}),n||t===r||this.visitRows(o,{start:r,includeSelf:!0}),n},findRelatedNode:function(t,n,r){var o=null,l=e.ui.keyCode;switch(n){case"parent":case l.BACKSPACE:t.parent&&t.parent.parent&&(o=t.parent);break;case"first":case l.HOME:this.visit((function(e){if(e.isVisible())return o=e,!1}));break;case"last":case l.END:this.visit((function(e){e.isVisible()&&(o=e)}));break;case"left":case l.LEFT:t.expanded?t.setExpanded(!1):t.parent&&t.parent.parent&&(o=t.parent);break;case"right":case l.RIGHT:t.expanded||!t.children&&!t.lazy?t.children&&t.children.length&&(o=t.children[0]):(t.setExpanded(),o=t);break;case"up":case l.UP:this.visitRows((function(e){return o=e,!1}),{start:t,reverse:!0,includeSelf:!1});break;case"down":case l.DOWN:this.visitRows((function(e){return o=e,!1}),{start:t,includeSelf:!1});break;default:this.tree.warn("Unknown relation '"+n+"'.")}return o},generateFormElements:function(t,n,r){r=r||{};var o,l="string"==typeof t?t:"ft_"+this._id+"[]",d="string"==typeof n?n:"ft_"+this._id+"_active",c="fancytree_result_"+this._id,f=e("#"+c),h=3===this.options.selectMode&&!1!==r.stopOnParents;function y(t){f.append(e("<input>",{type:"checkbox",name:l,value:t.key,checked:!0}))}f.length?f.empty():f=e("<div>",{id:c}).hide().insertAfter(this.$container),!1!==n&&this.activeNode&&f.append(e("<input>",{type:"radio",name:d,value:this.activeNode.key,checked:!0})),r.filter?this.visit((function(e){var t=r.filter(e);if("skip"===t)return t;!1!==t&&y(e)})):!1!==t&&(o=this.getSelectedNodes(h),e.each(o,(function(e,t){y(t)})))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getOption:function(e){return this.widget.option(e)},getNodeByKey:function(e,t){var n,r;return!t&&(n=document.getElementById(this.options.idPrefix+e))?n.ftnode?n.ftnode:null:(t=t||this.rootNode,r=null,e=""+e,t.visit((function(t){if(t.key===e)return r=t,!1}),!0),r)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){this.options.debugLevel>=3&&(Array.prototype.unshift.call(arguments,this.toString()),P("info",arguments))},isLoading:function(){var e=!1;return this.rootNode.visit((function(t){if(t._isLoading||t._requestId)return e=!0,!1}),!0),e},loadKeyPath:function(t,n){var r,i,path,o=this,l=new e.Deferred,d=this.getRootNode(),c=this.options.keyPathSeparator,f=[],h=e.extend({},n);for("function"==typeof n?r=n:n&&n.callback&&(r=n.callback),h.callback=function(e,t,n){r&&r.call(e,t,n),l.notifyWith(e,[{node:t,status:n}])},null==h.matchKey&&(h.matchKey=function(e,t){return e.key===t}),A(t)||(t=[t]),i=0;i<t.length;i++)(path=t[i]).charAt(0)===c&&(path=path.substr(1)),f.push(path.split(c));return setTimeout((function(){o._loadKeyPathImpl(l,h,d,f).done((function(){l.resolve()}))}),0),l.promise()},_loadKeyPathImpl:function(t,n,r,o){var l,i,d,c,f,h,y,v,m,x,k=this;function w(e,t){var i,r,o=e.children;if(o)for(i=0,r=o.length;i<r;i++)if(n.matchKey(o[i],t))return o[i];return null}for(y={},i=0;i<o.length;i++)for(m=o[i],v=r;m.length;){if(d=m.shift(),!(c=w(v,d))){this.warn("loadKeyPath: key not found: "+d+" (parent: "+v+")"),n.callback(this,d,"error");break}if(0===m.length){n.callback(this,c,"ok");break}if(c.lazy&&void 0===c.hasChildren()){n.callback(this,c,"loaded"),y[d=c.key]?y[d].pathSegList.push(m):y[d]={parent:c,pathSegList:[m]};break}n.callback(this,c,"loaded"),v=c}function _(e,t,r){n.callback(k,t,"loading"),t.load().done((function(){k._loadKeyPathImpl.call(k,e,n,t,r).always(z(e,k))})).fail((function(r){k.warn("loadKeyPath: error loading lazy "+t),n.callback(k,c,"error"),e.rejectWith(k)}))}for(f in l=[],y)T(y,f)&&(h=y[f],x=new e.Deferred,l.push(x),_(x,h.parent,h.pathSegList));return e.when.apply(e,l).promise()},reactivate:function(e){var t,n=this.activeNode;return n?(this.activeNode=null,t=n.setActive(!0,{noFocus:!0}),e&&n.setFocus(),t):F()},reload:function(source){return this._callHook("treeClear",this),this._callHook("treeLoad",this,source)},render:function(e,t){return this.rootNode.render(e,t)},selectAll:function(e){this.visit((function(t){t.setSelected(e)}))},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},setOption:function(e,t){return this.widget.option(e,t)},debugTime:function(label){this.options.debugLevel>=4&&window.console.time(this+" - "+label)},debugTimeEnd:function(label){this.options.debugLevel>=4&&window.console.timeEnd(this+" - "+label)},toDict:function(e,t){var n=this.rootNode.toDict(!0,t);return e?n:n.children},toString:function(){return"Fancytree@"+this._id},_triggerNodeEvent:function(e,t,n,r){var o=this._makeHookContext(t,n,r),l=this.widget._trigger(e,n,o);return!1!==l&&void 0!==o.result?o.result:l},_triggerTreeEvent:function(e,t,n){var r=this._makeHookContext(this,t,n),o=this.widget._trigger(e,t,r);return!1!==o&&void 0!==r.result?r.result:o},visit:function(e){return this.rootNode.visit(e,!1)},visitRows:function(e,t){if(!this.rootNode.hasChildren())return!1;if(t&&t.reverse)return delete t.reverse,this._visitRowsUp(e,t);var i,n,r,o,l=0,d=!1===(t=t||{}).includeSelf,c=!!t.includeHidden,f=!c&&this.enableFilter,h=t.start||this.rootNode.children[0];for(r=h.parent;r;){for(E((n=(o=r.children).indexOf(h)+l)>=0,"Could not find "+h+" in parent's children: "+r),i=n;i<o.length;i++)if(h=o[i],!f||h.match||h.subMatchCount){if(!d&&!1===e(h))return!1;if(d=!1,h.children&&h.children.length&&(c||h.expanded)&&!1===h.visit((function(t){return!f||t.match||t.subMatchCount?!1!==e(t)&&(c||!t.children||t.expanded?void 0:"skip"):"skip"}),!1))return!1}h=r,r=r.parent,l=1}return!0},_visitRowsUp:function(e,t){for(var n,r,o,l=!!t.includeHidden,d=t.start||this.rootNode.children[0];;){if((n=(o=d.parent).children)[0]===d){if(!(d=o).parent)break;n=o.children}else for(r=n.indexOf(d),d=n[r-1];(l||d.expanded)&&d.children&&d.children.length;)o=d,d=(n=d.children)[n.length-1];if((l||d.isVisible())&&!1===e(d))return!1}},warn:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),P("warn",arguments))}},e.extend(B.prototype,{nodeClick:function(e){var t,n,r=e.targetType,o=e.node;if("expander"===r){if(o.isLoading())return void o.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",e)}else if("checkbox"===r)this._callHook("nodeToggleSelected",e),e.options.focusOnSelect&&this._callHook("nodeSetFocus",e,!0);else{if(n=!1,t=!0,o.folder)switch(e.options.clickFolderMode){case 2:n=!0,t=!1;break;case 3:t=!0,n=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),n&&this._callHook("nodeToggleExpanded",e)}},nodeCollapseSiblings:function(e,t){var n,i,r,o=e.node;if(o.parent)for(i=0,r=(n=o.parent.children).length;i<r;i++)n[i]!==o&&n[i].expanded&&this._callHook("nodeSetExpanded",n[i],!1,t)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(t){var r,o,l,d=t.originalEvent,c=t.node,f=t.tree,h=t.options,m=d.which,x=d.key||String.fromCharCode(m),k=!!(d.altKey||d.ctrlKey||d.metaKey),w=!v[m]&&!y[m]&&!k,_=e(d.target),C=!0,N=!(d.ctrlKey||!h.autoActivate);if(c||(l=this.getActiveNode()||this.getFirstChild())&&(l.setFocus(),(c=t.node=this.focusNode).debug("Keydown force focus on active node")),h.quicksearch&&w&&!_.is(":input:enabled"))return(o=Date.now())-f.lastQuicksearchTime>500&&(f.lastQuicksearchTerm=""),f.lastQuicksearchTime=o,f.lastQuicksearchTerm+=x,(r=f.findNextNode(f.lastQuicksearchTerm,f.getActiveNode()))&&r.setActive(),void d.preventDefault();switch(n.eventToString(d)){case"+":case"=":f.nodeSetExpanded(t,!0);break;case"-":f.nodeSetExpanded(t,!1);break;case"space":c.isPagingNode()?f._triggerNodeEvent("clickPaging",t,d):n.evalOption("checkbox",c,c,h,!1)?f.nodeToggleSelected(t):f.nodeSetActive(t,!0);break;case"return":f.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":c.navigate(d.which,N);break;default:C=!1}C&&d.preventDefault()},nodeLoadChildren:function(t,source){var n,r,o,l=null,f=!0,h=t.tree,y=t.node,v=y.parent,m="nodeLoadChildren",x=Date.now();return D(source)&&E(!D(source=source.call(h,{type:"source"},t)),"source callback must not return another function"),D(source.then)?l=source:source.url?(n=e.extend({},t.options.ajax,source)).debugDelay?(r=n.debugDelay,delete n.debugDelay,A(r)&&(r=r[0]+Math.random()*(r[1]-r[0])),y.warn("nodeLoadChildren waiting debugDelay "+Math.round(r)+" ms ..."),l=e.Deferred((function(t){setTimeout((function(){e.ajax(n).done((function(){t.resolveWith(this,arguments)})).fail((function(){t.rejectWith(this,arguments)}))}),r)}))):l=e.ajax(n):e.isPlainObject(source)||A(source)?(l={then:function(e,t){e(source,null,null)}},f=!1):e.error("Invalid source type: "+source),y._requestId&&(y.warn("Recursive load request #"+x+" while #"+y._requestId+" is pending."),y._requestId=x),f&&(h.debugTime(m),h.nodeSetStatus(t,"loading")),o=new e.Deferred,l.then((function(data,n,r){var l,f;if("json"!==source.dataType&&"jsonp"!==source.dataType||"string"!=typeof data||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),y._requestId&&y._requestId>x)o.rejectWith(this,[d]);else if(null!==y.parent||null===v){if(t.options.postProcess){try{(f=h._triggerNodeEvent("postProcess",t,t.originalEvent,{response:data,error:null,dataType:source.dataType})).error&&h.warn("postProcess returned error:",f)}catch(e){f={error:e,message:""+e,details:"postProcess failed"}}if(f.error)return l=e.isPlainObject(f.error)?f.error:{message:f.error},l=h._makeHookContext(y,null,l),void o.rejectWith(this,[l]);(A(f)||e.isPlainObject(f)&&A(f.children))&&(data=f)}else data&&T(data,"d")&&t.options.enableAspx&&(42===t.options.enableAspx&&h.warn("The default for enableAspx will change to `false` in the fututure. Pass `enableAspx: true` or implement postProcess to silence this warning."),data="string"==typeof data.d?e.parseJSON(data.d):data.d);o.resolveWith(this,[data])}else o.rejectWith(this,[c])}),(function(e,t,n){var r=h._makeHookContext(y,null,{error:e,args:Array.prototype.slice.call(arguments),message:n,details:e.status+": "+n});o.rejectWith(this,[r])})),o.done((function(data){var n,r,o;h.nodeSetStatus(t,"ok"),e.isPlainObject(data)?(E(y.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),E(A(data.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),r=data,n=data.children,delete r.children,e.each(w,(function(i,e){void 0!==r[e]&&(h[e]=r[e],delete r[e])})),e.extend(h.data,r)):n=data,E(A(n),"expected array of children"),y._setChildren(n),h.options.nodata&&0===n.length&&(D(h.options.nodata)?o=h.options.nodata.call(h,{type:"nodata"},t):!0===h.options.nodata&&y.isRootNode()?o=h.options.strings.noData:"string"==typeof h.options.nodata&&y.isRootNode()&&(o=h.options.nodata),o&&y.setStatus("nodata",o)),h._triggerNodeEvent("loadChildren",y)})).fail((function(e){var n;e!==d?e!==c?(e.node&&e.error&&e.message?n=e:"[object Object]"===(n=h._makeHookContext(y,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""})).message&&(n.message=""),y.warn("Load children failed ("+n.message+")",n),!1!==h._triggerNodeEvent("loadError",n,null)&&h.nodeSetStatus(t,"error",n.message,n.details)):y.warn("Lazy parent node was removed while loading: discarding response."):y.warn("Ignored response for obsolete load request #"+x+" (expected #"+y._requestId+")")})).always((function(){y._requestId=null,f&&h.debugTimeEnd(m)})),o.promise()},nodeLoadKeyPath:function(e,t){},nodeRemoveChild:function(t,n){var r,o=t.node,l=e.extend({},t,{node:n}),d=o.children;if(1===d.length)return E(n===d[0],"invalid single child"),this.nodeRemoveChildren(t);this.activeNode&&(n===this.activeNode||this.activeNode.isDescendantOf(n))&&this.activeNode.setActive(!1),this.focusNode&&(n===this.focusNode||this.focusNode.isDescendantOf(n))&&(this.focusNode=null),this.nodeRemoveMarkup(l),this.nodeRemoveChildren(l),E((r=e.inArray(n,d))>=0,"invalid child"),o.triggerModifyChild("remove",n),n.visit((function(e){e.parent=null}),!0),this._callHook("treeRegisterNode",this,!1,n),d.splice(r,1)},nodeRemoveChildMarkup:function(t){var n=t.node;n.ul&&(n.isRootNode()?e(n.ul).empty():(e(n.ul).remove(),n.ul=null),n.visit((function(e){e.li=e.ul=null})))},nodeRemoveChildren:function(e){var t=e.tree,n=e.node;n.children&&(this.activeNode&&this.activeNode.isDescendantOf(n)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(n)&&(this.focusNode=null),this.nodeRemoveChildMarkup(e),n.triggerModifyChild("remove",null),n.visit((function(e){e.parent=null,t._callHook("treeRegisterNode",t,!1,e)})),n.lazy?n.children=[]:n.children=null,n.isRootNode()||(n.expanded=!1),this.nodeRenderStatus(e))},nodeRemoveMarkup:function(t){var n=t.node;n.li&&(e(n.li).remove(),n.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(t,n,r,o,l){var d,c,f,i,h,y,v,m=t.node,x=t.tree,k=t.options,w=k.aria,_=!1,C=m.parent,N=!C,S=m.children,A=null;if(!1!==x._enableUpdate&&(N||C.ul)){if(E(N||C.ul,"parent UL must exist"),N||(m.li&&(n||m.li.parentNode!==m.parent.ul)&&(m.li.parentNode===m.parent.ul?A=m.li.nextSibling:this.debug("Unlinking "+m+" (must be child of "+m.parent+")"),this.nodeRemoveMarkup(t)),m.li?this.nodeRenderStatus(t):(_=!0,m.li=document.createElement("li"),m.li.ftnode=m,m.key&&k.generateIds&&(m.li.id=k.idPrefix+m.key),m.span=document.createElement("span"),m.span.className="fancytree-node",w&&!m.tr&&e(m.li).attr("role","treeitem"),m.li.appendChild(m.span),this.nodeRenderTitle(t),k.createNode&&k.createNode.call(x,{type:"createNode"},t)),k.renderNode&&k.renderNode.call(x,{type:"renderNode"},t)),S){if(N||m.expanded||!0===r){for(m.ul||(m.ul=document.createElement("ul"),(!0!==o||l)&&m.expanded||(m.ul.style.display="none"),w&&e(m.ul).attr("role","group"),m.li?m.li.appendChild(m.ul):m.tree.$div.append(m.ul)),i=0,h=S.length;i<h;i++)v=e.extend({},t,{node:S[i]}),this.nodeRender(v,n,r,!1,!0);for(d=m.ul.firstChild;d;)(f=d.ftnode)&&f.parent!==m?(m.debug("_fixParent: remove missing "+f,d),y=d.nextSibling,d.parentNode.removeChild(d),d=y):d=d.nextSibling;for(d=m.ul.firstChild,i=0,h=S.length-1;i<h;i++)(c=S[i])===(f=d.ftnode)?d=d.nextSibling:m.ul.insertBefore(c.li,f.li)}}else m.ul&&(this.warn("remove child markup for "+m),this.nodeRemoveChildMarkup(t));N||_&&C.ul.insertBefore(m.li,A)}},nodeRenderTitle:function(t,title){var o,l,d,c,f,h,y,v=t.node,m=t.tree,x=t.options,k=x.aria,w=v.getLevel(),_=[];void 0!==title&&(v.title=title),v.span&&!1!==m._enableUpdate&&(f=k&&!1!==v.hasChildren()?" role='button'":"",w<x.minExpandLevel?(v.lazy||(v.expanded=!0),w>1&&_.push("<span "+f+" class='fancytree-expander fancytree-expander-fixed'></span>")):_.push("<span "+f+" class='fancytree-expander'></span>"),(o=n.evalOption("checkbox",v,v,x,!1))&&!v.isStatusNode()&&(f=k?" role='checkbox'":"",l="fancytree-checkbox",("radio"===o||v.parent&&v.parent.radiogroup)&&(l+=" fancytree-radio"),_.push("<span "+f+" class='"+l+"'></span>")),void 0!==v.data.iconClass&&(v.icon?e.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(v.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),v.icon=v.data.iconClass)),!1!==(d=n.evalOption("icon",v,v,x,!0))&&(f=k?" role='presentation'":"",y=(y=n.evalOption("iconTooltip",v,v,x,null))?" title='"+$(y)+"'":"","string"==typeof d?r.test(d)?(d="/"===d.charAt(0)?d:(x.imagePath||"")+d,_.push("<img src='"+d+"' class='fancytree-icon'"+y+" alt='' />")):_.push("<span "+f+" class='fancytree-custom-icon "+d+"'"+y+"></span>"):d.text?_.push("<span "+f+" class='fancytree-custom-icon "+(d.addClass||"")+"'"+y+">"+n.escapeHtml(d.text)+"</span>"):d.html?_.push("<span "+f+" class='fancytree-custom-icon "+(d.addClass||"")+"'"+y+">"+d.html+"</span>"):_.push("<span "+f+" class='fancytree-icon'"+y+"></span>")),c="",x.renderTitle&&(c=x.renderTitle.call(m,{type:"renderTitle"},t)||""),c||(!0===(h=n.evalOption("tooltip",v,v,x,null))&&(h=v.title),c="<span class='fancytree-title'"+(h=h?" title='"+$(h)+"'":"")+(x.titlesTabbable?" tabindex='0'":"")+">"+(x.escapeTitles?n.escapeHtml(v.title):v.title)+"</span>"),_.push(c),v.span.innerHTML=_.join(""),this.nodeRenderStatus(t),x.enhanceTitle&&(t.$title=e(">span.fancytree-title",v.span),c=x.enhanceTitle.call(m,{type:"enhanceTitle"},t)||""))},nodeRenderStatus:function(t){var r,o=t.node,l=t.tree,d=t.options,c=o.hasChildren(),f=o.isLastSibling(),h=d.aria,y=d._classNames,v=[],m=o[l.statusClassPropName];m&&!1!==l._enableUpdate&&(h&&(r=e(o.tr||o.li)),v.push(y.node),l.activeNode===o&&v.push(y.active),l.focusNode===o&&v.push(y.focused),o.expanded&&v.push(y.expanded),h&&(!1===c?r.removeAttr("aria-expanded"):r.attr("aria-expanded",Boolean(o.expanded))),o.folder&&v.push(y.folder),!1!==c&&v.push(y.hasChildren),f&&v.push(y.lastsib),o.lazy&&null==o.children&&v.push(y.lazy),o.partload&&v.push(y.partload),o.partsel&&v.push(y.partsel),n.evalOption("unselectable",o,o,d,!1)&&v.push(y.unselectable),o._isLoading&&v.push(y.loading),o._error&&v.push(y.error),o.statusNodeType&&v.push(y.statusNodePrefix+o.statusNodeType),o.selected?(v.push(y.selected),h&&r.attr("aria-selected",!0)):h&&r.attr("aria-selected",!1),o.extraClasses&&v.push(o.extraClasses),!1===c?v.push(y.combinedExpanderPrefix+"n"+(f?"l":"")):v.push(y.combinedExpanderPrefix+(o.expanded?"e":"c")+(o.lazy&&null==o.children?"d":"")+(f?"l":"")),v.push(y.combinedIconPrefix+(o.expanded?"e":"c")+(o.folder?"f":"")),m.className=v.join(" "),o.li&&e(o.li).toggleClass(y.lastsib,f))},nodeSetActive:function(t,n,r){r=r||{};var o,l=t.node,d=t.tree,c=t.options,f=!0===r.noEvents,h=!0===r.noFocus,y=!1!==r.scrollIntoView;return l===d.activeNode==(n=!1!==n)?F(l):(y&&t.originalEvent&&e(t.originalEvent.target).is("a,:checkbox")&&(l.info("Not scrolling while clicking an embedded link."),y=!1),n&&!f&&!1===this._triggerNodeEvent("beforeActivate",l,t.originalEvent)?W(l,["rejected"]):(n?(d.activeNode&&(E(d.activeNode!==l,"node was active (inconsistency)"),o=e.extend({},t,{node:d.activeNode}),d.nodeSetActive(o,!1),E(null===d.activeNode,"deactivate was out of sync?")),c.activeVisible&&l.makeVisible({scrollIntoView:y}),d.activeNode=l,d.nodeRenderStatus(t),h||d.nodeSetFocus(t),f||d._triggerNodeEvent("activate",l,t.originalEvent)):(E(d.activeNode===l,"node was not active (inconsistency)"),d.activeNode=null,this.nodeRenderStatus(t),f||t.tree._triggerNodeEvent("deactivate",l,t.originalEvent)),F(l)))},nodeSetExpanded:function(t,n,r){r=r||{};var o,l,i,d,c,f,h=t.node,y=t.tree,v=t.options,m=!0===r.noAnimation,x=!0===r.noEvents;if(n=!1!==n,e(h.li).hasClass(v._classNames.animating))return h.warn("setExpanded("+n+") while animating: ignored."),W(h,["recursion"]);if(h.expanded&&n||!h.expanded&&!n)return F(h);if(n&&!h.lazy&&!h.hasChildren())return F(h);if(!n&&h.getLevel()<v.minExpandLevel)return W(h,["locked"]);if(!x&&!1===this._triggerNodeEvent("beforeExpand",h,t.originalEvent))return W(h,["rejected"]);if(m||h.isVisible()||(m=r.noAnimation=!0),l=new e.Deferred,n&&!h.expanded&&v.autoCollapse){c=h.getParentList(!1,!0),f=v.autoCollapse;try{for(v.autoCollapse=!1,i=0,d=c.length;i<d;i++)this._callHook("nodeCollapseSiblings",c[i],r)}finally{v.autoCollapse=f}}return l.done((function(){var e=h.getLastChild();n&&v.autoScroll&&!m&&e&&y._enableUpdate?e.scrollIntoView(!0,{topNode:h}).always((function(){x||t.tree._triggerNodeEvent(n?"expand":"collapse",t)})):x||t.tree._triggerNodeEvent(n?"expand":"collapse",t)})),o=function(r){var o=v._classNames,l=v.toggleEffect;if(h.expanded=n,y._callHook("treeStructureChanged",t,n?"expand":"collapse"),y._callHook("nodeRender",t,!1,!1,!0),h.ul)if("none"!==h.ul.style.display==!!h.expanded)h.warn("nodeSetExpanded: UL.style.display already set");else{if(l&&!m)return e(h.li).addClass(o.animating),void(D(e(h.ul)[l.effect])?e(h.ul)[l.effect]({duration:l.duration,always:function(){e(this).removeClass(o.animating),e(h.li).removeClass(o.animating),r()}}):(e(h.ul).stop(!0,!0),e(h.ul).parent().find(".ui-effects-placeholder").remove(),e(h.ul).toggle(l.effect,l.options,l.duration,(function(){e(this).removeClass(o.animating),e(h.li).removeClass(o.animating),r()}))));h.ul.style.display=h.expanded||!parent?"":"none"}r()},n&&h.lazy&&void 0===h.hasChildren()?h.load().done((function(){l.notifyWith&&l.notifyWith(h,["loaded"]),o((function(){l.resolveWith(h)}))})).fail((function(e){o((function(){l.rejectWith(h,["load failed ("+e+")"])}))})):o((function(){l.resolveWith(h)})),l.promise()},nodeSetFocus:function(t,n){var r,o=t.tree,l=t.node,d=o.options,c=!!t.originalEvent&&e(t.originalEvent.target).is(":input");if(n=!1!==n,o.focusNode){if(o.focusNode===l&&n)return;r=e.extend({},t,{node:o.focusNode}),o.focusNode=null,this._triggerNodeEvent("blur",r),this._callHook("nodeRenderStatus",r)}n&&(this.hasFocus()||(l.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,{calledByNode:!0})),l.makeVisible({scrollIntoView:!1}),o.focusNode=l,d.titlesTabbable&&(c||e(l.span).find(".fancytree-title").focus()),d.aria&&e(o.$container).attr("aria-activedescendant",e(l.tr||l.li).uniqueId().attr("id")),this._triggerNodeEvent("focus",t),document.activeElement===o.$container.get(0)||e(document.activeElement,o.$container).length>=1||e(o.$container).focus(),d.autoScroll&&l.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(e,t,r){r=r||{};var o=e.node,l=e.tree,d=e.options,c=!0===r.noEvents,f=o.parent;if(t=!1!==t,!n.evalOption("unselectable",o,o,d,!1)){if(o._lastSelectIntent=t,!!o.selected===t&&(3!==d.selectMode||!o.partsel||t))return t;if(!c&&!1===this._triggerNodeEvent("beforeSelect",o,e.originalEvent))return!!o.selected;t&&1===d.selectMode?(l.lastSelectedNode&&l.lastSelectedNode.setSelected(!1),o.selected=t):3!==d.selectMode||!f||f.radiogroup||o.radiogroup?f&&f.radiogroup?o.visitSiblings((function(e){e._changeSelectStatusAttrs(t&&e===o)}),!0):o.selected=t:(o.selected=t,o.fixSelection3AfterClick(r)),this.nodeRenderStatus(e),l.lastSelectedNode=t?o:null,c||l._triggerNodeEvent("select",e)}},nodeSetStatus:function(t,n,r,details){var o=t.node,l=t.tree;function d(){var e=o.children?o.children[0]:null;if(e&&e.isStatusNode()){try{o.ul&&(o.ul.removeChild(e.li),e.li=null)}catch(e){}1===o.children.length?o.children=[]:o.children.shift(),l._callHook("treeStructureChanged",t,"clearStatusNode")}}function c(data,n){var r=o.children?o.children[0]:null;return r&&r.isStatusNode()?(e.extend(r,data),r.statusNodeType=n,l._callHook("nodeRenderTitle",r)):(o._setChildren([data]),l._callHook("treeStructureChanged",t,"setStatusNode"),o.children[0].statusNodeType=n,l.render()),o.children[0]}switch(n){case"ok":d(),o._isLoading=!1,o._error=null,o.renderStatus();break;case"loading":o.parent||c({title:l.options.strings.loading+(r?" ("+r+")":""),checkbox:!1,tooltip:details},n),o._isLoading=!0,o._error=null,o.renderStatus();break;case"error":c({title:l.options.strings.loadError+(r?" ("+r+")":""),checkbox:!1,tooltip:details},n),o._isLoading=!1,o._error={message:r,details:details},o.renderStatus();break;case"nodata":c({title:r||l.options.strings.noData,checkbox:!1,tooltip:details},n),o._isLoading=!1,o._error=null,o.renderStatus();break;default:e.error("invalid node status "+n)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){var t=e.node,n=!t.selected;return t.partsel&&!t.selected&&!0===t._lastSelectIntent&&(n=!1,t.selected=!0),t._lastSelectIntent=n,this.nodeSetSelected(e,n)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null,t._callHook("treeStructureChanged",e,"clear")},treeCreate:function(e){},treeDestroy:function(e){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("fancytree-helper-hidden")},treeInit:function(t){var n=t.tree,r=n.options;n.$container.attr("tabindex",r.tabindex),e.each(w,(function(i,e){void 0!==r[e]&&(n.info("Move option "+e+" to tree"),n[e]=r[e],delete r[e])})),r.checkboxAutoHide&&n.$container.addClass("fancytree-checkbox-auto-hide"),r.rtl?n.$container.attr("DIR","RTL").addClass("fancytree-rtl"):n.$container.removeAttr("DIR").removeClass("fancytree-rtl"),r.aria&&(n.$container.attr("role","tree"),1!==r.selectMode&&n.$container.attr("aria-multiselectable",!0)),this.treeLoad(t)},treeLoad:function(t,source){var r,o,l,d=t.tree,c=t.widget.element,f=e.extend({},t,{node:this.rootNode});if(d.rootNode.children&&this.treeClear(t),source=source||this.options.source)"string"==typeof source&&e.error("Not implemented");else switch(o=c.data("type")||"html"){case"html":(l=c.find(">ul").not(".fancytree-container").first()).length?(l.addClass("ui-fancytree-source fancytree-helper-hidden"),source=e.ui.fancytree.parseHtml(l),this.data=e.extend(this.data,j(l))):(n.warn("No `source` option was passed and container does not contain `<ul>`: assuming `source: []`."),source=[]);break;case"json":source=e.parseJSON(c.text()),c.contents().filter((function(){return 3===this.nodeType})).remove(),e.isPlainObject(source)&&(E(A(source.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),r=source,source=source.children,delete r.children,e.each(w,(function(i,e){void 0!==r[e]&&(d[e]=r[e],delete r[e])})),e.extend(d.data,r));break;default:e.error("Invalid data-type: "+o)}return d._triggerTreeEvent("preInit",null),this.nodeLoadChildren(f,source).done((function(){d._callHook("treeStructureChanged",t,"loadChildren"),d.render(),3===t.options.selectMode&&d.rootNode.fixSelection3FromEndNodes(),d.activeNode&&d.options.activeVisible&&d.activeNode.makeVisible(),d._triggerTreeEvent("init",null,{status:!0})})).fail((function(){d.render(),d._triggerTreeEvent("init",null,{status:!1})}))},treeRegisterNode:function(e,t,n){e.tree._callHook("treeStructureChanged",e,t?"addNode":"removeNode")},treeSetFocus:function(t,n,r){var o;(n=!1!==n)!==this.hasFocus()&&(this._hasFocus=n,!n&&this.focusNode?this.focusNode.setFocus(!1):!n||r&&r.calledByNode||e(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",n),this._triggerTreeEvent(n?"focusTree":"blurTree"),n&&!this.activeNode&&(o=this._lastMousedownNode||this.getFirstChild())&&o.setFocus())},treeSetOption:function(t,n,r){var o=t.tree,l=!0,d=!1,c=!1;switch(n){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":d=!0,c=!0;break;case"checkboxAutoHide":o.$container.toggleClass("fancytree-checkbox-auto-hide",!!r);break;case"escapeTitles":case"tooltip":c=!0;break;case"rtl":!1===r?o.$container.removeAttr("DIR").removeClass("fancytree-rtl"):o.$container.attr("DIR","RTL").addClass("fancytree-rtl"),c=!0;break;case"source":l=!1,o._callHook("treeLoad",o,r),c=!0}o.debug("set option "+n+"="+r+" <"+typeof r+">"),l&&(this.widget._super?this.widget._super.call(this.widget,n,r):e.Widget.prototype._setOption.call(this.widget,n,r)),d&&o._callHook("treeCreate",o),c&&o.render(!0,!1)},treeStructureChanged:function(e,t){}}),e.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!0,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,copyFunctionsToData:!1,debugLevel:null,disabled:!1,enableAspx:42,escapeTitles:!1,extensions:[],focusOnSelect:!1,generateIds:!1,icon:!0,idPrefix:"ft_",keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,nodata:!0,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading...",loadError:"Load error!",moreData:"More...",noData:"No data."},tabindex:"0",titlesTabbable:!1,toggleEffect:{effect:"slideToggle",duration:200},tooltip:!1,treeId:null,_classNames:{active:"fancytree-active",animating:"fancytree-animating",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",error:"fancytree-error",expanded:"fancytree-expanded",focused:"fancytree-focused",folder:"fancytree-folder",hasChildren:"fancytree-has-children",lastsib:"fancytree-lastsib",lazy:"fancytree-lazy",loading:"fancytree-loading",node:"fancytree-node",partload:"fancytree-partload",partsel:"fancytree-partsel",radio:"fancytree-radio",selected:"fancytree-selected",statusNodePrefix:"fancytree-statusnode-",unselectable:"fancytree-unselectable"},lazyLoad:null,postProcess:null},_deprecationWarning:function(e){var t=this.tree;t&&t.options.debugLevel>=3&&t.warn("$().fancytree('"+e+"') is deprecated (see https://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree_Widget.html")},_create:function(){this.tree=new B(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul").first();var t,n,i,r=this.options,o=r.extensions,base=this.tree;for(i=0;i<o.length;i++)n=o[i],(t=e.ui.fancytree._extensions[n])||e.error("Could not apply extension '"+n+"' (it is not registered, did you forget to include it?)"),this.tree.options[n]=I({},t.options,this.tree.options[n]),E(void 0===this.tree.ext[n],"Extension name must not exist as Fancytree.ext attribute: '"+n+"'"),this.tree.ext[n]={},M(this.tree,base,t,n),base=t;void 0!==r.icons&&(!0===r.icon?(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),r.icon=r.icons):e.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead")),void 0!==r.iconClass&&(r.icon?e.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),r.icon=r.iconClass)),void 0!==r.tabbable&&(r.tabindex=r.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+r.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(e,t){return this.tree._callHook("treeSetOption",this.tree,e,t)},_destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree)},_unbind:function(){var t=this.tree._ns;this.element.off(t),this.tree.$container.off(t),e(document).off(t)},_bind:function(){var t=this,r=this.options,o=this.tree,l=o._ns;this._unbind(),o.$container.on("focusin"+l+" focusout"+l,(function(t){var r=n.getNode(t),l="focusin"===t.type;if(!l&&r&&e(t.target).is("a"))r.debug("Ignored focusout on embedded <a> element.");else{if(l){if(o._getExpiringValue("focusin"))return void o.debug("Ignored double focusin.");o._setExpiringValue("focusin",!0,50),r||(r=o._getExpiringValue("mouseDownNode"))&&o.debug("Reconstruct mouse target for focusin from recent event.")}r?o._callHook("nodeSetFocus",o._makeHookContext(r,t),l):o.tbody&&e(t.target).parents("table.fancytree-container > thead").length?o.debug("Ignore focus event outside table body.",t):o._callHook("treeSetFocus",o,l)}})).on("selectstart"+l,"span.fancytree-title",(function(e){e.preventDefault()})).on("keydown"+l,(function(e){if(r.disabled||!1===r.keyboard)return!0;var t,n=o.focusNode,l=o._makeHookContext(n||o,e),d=o.phase;try{return o.phase="userEvent","preventNav"===(t=n?o._triggerNodeEvent("keydown",n,e):o._triggerTreeEvent("keydown",e))?t=!0:!1!==t&&(t=o._callHook("nodeKeydown",l)),t}finally{o.phase=d}})).on("mousedown"+l,(function(e){var t=n.getEventTarget(e);o._lastMousedownNode=t?t.node:null,o._setExpiringValue("mouseDownNode",o._lastMousedownNode)})).on("click"+l+" dblclick"+l,(function(e){if(r.disabled)return!0;var o,l=n.getEventTarget(e),d=l.node,c=t.tree,f=c.phase;if(!d)return!0;o=c._makeHookContext(d,e);try{switch(c.phase="userEvent",e.type){case"click":return o.targetType=l.type,d.isPagingNode()?!0===c._triggerNodeEvent("clickPaging",o,e):!1!==c._triggerNodeEvent("click",o,e)&&c._callHook("nodeClick",o);case"dblclick":return o.targetType=l.type,!1!==c._triggerNodeEvent("dblclick",o,e)&&c._callHook("nodeDblclick",o)}}finally{c.phase=f}}))},getActiveNode:function(){return this._deprecationWarning("getActiveNode"),this.tree.activeNode},getNodeByKey:function(e){return this._deprecationWarning("getNodeByKey"),this.tree.getNodeByKey(e)},getRootNode:function(){return this._deprecationWarning("getRootNode"),this.tree.rootNode},getTree:function(){return this._deprecationWarning("getTree"),this.tree}}),n=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"2.38.2",buildType:"production",debugLevel:3,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:B,_FancytreeNodeClass:V,jquerySupports:{positionMyOfs:H(e.ui.version,1,9)},assert:function(e,t){return E(e,t)},createTree:function(t,r){var o=e(t).fancytree(r);return n.getTree(o)},debounce:function(e,t,n,r){var o;return 3===arguments.length&&"boolean"!=typeof n&&(r=n,n=!1),function(){var l=arguments;r=r||this,n&&!o&&t.apply(r,l),clearTimeout(o),o=setTimeout((function(){n||t.apply(r,l),o=null}),e)}},debug:function(t){e.ui.fancytree.debugLevel>=4&&P("log",arguments)},error:function(t){e.ui.fancytree.debugLevel>=1&&P("error",arguments)},escapeHtml:function(s){return(""+s).replace(o,(function(s){return f[s]}))},fixPositionOptions:function(t){if((t.offset||(""+t.my+t.at).indexOf("%")>=0)&&e.error("expected new position syntax (but '%' is not supported)"),!e.ui.fancytree.jquerySupports.positionMyOfs){var n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),r=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),o=(n[2]?+n[2]:0)+(r[2]?+r[2]:0),l=(n[4]?+n[4]:0)+(r[4]?+r[4]:0);t=e.extend({},t,{my:n[1]+" "+n[3],at:r[1]+" "+r[3]}),(o||l)&&(t.offset=o+" "+l)}return t},getEventTarget:function(t){var r,o=t&&t.target?t.target.className:"",l={node:this.getNode(t.target),type:void 0};return/\bfancytree-title\b/.test(o)?l.type="title":/\bfancytree-expander\b/.test(o)?l.type=!1===l.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(o)?l.type="checkbox":/\bfancytree(-custom)?-icon\b/.test(o)?l.type="icon":/\bfancytree-node\b/.test(o)?l.type="title":t&&t.target&&((r=e(t.target)).is("ul[role=group]")?((l.node&&l.node.tree||n).debug("Ignoring click on outer UL."),l.node=null):r.closest(".fancytree-title").length?l.type="title":r.closest(".fancytree-checkbox").length?l.type="checkbox":r.closest(".fancytree-expander").length&&(l.type="expander")),l},getEventTargetType:function(e){return this.getEventTarget(e).type},getNode:function(t){if(t instanceof V)return t;for(t instanceof e?t=t[0]:void 0!==t.originalEvent&&(t=t.target);t;){if(t.ftnode)return t.ftnode;t=t.parentNode}return null},getTree:function(t){var n,r=t;return t instanceof B?t:(void 0===t&&(t=0),"number"==typeof t?t=e(".fancytree-container").eq(t):"string"==typeof t?(t=e("#ft-id-"+r).eq(0)).length||(t=e(r).eq(0)):t instanceof Element||t instanceof HTMLDocument?t=e(t):t instanceof e?t=t.eq(0):void 0!==t.originalEvent&&(t=e(t.target)),(n=(t=t.closest(":ui-fancytree")).data("ui-fancytree")||t.data("fancytree"))?n.tree:null)},evalOption:function(e,t,n,r,o){var l,d,c=t.tree,f=r[e],h=n[e];return D(f)?(l={node:t,tree:c,widget:c.widget,options:c.widget.options,typeInfo:c.types[t.type]||{}},null==(d=f.call(c,{type:e},l))&&(d=h)):d=null==h?f:h,null==d&&(d=o),d},setSpanIcon:function(span,t,n){var r=e(span);"string"==typeof n?r.attr("class",t+" "+n):(n.text?r.text(""+n.text):n.html&&(span.innerHTML=n.html),r.attr("class",t+" "+(n.addClass||"")))},eventToString:function(e){var t=e.which,n=e.type,s=[];return e.altKey&&s.push("alt"),e.ctrlKey&&s.push("ctrl"),e.metaKey&&s.push("meta"),e.shiftKey&&s.push("shift"),"click"===n||"dblclick"===n?s.push(m[e.button]+n):"wheel"===n?s.push(n):h[t]||s.push(y[t]||String.fromCharCode(t).toLowerCase()),s.join("+")},info:function(t){e.ui.fancytree.debugLevel>=3&&P("info",arguments)},keyEventToString:function(e){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(e)},overrideMethod:function(t,n,r,o){var l,d=t[n]||e.noop;t[n]=function(){var e=o||this;try{return l=e._super,e._super=d,r.apply(e,arguments)}finally{e._super=l}}},parseHtml:function(t){var n,r,o,i,l,d,c,f,h=t.find(">li"),y=[];return h.each((function(){var h,v,m=e(this),w=m.find(">span",this).first(),C=w.length?null:m.find(">a").first(),S={tooltip:null,data:{}};for(w.length?S.title=w.html():C&&C.length?(S.title=C.html(),S.data.href=C.attr("href"),S.data.target=C.attr("target"),S.tooltip=C.attr("title")):(S.title=m.html(),(l=S.title.search(/<ul/i))>=0&&(S.title=S.title.substring(0,l))),S.title=L(S.title),i=0,d=x.length;i<d;i++)S[x[i]]=void 0;for(n=this.className.split(" "),o=[],i=0,d=n.length;i<d;i++)r=n[i],k[r]?S[r]=!0:o.push(r);if(S.extraClasses=o.join(" "),(c=m.attr("title"))&&(S.tooltip=c),(c=m.attr("id"))&&(S.key=c),m.attr("hideCheckbox")&&(S.checkbox=!1),(h=j(m))&&!e.isEmptyObject(h)){for(v in N)T(h,v)&&(h[N[v]]=h[v],delete h[v]);for(i=0,d=_.length;i<d;i++)c=_[i],null!=(f=h[c])&&(delete h[c],S[c]=f);e.extend(S.data,h)}(t=m.find(">ul").first()).length?S.children=e.ui.fancytree.parseHtml(t):S.children=S.lazy?void 0:null,y.push(S)})),y},registerExtension:function(t){E(null!=t.name,"extensions must have a `name` property."),E(null!=t.version,"extensions must have a `version` property."),e.ui.fancytree._extensions[t.name]=t},trim:L,unescapeHtml:function(s){var e=document.createElement("div");return e.innerHTML=s,0===e.childNodes.length?"":e.childNodes[0].nodeValue},warn:function(t){e.ui.fancytree.debugLevel>=2&&P("warn",arguments)}}),e.ui.fancytree}function E(t,n){t||(n="Fancytree assertion failed"+(n=n?": "+n:""),e.ui.fancytree.error(n),e.error(n))}function T(object,e){return Object.prototype.hasOwnProperty.call(object,e)}function D(e){return"function"==typeof e}function L(text){return null==text?"":text.trim()}function P(e,t){var i,s,n=window.console?window.console[e]:null;if(n)try{n.apply(window.console,t)}catch(e){for(s="",i=0;i<t.length;i++)s+=t[i];n(s)}}function O(e){return!(!e.tree||void 0===e.statusNodeType)}function H(t,n,r,o){var i,l,d,c=e.map(L(t).split("."),(function(e){return parseInt(e,10)})),f=e.map(Array.prototype.slice.call(arguments,1),(function(e){return parseInt(e,10)}));for(i=0;i<f.length;i++)if((l=c[i]||0)!==(d=f[i]||0))return l>d;return!0}function I(){var t,n,r,o,l,d=arguments[0]||{},i=1,c=arguments.length;if("object"==typeof d||D(d)||(d={}),i===c)throw Error("need at least two args");for(;i<c;i++)if(null!=(t=arguments[i]))for(n in t)if(T(t,n)){if(r=d[n],d===(o=t[n]))continue;o&&e.isPlainObject(o)?(l=r&&e.isPlainObject(r)?r:{},d[n]=I(l,o)):void 0!==o&&(d[n]=o)}return d}function R(e,t,base,n,r){var o,l,d,c,f,h=(o=t[e],l=n[e],d=t.ext[r],c=function(){return o.apply(t,arguments)},f=function(e){return o.apply(t,e)},function(){var e=t._local,n=t._super,r=t._superApply;try{return t._local=d,t._super=c,t._superApply=f,l.apply(t,arguments)}finally{t._local=e,t._super=n,t._superApply=r}});return h}function M(t,base,n,r){for(var o in n)"function"==typeof n[o]?"function"==typeof t[o]?t[o]=R(o,t,base,n,r):"_"===o.charAt(0)?t.ext[r][o]=R(o,t,base,n,r):e.error("Could not override tree."+o+". Use prefix '_' to create tree."+r+"._"+o):"options"!==o&&(t.ext[r][o]=n[o])}function F(t,n){return void 0===t?e.Deferred((function(){this.resolve()})).promise():e.Deferred((function(){this.resolveWith(t,n)})).promise()}function W(t,n){return void 0===t?e.Deferred((function(){this.reject()})).promise():e.Deferred((function(){this.rejectWith(t,n)})).promise()}function z(e,t){return function(){e.resolveWith(t)}}function j(t){var n=e.extend({},t.data()),r=n.json;return delete n.fancytree,delete n.uiFancytree,r&&(delete n.json,n=e.extend(n,r)),n}function $(s){return(""+s).replace(l,(function(s){return f[s]}))}function K(s){return s=s.toLowerCase(),function(e){return e.title.toLowerCase().indexOf(s)>=0}}function U(s){var e=new RegExp("^"+s,"i");return function(t){return e.test(t.title)}}function V(t,r){var i,o,l,d;for(this.parent=t,this.tree=t.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},i=0,o=_.length;i<o;i++)this[l=_[i]]=r[l];for(l in null==this.unselectableIgnore&&null==this.unselectableStatus||(this.unselectable=!0),r.hideCheckbox&&e.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'"),r.data&&e.extend(this.data,r.data),r)C[l]||!this.tree.options.copyFunctionsToData&&D(r[l])||S[l]||(this.data[l]=r[l]);null==this.key?this.tree.options.defaultKey?(this.key=""+this.tree.options.defaultKey(this),E(this.key,"defaultKey() must return a unique key")):this.key="_"+n._nextNodeKey++:this.key=""+this.key,r.active&&(E(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),r.selected&&(this.tree.lastSelectedNode=this),(d=r.children)?d.length?this._setChildren(d):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function B(t){this.widget=t,this.$div=t.element,this.options=t.options,this.options&&(void 0!==this.options.lazyload&&e.error("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),void 0!==this.options.loaderror&&e.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),void 0!==this.options.fx&&e.error("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),void 0!==this.options.removeNode&&e.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.types={},this.columns={},this.data=j(this.$div),this._id=""+(this.options.treeId||e.ui.fancytree._nextId++),this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._tempCache={},this._lastMousedownNode=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.viewport=null,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var r,o={tree:this};this.rootNode=new V(o,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,r=e("<ul>",{id:"ft-id-"+this._id,class:"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=r,this.rootNode.ul=r[0],null==this.options.debugLevel&&(this.options.debugLevel=n.debugLevel)}e.ui.fancytree.warn("Fancytree: ignored duplicate include")},void 0===(l="function"==typeof r?r.apply(t,o):r)||(e.exports=l)}}]);