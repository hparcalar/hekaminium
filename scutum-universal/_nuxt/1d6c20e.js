/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1604:function(t,e,n){"use strict";n.r(e),n.d(e,"scaleBand",(function(){return h})),n.d(e,"scalePoint",(function(){return x})),n.d(e,"scaleIdentity",(function(){return Qt})),n.d(e,"scaleLinear",(function(){return Jt})),n.d(e,"scaleLog",(function(){return se})),n.d(e,"scaleSymlog",(function(){return de})),n.d(e,"scaleOrdinal",(function(){return d})),n.d(e,"scaleImplicit",(function(){return l})),n.d(e,"scalePow",(function(){return xe})),n.d(e,"scaleSqrt",(function(){return ve})),n.d(e,"scaleRadial",(function(){return me})),n.d(e,"scaleQuantile",(function(){return Me})),n.d(e,"scaleQuantize",(function(){return Ce})),n.d(e,"scaleThreshold",(function(){return Oe})),n.d(e,"scaleTime",(function(){return time})),n.d(e,"scaleUtc",(function(){return or})),n.d(e,"scaleSequential",(function(){return ur})),n.d(e,"scaleSequentialLog",(function(){return lr})),n.d(e,"scaleSequentialPow",(function(){return fr})),n.d(e,"scaleSequentialSqrt",(function(){return gr})),n.d(e,"scaleSequentialSymlog",(function(){return dr})),n.d(e,"scaleSequentialQuantile",(function(){return pr})),n.d(e,"scaleDiverging",(function(){return _r})),n.d(e,"scaleDivergingLog",(function(){return yr})),n.d(e,"scaleDivergingPow",(function(){return Tr})),n.d(e,"scaleDivergingSqrt",(function(){return wr})),n.d(e,"scaleDivergingSymlog",(function(){return mr})),n.d(e,"tickFormat",(function(){return Zt}));var r=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o};function o(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function c(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const l=Symbol("implicit");function d(){var t=new Map,e=[],n=[],r=l;function c(o){var c=o+"",i=t.get(c);if(!i){if(r!==l)return r;t.set(c,i=e.push(o))}return n[(i-1)%n.length]}return c.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return c},c.range=function(t){return arguments.length?(n=Array.from(t),c):n.slice()},c.unknown=function(t){return arguments.length?(r=t,c):r},c.copy=function(){return d(e,n).unknown(r)},o.apply(c,arguments),c}function h(){var t,e,n=d().unknown(void 0),c=n.domain,l=n.range,f=0,x=1,v=!1,_=0,y=0,m=.5;function T(){var n=c().length,o=x<f,d=o?x:f,h=o?f:x;t=(h-d)/Math.max(1,n-_+2*y),v&&(t=Math.floor(t)),d+=(h-d-t*(n-_))*m,e=t*(1-_),v&&(d=Math.round(d),e=Math.round(e));var T=r(n).map((function(i){return d+t*i}));return l(o?T.reverse():T)}return delete n.unknown,n.domain=function(t){return arguments.length?(c(t),T()):c()},n.range=function(t){return arguments.length?([f,x]=t,f=+f,x=+x,T()):[f,x]},n.rangeRound=function(t){return[f,x]=t,f=+f,x=+x,v=!0,T()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(v=!!t,T()):v},n.padding=function(t){return arguments.length?(_=Math.min(1,y=+t),T()):_},n.paddingInner=function(t){return arguments.length?(_=Math.min(1,t),T()):_},n.paddingOuter=function(t){return arguments.length?(y=+t,T()):y},n.align=function(t){return arguments.length?(m=Math.max(0,Math.min(1,t)),T()):m},n.copy=function(){return h(c(),[f,x]).round(v).paddingInner(_).paddingOuter(y).align(m)},o.apply(T(),arguments)}function f(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return f(e())},t}function x(){return f(h.apply(null,arguments).paddingInner(1))}var v=Math.sqrt(50),_=Math.sqrt(10),y=Math.sqrt(2),m=function(t,e,n){var r,o,c,l,i=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(l=T(t,e,n))||!isFinite(l))return[];if(l>0){let n=Math.round(t/l),r=Math.round(e/l);for(n*l<t&&++n,r*l>e&&--r,c=new Array(o=r-n+1);++i<o;)c[i]=(n+i)*l}else{l=-l;let n=Math.round(t*l),r=Math.round(e*l);for(n/l<t&&++n,r/l>e&&--r,c=new Array(o=r-n+1);++i<o;)c[i]=(n+i)/l}return r&&c.reverse(),c};function T(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),c=r/Math.pow(10,o);return o>=0?(c>=v?10:c>=_?5:c>=y?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(c>=v?10:c>=_?5:c>=y?2:1)}function w(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),c=r/o;return c>=v?o*=10:c>=_?o*=5:c>=y&&(o*=2),e<t?-o:o}var A=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},k=function(t){let e=t,n=t;function r(a,t,e,r){for(null==e&&(e=0),null==r&&(r=a.length);e<r;){const o=e+r>>>1;n(a[o],t)<0?e=o+1:r=o}return e}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>A(t(e),n)}(t)),{left:r,center:function(a,t,n,o){null==n&&(n=0),null==o&&(o=a.length);const i=r(a,t,n,o-1);return i>n&&e(a[i-1],t)>-e(a[i],t)?i-1:i},right:function(a,t,e,r){for(null==e&&(e=0),null==r&&(r=a.length);e<r;){const o=e+r>>>1;n(a[o],t)>0?r=o:e=o+1}return e}}};var S=function(t){return null===t?NaN:+t};const M=k(A),C=M.right;M.left,k(S).center;var O=C,L=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function D(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function F(){}var R=.7,E=1/R,X="\\s*([+-]?\\d+)\\s*",I="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",z="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",N=/^#([0-9a-f]{3,8})$/,P=new RegExp("^rgb\\("+[X,X,X]+"\\)$"),B=new RegExp("^rgb\\("+[z,z,z]+"\\)$"),Y=new RegExp("^rgba\\("+[X,X,X,I]+"\\)$"),j=new RegExp("^rgba\\("+[z,z,z,I]+"\\)$"),H=new RegExp("^hsl\\("+[I,z,z]+"\\)$"),V=new RegExp("^hsla\\("+[I,z,z,I]+"\\)$"),U={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function G(){return this.rgb().formatHex()}function W(){return this.rgb().formatRgb()}function Z(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=N.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?$(e):3===n?new tt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?J(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?J(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=P.exec(t))?new tt(e[1],e[2],e[3],1):(e=B.exec(t))?new tt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Y.exec(t))?J(e[1],e[2],e[3],e[4]):(e=j.exec(t))?J(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=H.exec(t))?at(e[1],e[2]/100,e[3]/100,1):(e=V.exec(t))?at(e[1],e[2]/100,e[3]/100,e[4]):U.hasOwnProperty(t)?$(U[t]):"transparent"===t?new tt(NaN,NaN,NaN,0):null}function $(t){return new tt(t>>16&255,t>>8&255,255&t,1)}function J(t,g,b,a){return a<=0&&(t=g=b=NaN),new tt(t,g,b,a)}function Q(t){return t instanceof F||(t=Z(t)),t?new tt((t=t.rgb()).r,t.g,t.b,t.opacity):new tt}function K(t,g,b,e){return 1===arguments.length?Q(t):new tt(t,g,b,null==e?1:e)}function tt(t,g,b,e){this.r=+t,this.g=+g,this.b=+b,this.opacity=+e}function et(){return"#"+it(this.r)+it(this.g)+it(this.b)}function nt(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function it(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function at(t,s,e,a){return a<=0?t=s=e=NaN:e<=0||e>=1?t=s=NaN:s<=0&&(t=NaN),new st(t,s,e,a)}function ot(t){if(t instanceof st)return new st(t.h,t.s,t.l,t.opacity);if(t instanceof F||(t=Z(t)),!t)return new st;if(t instanceof st)return t;var e=(t=t.rgb()).r/255,g=t.g/255,b=t.b/255,n=Math.min(e,g,b),r=Math.max(e,g,b),o=NaN,s=r-n,c=(r+n)/2;return s?(o=e===r?(g-b)/s+6*(g<b):g===r?(b-e)/s+2:(e-g)/s+4,s/=c<.5?r+n:2-r-n,o*=60):s=c>0&&c<1?0:o,new st(o,s,c,t.opacity)}function st(t,s,e,n){this.h=+t,this.s=+s,this.l=+e,this.opacity=+n}function ct(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ut(t,e,n,r,o){var c=t*t,l=c*t;return((1-3*t+3*c-l)*e+(4-6*c+3*l)*n+(1+3*t+3*c-3*l)*r+l*o)/6}L(F,Z,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:G,formatHex:G,formatHsl:function(){return ot(this).formatHsl()},formatRgb:W,toString:W}),L(tt,K,D(F,{brighter:function(t){return t=null==t?E:Math.pow(E,t),new tt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?R:Math.pow(R,t),new tt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:et,formatHex:et,formatRgb:nt,toString:nt})),L(st,(function(t,s,e,n){return 1===arguments.length?ot(t):new st(t,s,e,null==n?1:n)}),D(F,{brighter:function(t){return t=null==t?E:Math.pow(E,t),new st(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?R:Math.pow(R,t),new st(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),s=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*s,r=2*e-n;return new tt(ct(t>=240?t-240:t+120,r,n),ct(t,r,n),ct(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var lt=t=>()=>t;function ht(a,t){return function(e){return a+e*t}}function ft(t){return 1==(t=+t)?gt:function(a,b){return b-a?function(a,b,t){return a=Math.pow(a,t),b=Math.pow(b,t)-a,t=1/t,function(e){return Math.pow(a+e*b,t)}}(a,b,t):lt(isNaN(a)?b:a)}}function gt(a,b){var t=b-a;return t?ht(a,t):lt(isNaN(a)?b:a)}var pt=function t(e){var n=ft(e);function r(t,e){var r=n((t=K(t)).r,(e=K(e)).r),g=n(t.g,e.g),b=n(t.b,e.b),o=gt(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=g(e),t.b=b(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function xt(t){return function(e){var i,n,r=e.length,o=new Array(r),g=new Array(r),b=new Array(r);for(i=0;i<r;++i)n=K(e[i]),o[i]=n.r||0,g[i]=n.g||0,b[i]=n.b||0;return o=t(o),g=t(g),b=t(b),n.opacity=1,function(t){return n.r=o(t),n.g=g(t),n.b=b(t),n+""}}}xt((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],c=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return ut((n-i/e)*e,c,r,o,l)}})),xt((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],c=t[(i+1)%e],l=t[(i+2)%e];return ut((n-i/e)*e,r,o,c,l)}}));var vt=function(a,b){b||(b=[]);var i,t=a?Math.min(b.length,a.length):0,e=b.slice();return function(n){for(i=0;i<t;++i)e[i]=a[i]*(1-n)+b[i]*n;return e}};function _t(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function yt(a,b){var i,t=b?b.length:0,e=a?Math.min(t,a.length):0,n=new Array(e),r=new Array(t);for(i=0;i<e;++i)n[i]=kt(a[i],b[i]);for(;i<t;++i)r[i]=b[i];return function(t){for(i=0;i<e;++i)r[i]=n[i](t);return r}}var mt=function(a,b){var t=new Date;return a=+a,b=+b,function(e){return t.setTime(a*(1-e)+b*e),t}},bt=function(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}},object=function(a,b){var t,i={},e={};for(t in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)t in a?i[t]=kt(a[t],b[t]):e[t]=b[t];return function(n){for(t in i)e[t]=i[t](n);return e}},Tt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wt=new RegExp(Tt.source,"g");var At=function(a,b){var t,e,n,r=Tt.lastIndex=wt.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(t=Tt.exec(a))&&(e=wt.exec(b));)(n=e.index)>r&&(n=b.slice(r,n),s[i]?s[i]+=n:s[++i]=n),(t=t[0])===(e=e[0])?s[i]?s[i]+=e:s[++i]=e:(s[++i]=null,q.push({i:i,x:bt(t,e)})),r=wt.lastIndex;return r<b.length&&(n=b.slice(r),s[i]?s[i]+=n:s[++i]=n),s.length<2?q[0]?function(b){return function(t){return b(t)+""}}(q[0].x):function(b){return function(){return b}}(b):(b=q.length,function(t){for(var e,i=0;i<b;++i)s[(e=q[i]).i]=e.x(t);return s.join("")})},kt=function(a,b){var t,e=typeof b;return null==b||"boolean"===e?lt(b):("number"===e?bt:"string"===e?(t=Z(b))?(b=t,pt):At:b instanceof Z?pt:b instanceof Date?mt:_t(b)?vt:Array.isArray(b)?yt:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:bt)(a,b)},St=function(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}};function Mt(t){return+t}var Ct=[0,1];function Ot(t){return t}function Lt(a,b){return(b-=a=+a)?function(t){return(t-a)/b}:(t=isNaN(b)?NaN:.5,function(){return t});var t}function Dt(t,e,n){var r=t[0],o=t[1],c=e[0],l=e[1];return o<r?(r=Lt(o,r),c=n(l,c)):(r=Lt(r,o),c=n(c,l)),function(t){return c(r(t))}}function Ft(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),c=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)o[i]=Lt(t[i],t[i+1]),c[i]=n(e[i],e[i+1]);return function(e){var i=O(t,e,1,r)-1;return c[i](o[i](e))}}function Rt(source,t){return t.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function Et(){var t,e,n,r,output,input,o=Ct,c=Ct,l=kt,d=Ot;function h(){var a,b,t,e=Math.min(o.length,c.length);return d!==Ot&&(a=o[0],b=o[e-1],a>b&&(t=a,a=b,b=t),d=function(t){return Math.max(a,Math.min(b,t))}),r=e>2?Ft:Dt,output=input=null,f}function f(e){return null==e||isNaN(e=+e)?n:(output||(output=r(o.map(t),c,l)))(t(d(e)))}return f.invert=function(n){return d(e((input||(input=r(c,o.map(t),bt)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,Mt),h()):o.slice()},f.range=function(t){return arguments.length?(c=Array.from(t),h()):c.slice()},f.rangeRound=function(t){return c=Array.from(t),l=St,h()},f.clamp=function(t){return arguments.length?(d=!!t||Ot,h()):d!==Ot},f.interpolate=function(t){return arguments.length?(l=t,h()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,u){return t=n,e=u,h()}}function Xt(){return Et()(Ot,Ot)}var It=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zt(t){if(!(e=It.exec(t)))throw new Error("invalid format: "+t);var e;return new Nt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Nt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}zt.prototype=Nt.prototype,Nt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function Pt(t,p){if((i=(t=p?t.toExponential(p-1):t.toExponential()).indexOf("e"))<0)return null;var i,e=t.slice(0,i);return[e.length>1?e[0]+e.slice(2):e,+t.slice(i+1)]}var Bt,Yt,jt,Ht,Vt=function(t){return(t=Pt(Math.abs(t)))?t[1]:NaN},Ut=function(t,p){var e=Pt(t,p);if(!e)return t+"";var n=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")},Gt={"%":(t,p)=>(100*t).toFixed(p),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,p)=>t.toExponential(p),f:(t,p)=>t.toFixed(p),g:(t,p)=>t.toPrecision(p),o:t=>Math.round(t).toString(8),p:(t,p)=>Ut(100*t,p),r:Ut,s:function(t,p){var e=Pt(t,p);if(!e)return t+"";var n=e[0],r=e[1],i=r-(Bt=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Pt(t,Math.max(0,p+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},Wt=function(t){return t},map=Array.prototype.map,qt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Yt=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Wt:(e=map.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],c=0,g=e[0],l=0;i>0&&g>0&&(l+g+1>r&&(g=Math.max(1,r-l)),o.push(t.substring(i-=g,i+g)),!((l+=g+1)>r));)g=e[c=(c+1)%e.length];return o.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",c=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",d=void 0===t.numerals?Wt:function(t){return function(e){return e.replace(/[0-9]/g,(function(i){return t[+i]}))}}(map.call(t.numerals,String)),h=void 0===t.percent?"%":t.percent+"",f=void 0===t.minus?"−":t.minus+"",x=void 0===t.nan?"NaN":t.nan+"";function v(t){var e=(t=zt(t)).fill,n=t.align,v=t.sign,symbol=t.symbol,_=t.zero,y=t.width,m=t.comma,T=t.precision,w=t.trim,A=t.type;"n"===A?(m=!0,A="g"):Gt[A]||(void 0===T&&(T=12),w=!0,A="g"),(_||"0"===e&&"="===n)&&(_=!0,e="0",n="=");var k="$"===symbol?o:"#"===symbol&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",S="$"===symbol?c:/[%p]/.test(A)?h:"",M=Gt[A],C=/[defgprs%]/.test(A);function O(t){var i,o,c,h=k,O=S;if("c"===A)O=M(t)+O,t="";else{var L=(t=+t)<0||1/t<0;if(t=isNaN(t)?x:M(Math.abs(t),T),w&&(t=function(s){t:for(var t,e=s.length,i=1,n=-1;i<e;++i)switch(s[i]){case".":n=t=i;break;case"0":0===n&&(n=i),t=i;break;default:if(!+s[i])break t;n>0&&(n=0)}return n>0?s.slice(0,n)+s.slice(t+1):s}(t)),L&&0==+t&&"+"!==v&&(L=!1),h=(L?"("===v?v:f:"-"===v||"("===v?"":v)+h,O=("s"===A?qt[8+Bt/3]:"")+O+(L&&"("===v?")":""),C)for(i=-1,o=t.length;++i<o;)if(48>(c=t.charCodeAt(i))||c>57){O=(46===c?l+t.slice(i+1):t.slice(i))+O,t=t.slice(0,i);break}}m&&!_&&(t=r(t,1/0));var D=h.length+t.length+O.length,F=D<y?new Array(y-D+1).join(e):"";switch(m&&_&&(t=r(F+t,F.length?y-O.length:1/0),F=""),n){case"<":t=h+t+O+F;break;case"=":t=h+F+t+O;break;case"^":t=F.slice(0,D=F.length>>1)+h+t+O+F.slice(D);break;default:t=F+h+t+O}return d(t)}return T=void 0===T?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T)),O.toString=function(){return t+""},O}return{format:v,formatPrefix:function(t,e){var n=v(((t=zt(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Vt(e)/3))),o=Math.pow(10,-r),c=qt[8+r/3];return function(t){return n(o*t)+c}}}}({thousands:",",grouping:[3],currency:["$",""]}),jt=Yt.format,Ht=Yt.formatPrefix;function Zt(t,e,n,r){var o,c=w(t,e,n);switch((r=zt(null==r?",f":r)).type){case"s":var l=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Vt(e)/3)))-Vt(Math.abs(t)))}(c,l))||(r.precision=o),Ht(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vt(e)-Vt(t))+1}(c,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-Vt(Math.abs(t)))}(c))||(r.precision=o-2*("%"===r.type))}return jt(r)}function $t(t){var e=t.domain;return t.ticks=function(t){var n=e();return m(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Zt(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,c=e(),l=0,d=c.length-1,h=c[l],f=c[d],x=10;for(f<h&&(o=h,h=f,f=o,o=l,l=d,d=o);x-- >0;){if((o=T(h,f,n))===r)return c[l]=h,c[d]=f,e(c);if(o>0)h=Math.floor(h/o)*o,f=Math.ceil(f/o)*o;else{if(!(o<0))break;h=Math.ceil(h*o)/o,f=Math.floor(f*o)/o}r=o}return t},t}function Jt(){var t=Xt();return t.copy=function(){return Rt(t,Jt())},o.apply(t,arguments),$t(t)}function Qt(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Mt),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Qt(t).unknown(e)},t=arguments.length?Array.from(t,Mt):[0,1],$t(n)}function Kt(t,e){var n,r=0,o=(t=t.slice()).length-1,c=t[r],l=t[o];return l<c&&(n=r,r=o,o=n,n=c,c=l,l=n),t[r]=e.floor(c),t[o]=e.ceil(l),t}function te(t){return Math.log(t)}function ee(t){return Math.exp(t)}function ne(t){return-Math.log(-t)}function ie(t){return-Math.exp(-t)}function re(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ae(t){return function(e){return-t(-e)}}function oe(t){var e,n,r=t(te,ee),o=r.domain,base=10;function c(){return e=function(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(t){return Math.log(t)/base})}(base),n=function(base){return 10===base?re:base===Math.E?Math.exp:function(t){return Math.pow(base,t)}}(base),o()[0]<0?(e=ae(e),n=ae(n),t(ne,ie)):t(te,ee),r}return r.base=function(t){return arguments.length?(base=+t,c()):base},r.domain=function(t){return arguments.length?(o(t),c()):o()},r.ticks=function(t){var r,c=o(),u=c[0],l=c[c.length-1];(r=l<u)&&(i=u,u=l,l=i);var p,d,h,i=e(u),f=e(l),x=null==t?10:+t,v=[];if(!(base%1)&&f-i<x){if(i=Math.floor(i),f=Math.ceil(f),u>0){for(;i<=f;++i)for(d=1,p=n(i);d<base;++d)if(!((h=p*d)<u)){if(h>l)break;v.push(h)}}else for(;i<=f;++i)for(d=base-1,p=n(i);d>=1;--d)if(!((h=p*d)<u)){if(h>l)break;v.push(h)}2*v.length<x&&(v=m(u,l,x))}else v=m(i,f,Math.min(f-i,x)).map(n);return r?v.reverse():v},r.tickFormat=function(t,o){if(null==o&&(o=10===base?".0e":","),"function"!=typeof o&&(o=jt(o)),t===1/0)return o;null==t&&(t=10);var c=Math.max(1,base*t/r.ticks().length);return function(t){var i=t/n(Math.round(e(t)));return i*base<base-.5&&(i*=base),i<=c?o(t):""}},r.nice=function(){return o(Kt(o(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function se(){var t=oe(Et()).domain([1,10]);return t.copy=function(){return Rt(t,se()).base(t.base())},o.apply(t,arguments),t}function ce(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ue(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function le(t){var e=1,n=t(ce(e),ue(e));return n.constant=function(n){return arguments.length?t(ce(e=+n),ue(e)):e},$t(n)}function de(){var t=le(Et());return t.copy=function(){return Rt(t,de()).constant(t.constant())},o.apply(t,arguments)}function he(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function fe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ge(t){return t<0?-t*t:t*t}function pe(t){var e=t(Ot,Ot),n=1;function r(){return 1===n?t(Ot,Ot):.5===n?t(fe,ge):t(he(n),he(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},$t(e)}function xe(){var t=pe(Et());return t.copy=function(){return Rt(t,xe()).exponent(t.exponent())},o.apply(t,arguments),t}function ve(){return xe.apply(null,arguments).exponent(.5)}function _e(t){return Math.sign(t)*t*t}function ye(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function me(){var t,e=Xt(),n=[0,1],r=!1;function c(n){var o=ye(e(n));return isNaN(o)?t:r?Math.round(o):o}return c.invert=function(t){return e.invert(_e(t))},c.domain=function(t){return arguments.length?(e.domain(t),c):e.domain()},c.range=function(t){return arguments.length?(e.range((n=Array.from(t,Mt)).map(_e)),c):n.slice()},c.rangeRound=function(t){return c.range(t).round(!0)},c.round=function(t){return arguments.length?(r=!!t,c):r},c.clamp=function(t){return arguments.length?(e.clamp(t),c):e.clamp()},c.unknown=function(e){return arguments.length?(t=e,c):t},c.copy=function(){return me(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},o.apply(c,arguments),$t(c)}function be(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function Te(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function we(t,e,n=0,r=t.length-1,o=A){for(;r>n;){if(r-n>600){const c=r-n+1,l=e-n+1,d=Math.log(c),s=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*s*(c-s)/c)*(l-c/2<0?-1:1);we(t,e,Math.max(n,Math.floor(e-l*s/c+h)),Math.min(r,Math.floor(e+(c-l)*s/c+h)),o)}const c=t[e];let i=n,l=r;for(Ae(t,n,e),o(t[r],c)>0&&Ae(t,n,r);i<l;){for(Ae(t,i,l),++i,--l;o(t[i],c)<0;)++i;for(;o(t[l],c)>0;)--l}0===o(t[n],c)?Ae(t,n,l):(++l,Ae(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Ae(t,i,e){const n=t[i];t[i]=t[e],t[e]=n}function ke(t,p,e){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,e)),n=t.length){if((p=+p)<=0||n<2)return Te(t);if(p>=1)return be(t);var n,i=(n-1)*p,r=Math.floor(i),o=be(we(t,r).subarray(0,r+1));return o+(Te(t.subarray(r+1))-o)*(i-r)}}function Se(t,p,e=S){if(n=t.length){if((p=+p)<=0||n<2)return+e(t[0],0,t);if(p>=1)return+e(t[n-1],n-1,t);var n,i=(n-1)*p,r=Math.floor(i),o=+e(t[r],r,t);return o+(+e(t[r+1],r+1,t)-o)*(i-r)}}function Me(){var t,e=[],n=[],r=[];function c(){var i=0,t=Math.max(1,n.length);for(r=new Array(t-1);++i<t;)r[i-1]=Se(e,i/t);return l}function l(e){return null==e||isNaN(e=+e)?t:n[O(r,e)]}return l.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},l.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(A),c()},l.range=function(t){return arguments.length?(n=Array.from(t),c()):n.slice()},l.unknown=function(e){return arguments.length?(t=e,l):t},l.quantiles=function(){return r.slice()},l.copy=function(){return Me().domain(e).range(n).unknown(t)},o.apply(l,arguments)}function Ce(){var t,e=0,n=1,r=1,c=[.5],l=[0,1];function d(e){return null!=e&&e<=e?l[O(c,e,0,r)]:t}function h(){var i=-1;for(c=new Array(r);++i<r;)c[i]=((i+1)*n-(i-r)*e)/(r+1);return d}return d.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,h()):[e,n]},d.range=function(t){return arguments.length?(r=(l=Array.from(t)).length-1,h()):l.slice()},d.invertExtent=function(t){var i=l.indexOf(t);return i<0?[NaN,NaN]:i<1?[e,c[0]]:i>=r?[c[r-1],n]:[c[i-1],c[i]]},d.unknown=function(e){return arguments.length?(t=e,d):d},d.thresholds=function(){return c.slice()},d.copy=function(){return Ce().domain([e,n]).range(l).unknown(t)},o.apply($t(d),arguments)}function Oe(){var t,e=[.5],n=[0,1],r=1;function c(o){return null!=o&&o<=o?n[O(e,o,0,r)]:t}return c.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),c):e.slice()},c.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),c):n.slice()},c.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},c.unknown=function(e){return arguments.length?(t=e,c):t},c.copy=function(){return Oe().domain(e).range(n).unknown(t)},o.apply(c,arguments)}const Le=1e3,De=6e4,Fe=36e5,Re=864e5,Ee=6048e5,Xe=2592e6,Ie=31536e6;var ze=new Date,Ne=new Date;function Pe(t,e,n,r){function o(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return o.floor=function(e){return t(e=new Date(+e)),e},o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,r,c){var l,d=[];if(n=o.ceil(n),c=null==c?1:Math.floor(c),!(n<r&&c>0))return d;do{d.push(l=new Date(+n)),e(n,c),t(n)}while(l<n&&n<r);return d},o.filter=function(n){return Pe((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(o.count=function(e,r){return ze.setTime(+e),Ne.setTime(+r),t(ze),t(Ne),Math.floor(n(ze,Ne))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(r?function(e){return r(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var Be=Pe((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Be.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Pe((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Be:null};var Ye=Be,je=(Be.range,Pe((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Le)}),(function(t,e){return(e-t)/Le}),(function(t){return t.getUTCSeconds()}))),He=je,Ve=(je.range,Pe((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Le)}),(function(t,e){t.setTime(+t+e*De)}),(function(t,e){return(e-t)/De}),(function(t){return t.getMinutes()}))),Ue=Ve,Ge=(Ve.range,Pe((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Le-t.getMinutes()*De)}),(function(t,e){t.setTime(+t+e*Fe)}),(function(t,e){return(e-t)/Fe}),(function(t){return t.getHours()}))),We=Ge,qe=(Ge.range,Pe((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*De)/Re),(t=>t.getDate()-1))),Ze=qe;qe.range;function $e(i){return Pe((function(t){t.setDate(t.getDate()-(t.getDay()+7-i)%7),t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*De)/Ee}))}var Je=$e(0),Qe=$e(1),Ke=$e(2),tn=$e(3),en=$e(4),nn=$e(5),rn=$e(6),an=(Je.range,Qe.range,Ke.range,tn.range,en.range,nn.range,rn.range,Pe((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),on=an,sn=(an.range,Pe((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));sn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Pe((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var cn=sn,un=(sn.range,Pe((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*De)}),(function(t,e){return(e-t)/De}),(function(t){return t.getUTCMinutes()}))),ln=un,dn=(un.range,Pe((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Fe)}),(function(t,e){return(e-t)/Fe}),(function(t){return t.getUTCHours()}))),hn=dn,fn=(dn.range,Pe((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Re}),(function(t){return t.getUTCDate()-1}))),gn=fn;fn.range;function pn(i){return Pe((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-i)%7),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Ee}))}var xn=pn(0),vn=pn(1),_n=pn(2),yn=pn(3),mn=pn(4),bn=pn(5),Tn=pn(6),wn=(xn.range,vn.range,_n.range,yn.range,mn.range,bn.range,Tn.range,Pe((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),An=wn,kn=(wn.range,Pe((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));kn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Pe((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Sn=kn;kn.range;function Mn(t,e,n,r,o,c){const l=[[He,1,Le],[He,5,5e3],[He,15,15e3],[He,30,3e4],[c,1,De],[c,5,3e5],[c,15,9e5],[c,30,18e5],[o,1,Fe],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,Re],[r,2,1728e5],[n,1,Ee],[e,1,Xe],[e,3,7776e6],[t,1,Ie]];function d(e,n,r){const o=Math.abs(n-e)/r,i=k((([,,t])=>t)).right(l,o);if(i===l.length)return t.every(w(e/Ie,n/Ie,r));if(0===i)return Ye.every(Math.max(w(e,n,r),1));const[c,d]=l[o/l[i-1][2]<l[i][2]/o?i-1:i];return c.every(d)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const o=n&&"function"==typeof n.range?n:d(t,e,n),c=o?o.range(t,+e+1):[];return r?c.reverse():c},d]}const[Cn,On]=Mn(Sn,An,xn,gn,hn,ln),[Ln,Dn]=Mn(cn,on,Je,Ze,We,Ue);function Fn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function En(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Xn,In,zn,Nn={"-":"",_:" ",0:"0"},Pn=/^\s*\d+/,Bn=/^%/,Yn=/[\\^$*+?|[\]().{}]/g;function jn(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",c=o.length;return r+(c<n?new Array(n-c+1).join(e)+o:o)}function Hn(s){return s.replace(Yn,"\\$&")}function Vn(t){return new RegExp("^(?:"+t.map(Hn).join("|")+")","i")}function Un(t){return new Map(t.map(((t,i)=>[t.toLowerCase(),i])))}function Gn(t,e,i){var n=Pn.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function Wn(t,e,i){var n=Pn.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function qn(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function Zn(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function $n(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function Jn(t,e,i){var n=Pn.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Qn(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function Kn(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function ti(t,e,i){var n=Pn.exec(e.slice(i,i+1));return n?(t.q=3*n[0]-3,i+n[0].length):-1}function ei(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function ni(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function ii(t,e,i){var n=Pn.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function ri(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function ai(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function oi(t,e,i){var n=Pn.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function si(t,e,i){var n=Pn.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function ci(t,e,i){var n=Pn.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function ui(t,e,i){var n=Bn.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function di(t,e,i){var n=Pn.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function hi(t,e,i){var n=Pn.exec(e.slice(i));return n?(t.s=+n[0],i+n[0].length):-1}function fi(t,p){return jn(t.getDate(),p,2)}function gi(t,p){return jn(t.getHours(),p,2)}function pi(t,p){return jn(t.getHours()%12||12,p,2)}function xi(t,p){return jn(1+Ze.count(cn(t),t),p,3)}function vi(t,p){return jn(t.getMilliseconds(),p,3)}function _i(t,p){return vi(t,p)+"000"}function yi(t,p){return jn(t.getMonth()+1,p,2)}function mi(t,p){return jn(t.getMinutes(),p,2)}function bi(t,p){return jn(t.getSeconds(),p,2)}function Ti(t){var e=t.getDay();return 0===e?7:e}function wi(t,p){return jn(Je.count(cn(t)-1,t),p,2)}function Ai(t){var e=t.getDay();return e>=4||0===e?en(t):en.ceil(t)}function ki(t,p){return t=Ai(t),jn(en.count(cn(t),t)+(4===cn(t).getDay()),p,2)}function Si(t){return t.getDay()}function Mi(t,p){return jn(Qe.count(cn(t)-1,t),p,2)}function Ci(t,p){return jn(t.getFullYear()%100,p,2)}function Oi(t,p){return jn((t=Ai(t)).getFullYear()%100,p,2)}function Li(t,p){return jn(t.getFullYear()%1e4,p,4)}function Di(t,p){var e=t.getDay();return jn((t=e>=4||0===e?en(t):en.ceil(t)).getFullYear()%1e4,p,4)}function Fi(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+jn(e/60|0,"0",2)+jn(e%60,"0",2)}function Ri(t,p){return jn(t.getUTCDate(),p,2)}function Ei(t,p){return jn(t.getUTCHours(),p,2)}function Xi(t,p){return jn(t.getUTCHours()%12||12,p,2)}function Ii(t,p){return jn(1+gn.count(Sn(t),t),p,3)}function zi(t,p){return jn(t.getUTCMilliseconds(),p,3)}function Ni(t,p){return zi(t,p)+"000"}function Pi(t,p){return jn(t.getUTCMonth()+1,p,2)}function Bi(t,p){return jn(t.getUTCMinutes(),p,2)}function Yi(t,p){return jn(t.getUTCSeconds(),p,2)}function ji(t){var e=t.getUTCDay();return 0===e?7:e}function Hi(t,p){return jn(xn.count(Sn(t)-1,t),p,2)}function Vi(t){var e=t.getUTCDay();return e>=4||0===e?mn(t):mn.ceil(t)}function Ui(t,p){return t=Vi(t),jn(mn.count(Sn(t),t)+(4===Sn(t).getUTCDay()),p,2)}function Gi(t){return t.getUTCDay()}function Wi(t,p){return jn(vn.count(Sn(t)-1,t),p,2)}function qi(t,p){return jn(t.getUTCFullYear()%100,p,2)}function Zi(t,p){return jn((t=Vi(t)).getUTCFullYear()%100,p,2)}function $i(t,p){return jn(t.getUTCFullYear()%1e4,p,4)}function Ji(t,p){var e=t.getUTCDay();return jn((t=e>=4||0===e?mn(t):mn.ceil(t)).getUTCFullYear()%1e4,p,4)}function Qi(){return"+0000"}function Ki(){return"%"}function er(t){return+t}function nr(t){return Math.floor(+t/1e3)}function ir(t){return new Date(t)}function rr(t){return t instanceof Date?+t:+new Date(+t)}function ar(t,e,n,r,o,c,l,d,h,f){var x=Xt(),v=x.invert,_=x.domain,y=f(".%L"),m=f(":%S"),T=f("%I:%M"),w=f("%I %p"),A=f("%a %d"),k=f("%b %d"),S=f("%B"),M=f("%Y");function C(t){return(h(t)<t?y:d(t)<t?m:l(t)<t?T:c(t)<t?w:r(t)<t?o(t)<t?A:k:n(t)<t?S:M)(t)}return x.invert=function(t){return new Date(v(t))},x.domain=function(t){return arguments.length?_(Array.from(t,rr)):_().map(ir)},x.ticks=function(e){var n=_();return t(n[0],n[n.length-1],null==e?10:e)},x.tickFormat=function(t,e){return null==e?C:f(e)},x.nice=function(t){var n=_();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?_(Kt(n,t)):x},x.copy=function(){return Rt(x,ar(t,e,n,r,o,c,l,d,h,f))},x}function time(){return o.apply(ar(Ln,Dn,cn,on,Je,Ze,We,Ue,He,In).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function or(){return o.apply(ar(Cn,On,Sn,An,xn,gn,hn,ln,He,zn).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sr(){var t,e,n,r,o,c=0,l=1,d=Ot,h=!1;function f(e){return null==e||isNaN(e=+e)?o:d(0===n?.5:(e=(r(e)-t)*n,h?Math.max(0,Math.min(1,e)):e))}function x(t){return function(e){var n,r;return arguments.length?([n,r]=e,d=t(n,r),f):[d(0),d(1)]}}return f.domain=function(o){return arguments.length?([c,l]=o,t=r(c=+c),e=r(l=+l),n=t===e?0:1/(e-t),f):[c,l]},f.clamp=function(t){return arguments.length?(h=!!t,f):h},f.interpolator=function(t){return arguments.length?(d=t,f):d},f.range=x(kt),f.rangeRound=x(St),f.unknown=function(t){return arguments.length?(o=t,f):o},function(o){return r=o,t=o(c),e=o(l),n=t===e?0:1/(e-t),f}}function cr(source,t){return t.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function ur(){var t=$t(sr()(Ot));return t.copy=function(){return cr(t,ur())},c.apply(t,arguments)}function lr(){var t=oe(sr()).domain([1,10]);return t.copy=function(){return cr(t,lr()).base(t.base())},c.apply(t,arguments)}function dr(){var t=le(sr());return t.copy=function(){return cr(t,dr()).constant(t.constant())},c.apply(t,arguments)}function fr(){var t=pe(sr());return t.copy=function(){return cr(t,fr()).exponent(t.exponent())},c.apply(t,arguments)}function gr(){return fr.apply(null,arguments).exponent(.5)}function pr(){var t=[],e=Ot;function n(n){if(null!=n&&!isNaN(n=+n))return e((O(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(A),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,i)=>e(i/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,i)=>ke(t,i/e)))},n.copy=function(){return pr(e).domain(t)},c.apply(n,arguments)}function xr(t,e){void 0===e&&(e=t,t=kt);for(var i=0,n=e.length-1,r=e[0],o=new Array(n<0?0:n);i<n;)o[i]=t(r,r=e[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return o[i](t-i)}}function vr(){var t,e,n,r,o,c,l,d=0,h=.5,f=1,s=1,x=Ot,v=!1;function _(t){return isNaN(t=+t)?l:(t=.5+((t=+c(t))-e)*(s*t<s*e?r:o),x(v?Math.max(0,Math.min(1,t)):t))}function y(t){return function(e){var n,r,o;return arguments.length?([n,r,o]=e,x=xr(t,[n,r,o]),_):[x(0),x(.5),x(1)]}}return _.domain=function(l){return arguments.length?([d,h,f]=l,t=c(d=+d),e=c(h=+h),n=c(f=+f),r=t===e?0:.5/(e-t),o=e===n?0:.5/(n-e),s=e<t?-1:1,_):[d,h,f]},_.clamp=function(t){return arguments.length?(v=!!t,_):v},_.interpolator=function(t){return arguments.length?(x=t,_):x},_.range=y(kt),_.rangeRound=y(St),_.unknown=function(t){return arguments.length?(l=t,_):l},function(l){return c=l,t=l(d),e=l(h),n=l(f),r=t===e?0:.5/(e-t),o=e===n?0:.5/(n-e),s=e<t?-1:1,_}}function _r(){var t=$t(vr()(Ot));return t.copy=function(){return cr(t,_r())},c.apply(t,arguments)}function yr(){var t=oe(vr()).domain([.1,1,10]);return t.copy=function(){return cr(t,yr()).base(t.base())},c.apply(t,arguments)}function mr(){var t=le(vr());return t.copy=function(){return cr(t,mr()).constant(t.constant())},c.apply(t,arguments)}function Tr(){var t=pe(vr());return t.copy=function(){return cr(t,Tr()).exponent(t.exponent())},c.apply(t,arguments)}function wr(){return Tr.apply(null,arguments).exponent(.5)}!function(t){Xn=function(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,c=t.days,l=t.shortDays,d=t.months,h=t.shortMonths,f=Vn(o),x=Un(o),v=Vn(c),_=Un(c),y=Vn(l),m=Un(l),T=Vn(d),w=Un(d),A=Vn(h),k=Un(h),S={a:function(t){return l[t.getDay()]},A:function(t){return c[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return d[t.getMonth()]},c:null,d:fi,e:fi,f:_i,g:Oi,G:Di,H:gi,I:pi,j:xi,L:vi,m:yi,M:mi,p:function(t){return o[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:er,s:nr,S:bi,u:Ti,U:wi,V:ki,w:Si,W:Mi,x:null,X:null,y:Ci,Y:Li,Z:Fi,"%":Ki},M={a:function(t){return l[t.getUTCDay()]},A:function(t){return c[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return d[t.getUTCMonth()]},c:null,d:Ri,e:Ri,f:Ni,g:Zi,G:Ji,H:Ei,I:Xi,j:Ii,L:zi,m:Pi,M:Bi,p:function(t){return o[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:er,s:nr,S:Yi,u:ji,U:Hi,V:Ui,w:Gi,W:Wi,x:null,X:null,y:qi,Y:$i,Z:Qi,"%":Ki},C={a:function(t,e,i){var n=y.exec(e.slice(i));return n?(t.w=m.get(n[0].toLowerCase()),i+n[0].length):-1},A:function(t,e,i){var n=v.exec(e.slice(i));return n?(t.w=_.get(n[0].toLowerCase()),i+n[0].length):-1},b:function(t,e,i){var n=A.exec(e.slice(i));return n?(t.m=k.get(n[0].toLowerCase()),i+n[0].length):-1},B:function(t,e,i){var n=T.exec(e.slice(i));return n?(t.m=w.get(n[0].toLowerCase()),i+n[0].length):-1},c:function(t,n,i){return D(t,e,n,i)},d:ni,e:ni,f:ci,g:Qn,G:Jn,H:ri,I:ri,j:ii,L:si,m:ei,M:ai,p:function(t,e,i){var n=f.exec(e.slice(i));return n?(t.p=x.get(n[0].toLowerCase()),i+n[0].length):-1},q:ti,Q:di,s:hi,S:oi,u:Wn,U:qn,V:Zn,w:Gn,W:$n,x:function(t,e,i){return D(t,n,e,i)},X:function(t,e,i){return D(t,r,e,i)},y:Qn,Y:Jn,Z:Kn,"%":ui};function O(t,e){return function(n){var r,o,c,l=[],i=-1,d=0,h=t.length;for(n instanceof Date||(n=new Date(+n));++i<h;)37===t.charCodeAt(i)&&(l.push(t.slice(d,i)),null!=(o=Nn[r=t.charAt(++i)])?r=t.charAt(++i):o="e"===r?" ":"0",(c=e[r])&&(r=c(n,o)),l.push(r),d=i+1);return l.push(t.slice(d,i)),l.join("")}}function L(t,e){return function(n){var r,o,c=En(1900,void 0,1);if(D(c,t,n+="",0)!=n.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(e&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(o=(r=Rn(En(c.y,0,1))).getUTCDay(),r=o>4||0===o?vn.ceil(r):vn(r),r=gn.offset(r,7*(c.V-1)),c.y=r.getUTCFullYear(),c.m=r.getUTCMonth(),c.d=r.getUTCDate()+(c.w+6)%7):(o=(r=Fn(En(c.y,0,1))).getDay(),r=o>4||0===o?Qe.ceil(r):Qe(r),r=Ze.offset(r,7*(c.V-1)),c.y=r.getFullYear(),c.m=r.getMonth(),c.d=r.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),o="Z"in c?Rn(En(c.y,0,1)).getUTCDay():Fn(En(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(o+5)%7:c.w+7*c.U-(o+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,Rn(c)):Fn(c)}}function D(t,e,n,r){for(var o,c,i=0,l=e.length,d=n.length;i<l;){if(r>=d)return-1;if(37===(o=e.charCodeAt(i++))){if(o=e.charAt(i++),!(c=C[o in Nn?e.charAt(i++):o])||(r=c(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return S.x=O(n,S),S.X=O(r,S),S.c=O(e,S),M.x=O(n,M),M.X=O(r,M),M.c=O(e,M),{format:function(t){var e=O(t+="",S);return e.toString=function(){return t},e},parse:function(t){var p=L(t+="",!1);return p.toString=function(){return t},p},utcFormat:function(t){var e=O(t+="",M);return e.toString=function(){return t},e},utcParse:function(t){var p=L(t+="",!0);return p.toString=function(){return t},p}}}(t),In=Xn.format,Xn.parse,zn=Xn.utcFormat,Xn.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},444:function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return c})),n.d(e,"creator",(function(){return r.a})),n.d(e,"local",(function(){return d})),n.d(e,"matcher",(function(){return f.a})),n.d(e,"mouse",(function(){return x.a})),n.d(e,"namespace",(function(){return v.a})),n.d(e,"namespaces",(function(){return _.a})),n.d(e,"clientPoint",(function(){return y.a})),n.d(e,"select",(function(){return o.a})),n.d(e,"selectAll",(function(){return T})),n.d(e,"selection",(function(){return m.b})),n.d(e,"selector",(function(){return w.a})),n.d(e,"selectorAll",(function(){return A.a})),n.d(e,"style",(function(){return style.b})),n.d(e,"touch",(function(){return k.a})),n.d(e,"touches",(function(){return M})),n.d(e,"window",(function(){return C.a})),n.d(e,"event",(function(){return O.c})),n.d(e,"customEvent",(function(){return O.a}));var r=n(641),o=n(695),c=function(t){return Object(o.a)(Object(r.a)(t).call(document.documentElement))},l=0;function d(){return new h}function h(){this._="@"+(++l).toString(36)}h.prototype=d.prototype={constructor:h,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var f=n(691),x=n(779),v=n(670),_=n(671),y=n(644),m=n(683),T=function(t){return"string"==typeof t?new m.a([document.querySelectorAll(t)],[document.documentElement]):new m.a([null==t?[]:t],m.c)},w=n(672),A=n(692),style=n(693),k=n(778),S=n(694),M=function(t,e){null==e&&(e=Object(S.a)().touches);for(var i=0,n=e?e.length:0,r=new Array(n);i<n;++i)r[i]=Object(y.a)(t,e[i]);return r},C=n(673),O=n(642)},600:function(t,e,n){"use strict";n.r(e);var r=n(628);n.d(e,"color",(function(){return r.e})),n.d(e,"rgb",(function(){return r.g})),n.d(e,"hsl",(function(){return r.f}));var o=n(652);n.d(e,"lab",(function(){return o.a})),n.d(e,"hcl",(function(){return o.c})),n.d(e,"lch",(function(){return o.d})),n.d(e,"gray",(function(){return o.b}));var c=n(887);n.d(e,"cubehelix",(function(){return c.a}))},604:function(t,e,n){"use strict";n.r(e),n.d(e,"interpolate",(function(){return r.a})),n.d(e,"interpolateArray",(function(){return o.a})),n.d(e,"interpolateBasis",(function(){return c.b})),n.d(e,"interpolateBasisClosed",(function(){return l.a})),n.d(e,"interpolateDate",(function(){return d.a})),n.d(e,"interpolateDiscrete",(function(){return h})),n.d(e,"interpolateHue",(function(){return x})),n.d(e,"interpolateNumber",(function(){return v.a})),n.d(e,"interpolateNumberArray",(function(){return _.a})),n.d(e,"interpolateObject",(function(){return object.a})),n.d(e,"interpolateRound",(function(){return y.a})),n.d(e,"interpolateString",(function(){return m.a})),n.d(e,"interpolateTransformCss",(function(){return T.a})),n.d(e,"interpolateTransformSvg",(function(){return T.b})),n.d(e,"interpolateZoom",(function(){return w.a})),n.d(e,"interpolateRgb",(function(){return A.a})),n.d(e,"interpolateRgbBasis",(function(){return A.b})),n.d(e,"interpolateRgbBasisClosed",(function(){return A.c})),n.d(e,"interpolateHsl",(function(){return M})),n.d(e,"interpolateHslLong",(function(){return C})),n.d(e,"interpolateLab",(function(){return L})),n.d(e,"interpolateHcl",(function(){return F})),n.d(e,"interpolateHclLong",(function(){return R})),n.d(e,"interpolateCubehelix",(function(){return I})),n.d(e,"interpolateCubehelixLong",(function(){return z})),n.d(e,"piecewise",(function(){return N})),n.d(e,"quantize",(function(){return P}));var r=n(674),o=n(697),c=n(669),l=n(689),d=n(696),h=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},f=n(629),x=function(a,b){var i=Object(f.c)(+a,+b);return function(t){var e=i(t);return e-360*Math.floor(e/360)}},v=n(639),_=n(675),object=n(698),y=n(781),m=n(690),T=n(756),w=n(782),A=n(640),k=n(628);function S(t){return function(e,n){var r=t((e=Object(k.f)(e)).h,(n=Object(k.f)(n)).h),s=Object(f.a)(e.s,n.s),o=Object(f.a)(e.l,n.l),c=Object(f.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=s(t),e.l=o(t),e.opacity=c(t),e+""}}}var M=S(f.c),C=S(f.a),O=n(652);function L(t,e){var n=Object(f.a)((t=Object(O.a)(t)).l,(e=Object(O.a)(e)).l),a=Object(f.a)(t.a,e.a),b=Object(f.a)(t.b,e.b),r=Object(f.a)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=a(e),t.b=b(e),t.opacity=r(e),t+""}}function D(t){return function(e,n){var r=t((e=Object(O.c)(e)).h,(n=Object(O.c)(n)).h),o=Object(f.a)(e.c,n.c),c=Object(f.a)(e.l,n.l),l=Object(f.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=o(t),e.l=c(t),e.opacity=l(t),e+""}}}var F=D(f.c),R=D(f.a),E=n(887);function X(t){return function e(n){function r(e,r){var o=t((e=Object(E.a)(e)).h,(r=Object(E.a)(r)).h),s=Object(f.a)(e.s,r.s),c=Object(f.a)(e.l,r.l),l=Object(f.a)(e.opacity,r.opacity);return function(t){return e.h=o(t),e.s=s(t),e.l=c(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,r.gamma=e,r}(1)}var I=X(f.c),z=X(f.a);function N(t,e){for(var i=0,n=e.length-1,r=e[0],o=new Array(n<0?0:n);i<n;)o[i]=t(r,r=e[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return o[i](t-i)}}var P=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}},652:function(t,e,n){"use strict";n.d(e,"b",(function(){return _})),n.d(e,"a",(function(){return y})),n.d(e,"d",(function(){return M})),n.d(e,"c",(function(){return C}));var r=n(688),o=n(628),c=n(886),l=.96422,d=.82521,h=4/29,f=6/29,x=3*f*f;function v(t){if(t instanceof m)return new m(t.l,t.a,t.b,t.opacity);if(t instanceof O)return L(t);t instanceof o.b||(t=Object(o.h)(t));var e,n,r=k(t.r),g=k(t.g),b=k(t.b),c=T((.2225045*r+.7168786*g+.0606169*b)/1);return r===g&&g===b?e=n=c:(e=T((.4360747*r+.3850649*g+.1430804*b)/l),n=T((.0139322*r+.0971045*g+.7141733*b)/d)),new m(116*c-16,500*(e-c),200*(c-n),t.opacity)}function _(t,e){return new m(t,0,0,null==e?1:e)}function y(t,a,b,e){return 1===arguments.length?v(t):new m(t,a,b,null==e?1:e)}function m(t,a,b,e){this.l=+t,this.a=+a,this.b=+b,this.opacity=+e}function T(t){return t>.008856451679035631?Math.pow(t,1/3):t/x+h}function w(t){return t>f?t*t*t:x*(t-h)}function A(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function k(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function S(t){if(t instanceof O)return new O(t.h,t.c,t.l,t.opacity);if(t instanceof m||(t=v(t)),0===t.a&&0===t.b)return new O(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*c.b;return new O(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function M(t,e,n,r){return 1===arguments.length?S(t):new O(n,e,t,null==r?1:r)}function C(t,e,n,r){return 1===arguments.length?S(t):new O(t,e,n,null==r?1:r)}function O(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function L(t){if(isNaN(t.h))return new m(t.l,0,0,t.opacity);var e=t.h*c.a;return new m(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Object(r.a)(m,y,Object(r.b)(o.a,{brighter:function(t){return new m(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new m(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=l*w(e),t=1*w(t),n=d*w(n),new o.b(A(3.1338561*e-1.6168667*t-.4906146*n),A(-.9787684*e+1.9161415*t+.033454*n),A(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Object(r.a)(O,C,Object(r.b)(o.a,{brighter:function(t){return new O(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new O(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return L(this).rgb()}}))},661:function(t,e,n){"use strict";n.r(e),n.d(e,"drag",(function(){return w})),n.d(e,"dragDisable",(function(){return h.a})),n.d(e,"dragEnable",(function(){return h.b}));var r=n(1612),o=n(642),c=n(779),l=n(695),d=n(778),h=n(676),f=n(780),x=function(t){return function(){return t}};function v(t,e,n,r,o,c,l,d,h,f){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=o,this.x=c,this.y=l,this.dx=d,this.dy=h,this._=f}function _(){return!o.c.ctrlKey&&!o.c.button}function y(){return this.parentNode}function m(t){return null==t?{x:o.c.x,y:o.c.y}:t}function T(){return navigator.maxTouchPoints||"ontouchstart"in this}v.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var w=function(){var t,e,n,w,filter=_,A=y,k=m,S=T,M={},C=Object(r.a)("start","drag","end"),O=0,L=0;function D(t){t.on("mousedown.drag",F).filter(S).on("touchstart.drag",X).on("touchmove.drag",I).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function F(){if(!w&&filter.apply(this,arguments)){var r=N("mouse",A.apply(this,arguments),c.a,this,arguments);r&&(Object(l.a)(o.c.view).on("mousemove.drag",R,!0).on("mouseup.drag",E,!0),Object(h.a)(o.c.view),Object(f.b)(),n=!1,t=o.c.clientX,e=o.c.clientY,r("start"))}}function R(){if(Object(f.a)(),!n){var r=o.c.clientX-t,c=o.c.clientY-e;n=r*r+c*c>L}M.mouse("drag")}function E(){Object(l.a)(o.c.view).on("mousemove.drag mouseup.drag",null),Object(h.b)(o.c.view,n),Object(f.a)(),M.mouse("end")}function X(){if(filter.apply(this,arguments)){var i,t,e=o.c.changedTouches,n=A.apply(this,arguments),r=e.length;for(i=0;i<r;++i)(t=N(e[i].identifier,n,d.a,this,arguments))&&(Object(f.b)(),t("start"))}}function I(){var i,t,e=o.c.changedTouches,n=e.length;for(i=0;i<n;++i)(t=M[e[i].identifier])&&(Object(f.a)(),t("drag"))}function z(){var i,t,e=o.c.changedTouches,n=e.length;for(w&&clearTimeout(w),w=setTimeout((function(){w=null}),500),i=0;i<n;++i)(t=M[e[i].identifier])&&(Object(f.b)(),t("end"))}function N(t,e,n,r,c){var s,l,d,p=n(e,t),h=C.copy();if(Object(o.a)(new v(D,"beforestart",s,t,O,p[0],p[1],0,0,h),(function(){return null!=(o.c.subject=s=k.apply(r,c))&&(l=s.x-p[0]||0,d=s.y-p[1]||0,!0)})))return function f(x){var _,y=p;switch(x){case"start":M[t]=f,_=O++;break;case"end":delete M[t],--O;case"drag":p=n(e,t),_=O}Object(o.a)(new v(D,x,s,t,_,p[0]+l,p[1]+d,p[0]-y[0],p[1]-y[1],h),h.apply,h,[x,r,c])}}return D.filter=function(t){return arguments.length?(filter="function"==typeof t?t:x(!!t),D):filter},D.container=function(t){return arguments.length?(A="function"==typeof t?t:x(t),D):A},D.subject=function(t){return arguments.length?(k="function"==typeof t?t:x(t),D):k},D.touchable=function(t){return arguments.length?(S="function"==typeof t?t:x(!!t),D):S},D.on=function(){var t=C.on.apply(C,arguments);return t===C?D:t},D.clickDistance=function(t){return arguments.length?(L=(t=+t)*t,D):Math.sqrt(L)},D}},662:function(t,e,n){"use strict";n.r(e),n.d(e,"timeFormatDefaultLocale",(function(){return r.a})),n.d(e,"timeFormat",(function(){return r.b})),n.d(e,"timeParse",(function(){return r.c})),n.d(e,"utcFormat",(function(){return r.d})),n.d(e,"utcParse",(function(){return r.e})),n.d(e,"timeFormatLocale",(function(){return o.a})),n.d(e,"isoFormat",(function(){return l})),n.d(e,"isoParse",(function(){return d}));var r=n(612),o=n(699),c="%Y-%m-%dT%H:%M:%S.%LZ";var l=Date.prototype.toISOString?function(t){return t.toISOString()}:Object(r.d)(c);var d=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Object(r.e)(c)},684:function(t,e,n){"use strict";function r(t){return+t}function o(t){return t*t}function c(t){return t*(2-t)}function l(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}n.r(e),n.d(e,"easeLinear",(function(){return r})),n.d(e,"easeQuad",(function(){return l})),n.d(e,"easeQuadIn",(function(){return o})),n.d(e,"easeQuadOut",(function(){return c})),n.d(e,"easeQuadInOut",(function(){return l})),n.d(e,"easeCubic",(function(){return d.b})),n.d(e,"easeCubicIn",(function(){return d.a})),n.d(e,"easeCubicOut",(function(){return d.c})),n.d(e,"easeCubicInOut",(function(){return d.b})),n.d(e,"easePoly",(function(){return x})),n.d(e,"easePolyIn",(function(){return h})),n.d(e,"easePolyOut",(function(){return f})),n.d(e,"easePolyInOut",(function(){return x})),n.d(e,"easeSin",(function(){return T})),n.d(e,"easeSinIn",(function(){return y})),n.d(e,"easeSinOut",(function(){return m})),n.d(e,"easeSinInOut",(function(){return T})),n.d(e,"easeExp",(function(){return S})),n.d(e,"easeExpIn",(function(){return A})),n.d(e,"easeExpOut",(function(){return k})),n.d(e,"easeExpInOut",(function(){return S})),n.d(e,"easeCircle",(function(){return O})),n.d(e,"easeCircleIn",(function(){return M})),n.d(e,"easeCircleOut",(function(){return C})),n.d(e,"easeCircleInOut",(function(){return O})),n.d(e,"easeBounce",(function(){return R})),n.d(e,"easeBounceIn",(function(){return F})),n.d(e,"easeBounceOut",(function(){return R})),n.d(e,"easeBounceInOut",(function(){return E})),n.d(e,"easeBack",(function(){return N})),n.d(e,"easeBackIn",(function(){return I})),n.d(e,"easeBackOut",(function(){return z})),n.d(e,"easeBackInOut",(function(){return N})),n.d(e,"easeElastic",(function(){return Y})),n.d(e,"easeElasticIn",(function(){return B})),n.d(e,"easeElasticOut",(function(){return Y})),n.d(e,"easeElasticInOut",(function(){return j}));var d=n(643),h=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),f=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),x=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),v=Math.PI,_=v/2;function y(t){return 1==+t?1:1-Math.cos(t*_)}function m(t){return Math.sin(t*_)}function T(t){return(1-Math.cos(v*t))/2}function w(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function A(t){return w(1-+t)}function k(t){return 1-w(t)}function S(t){return((t*=2)<=1?w(1-t):2-w(t-1))/2}function M(t){return 1-Math.sqrt(1-t*t)}function C(t){return Math.sqrt(1- --t*t)}function O(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var L=4/11,D=7.5625;function F(t){return 1-R(1-t)}function R(t){return(t=+t)<L?D*t*t:t<.7272727272727273?D*(t-=.5454545454545454)*t+.75:t<.9090909090909091?D*(t-=.8181818181818182)*t+.9375:D*(t-=.9545454545454546)*t+.984375}function E(t){return((t*=2)<=1?1-R(1-t):R(t-1)+1)/2}var X=1.70158,I=function t(s){function e(t){return(t=+t)*t*(s*(t-1)+t)}return s=+s,e.overshoot=t,e}(X),z=function t(s){function e(t){return--t*t*((t+1)*s+t)+1}return s=+s,e.overshoot=t,e}(X),N=function t(s){function e(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,e.overshoot=t,e}(X),P=2*Math.PI,B=function t(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=P);function e(t){return a*w(- --t)*Math.sin((s-t)/p)}return e.amplitude=function(a){return t(a,p*P)},e.period=function(p){return t(a,p)},e}(1,.3),Y=function t(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=P);function e(t){return 1-a*w(t=+t)*Math.sin((t+s)/p)}return e.amplitude=function(a){return t(a,p*P)},e.period=function(p){return t(a,p)},e}(1,.3),j=function t(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=P);function e(t){return((t=2*t-1)<0?a*w(-t)*Math.sin((s-t)/p):2-a*w(t)*Math.sin((s+t)/p))/2}return e.amplitude=function(a){return t(a,p*P)},e.period=function(p){return t(a,p)},e}(1,.3)},747:function(t,e,n){"use strict";n.r(e),n.d(e,"arc",(function(){return D})),n.d(e,"area",(function(){return z})),n.d(e,"line",(function(){return I})),n.d(e,"pie",(function(){return B})),n.d(e,"areaRadial",(function(){return G})),n.d(e,"radialArea",(function(){return G})),n.d(e,"lineRadial",(function(){return U})),n.d(e,"radialLine",(function(){return U})),n.d(e,"pointRadial",(function(){return W})),n.d(e,"linkHorizontal",(function(){return nt})),n.d(e,"linkVertical",(function(){return it})),n.d(e,"linkRadial",(function(){return at})),n.d(e,"symbol",(function(){return At})),n.d(e,"symbols",(function(){return wt})),n.d(e,"symbolCircle",(function(){return circle})),n.d(e,"symbolCross",(function(){return ot})),n.d(e,"symbolDiamond",(function(){return ut})),n.d(e,"symbolSquare",(function(){return pt})),n.d(e,"symbolStar",(function(){return gt})),n.d(e,"symbolTriangle",(function(){return vt})),n.d(e,"symbolWye",(function(){return Tt})),n.d(e,"curveBasisClosed",(function(){return Lt})),n.d(e,"curveBasisOpen",(function(){return Ft})),n.d(e,"curveBasis",(function(){return Ct})),n.d(e,"curveBundle",(function(){return Et})),n.d(e,"curveCardinalClosed",(function(){return Pt})),n.d(e,"curveCardinalOpen",(function(){return Yt})),n.d(e,"curveCardinal",(function(){return zt})),n.d(e,"curveCatmullRomClosed",(function(){return Gt})),n.d(e,"curveCatmullRomOpen",(function(){return qt})),n.d(e,"curveCatmullRom",(function(){return Vt})),n.d(e,"curveLinearClosed",(function(){return $t})),n.d(e,"curveLinear",(function(){return R})),n.d(e,"curveMonotoneX",(function(){return re})),n.d(e,"curveMonotoneY",(function(){return ae})),n.d(e,"curveNatural",(function(){return ce})),n.d(e,"curveStep",(function(){return le})),n.d(e,"curveStepAfter",(function(){return he})),n.d(e,"curveStepBefore",(function(){return de})),n.d(e,"stack",(function(){return xe})),n.d(e,"stackOffsetExpand",(function(){return ve})),n.d(e,"stackOffsetDiverging",(function(){return _e})),n.d(e,"stackOffsetNone",(function(){return fe})),n.d(e,"stackOffsetSilhouette",(function(){return ye})),n.d(e,"stackOffsetWiggle",(function(){return me})),n.d(e,"stackOrderAppearance",(function(){return be})),n.d(e,"stackOrderAscending",(function(){return we})),n.d(e,"stackOrderDescending",(function(){return ke})),n.d(e,"stackOrderInsideOut",(function(){return Se})),n.d(e,"stackOrderNone",(function(){return ge})),n.d(e,"stackOrderReverse",(function(){return Me}));var path=n(1613),r=function(t){return function(){return t}},o=Math.abs,c=Math.atan2,l=Math.cos,d=Math.max,h=Math.min,f=Math.sin,x=Math.sqrt,v=1e-12,_=Math.PI,y=_/2,m=2*_;function T(t){return t>1?0:t<-1?_:Math.acos(t)}function w(t){return t>=1?y:t<=-1?-y:Math.asin(t)}function A(t){return t.innerRadius}function k(t){return t.outerRadius}function S(t){return t.startAngle}function M(t){return t.endAngle}function C(t){return t&&t.padAngle}function O(t,e,n,r,o,c,l,d){var h=n-t,f=r-e,x=l-o,_=d-c,y=_*h-x*f;if(!(y*y<v))return[t+(y=(x*(e-c)-_*(t-o))/y)*h,e+y*f]}function L(t,e,n,r,o,c,l){var h=t-n,f=e-r,v=(l?c:-c)/x(h*h+f*f),_=v*f,y=-v*h,m=t+_,T=e+y,w=n+_,A=r+y,k=(m+w)/2,S=(T+A)/2,M=w-m,C=A-T,O=M*M+C*C,L=o-c,D=m*A-w*T,F=(C<0?-1:1)*x(d(0,L*L*O-D*D)),R=(D*C-M*F)/O,E=(-D*M-C*F)/O,X=(D*C+M*F)/O,I=(-D*M+C*F)/O,z=R-k,N=E-S,P=X-k,B=I-S;return z*z+N*N>P*P+B*B&&(R=X,E=I),{cx:R,cy:E,x01:-_,y01:-y,x11:R*(o/L-1),y11:E*(o/L-1)}}var D=function(){var t=A,e=k,n=r(0),d=null,D=S,F=M,R=C,E=null;function X(){var r,A,k=+t.apply(this,arguments),S=+e.apply(this,arguments),M=D.apply(this,arguments)-y,C=F.apply(this,arguments)-y,X=o(C-M),I=C>M;if(E||(E=r=Object(path.a)()),S<k&&(A=S,S=k,k=A),S>v)if(X>m-v)E.moveTo(S*l(M),S*f(M)),E.arc(0,0,S,M,C,!I),k>v&&(E.moveTo(k*l(C),k*f(C)),E.arc(0,0,k,C,M,I));else{var z,N,P=M,B=C,Y=M,j=C,H=X,V=X,U=R.apply(this,arguments)/2,rp=U>v&&(d?+d.apply(this,arguments):x(k*k+S*S)),G=h(o(S-k)/2,+n.apply(this,arguments)),W=G,Z=G;if(rp>v){var $=w(rp/k*f(U)),J=w(rp/S*f(U));(H-=2*$)>v?(Y+=$*=I?1:-1,j-=$):(H=0,Y=j=(M+C)/2),(V-=2*J)>v?(P+=J*=I?1:-1,B-=J):(V=0,P=B=(M+C)/2)}var Q=S*l(P),K=S*f(P),tt=k*l(j),et=k*f(j);if(G>v){var nt,it=S*l(B),at=S*f(B),ot=k*l(Y),st=k*f(Y);if(X<_&&(nt=O(Q,K,ot,st,it,at,tt,et))){var ct=Q-nt[0],ut=K-nt[1],lt=it-nt[0],ht=at-nt[1],ft=1/f(T((ct*lt+ut*ht)/(x(ct*ct+ut*ut)*x(lt*lt+ht*ht)))/2),gt=x(nt[0]*nt[0]+nt[1]*nt[1]);W=h(G,(k-gt)/(ft-1)),Z=h(G,(S-gt)/(ft+1))}}V>v?Z>v?(z=L(ot,st,Q,K,S,Z,I),N=L(it,at,tt,et,S,Z,I),E.moveTo(z.cx+z.x01,z.cy+z.y01),Z<G?E.arc(z.cx,z.cy,Z,c(z.y01,z.x01),c(N.y01,N.x01),!I):(E.arc(z.cx,z.cy,Z,c(z.y01,z.x01),c(z.y11,z.x11),!I),E.arc(0,0,S,c(z.cy+z.y11,z.cx+z.x11),c(N.cy+N.y11,N.cx+N.x11),!I),E.arc(N.cx,N.cy,Z,c(N.y11,N.x11),c(N.y01,N.x01),!I))):(E.moveTo(Q,K),E.arc(0,0,S,P,B,!I)):E.moveTo(Q,K),k>v&&H>v?W>v?(z=L(tt,et,it,at,k,-W,I),N=L(Q,K,ot,st,k,-W,I),E.lineTo(z.cx+z.x01,z.cy+z.y01),W<G?E.arc(z.cx,z.cy,W,c(z.y01,z.x01),c(N.y01,N.x01),!I):(E.arc(z.cx,z.cy,W,c(z.y01,z.x01),c(z.y11,z.x11),!I),E.arc(0,0,k,c(z.cy+z.y11,z.cx+z.x11),c(N.cy+N.y11,N.cx+N.x11),I),E.arc(N.cx,N.cy,W,c(N.y11,N.x11),c(N.y01,N.x01),!I))):E.arc(0,0,k,j,Y,I):E.lineTo(tt,et)}else E.moveTo(0,0);if(E.closePath(),r)return E=null,r+""||null}return X.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,a=(+D.apply(this,arguments)+ +F.apply(this,arguments))/2-_/2;return[l(a)*n,f(a)*n]},X.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:r(+e),X):t},X.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:r(+t),X):e},X.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:r(+t),X):n},X.padRadius=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:r(+t),X):d},X.startAngle=function(t){return arguments.length?(D="function"==typeof t?t:r(+t),X):D},X.endAngle=function(t){return arguments.length?(F="function"==typeof t?t:r(+t),X):F},X.padAngle=function(t){return arguments.length?(R="function"==typeof t?t:r(+t),X):R},X.context=function(t){return arguments.length?(E=null==t?null:t,X):E},X};function F(t){this._context=t}F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var R=function(t){return new F(t)};function E(p){return p[0]}function X(p){return p[1]}var I=function(){var t=E,e=X,n=r(!0),o=null,c=R,output=null;function line(data){var i,r,l,d=data.length,h=!1;for(null==o&&(output=c(l=Object(path.a)())),i=0;i<=d;++i)!(i<d&&n(r=data[i],i,data))===h&&((h=!h)?output.lineStart():output.lineEnd()),h&&output.point(+t(r,i,data),+e(r,i,data));if(l)return output=null,l+""||null}return line.x=function(e){return arguments.length?(t="function"==typeof e?e:r(+e),line):t},line.y=function(t){return arguments.length?(e="function"==typeof t?t:r(+t),line):e},line.defined=function(t){return arguments.length?(n="function"==typeof t?t:r(!!t),line):n},line.curve=function(t){return arguments.length?(c=t,null!=o&&(output=c(o)),line):c},line.context=function(t){return arguments.length?(null==t?o=output=null:output=c(o=t),line):o},line},z=function(){var t=E,e=null,n=r(0),o=X,c=r(!0),l=null,d=R,output=null;function area(data){var i,r,h,f,x,v=data.length,_=!1,y=new Array(v),m=new Array(v);for(null==l&&(output=d(x=Object(path.a)())),i=0;i<=v;++i){if(!(i<v&&c(f=data[i],i,data))===_)if(_=!_)r=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),h=i-1;h>=r;--h)output.point(y[h],m[h]);output.lineEnd(),output.areaEnd()}_&&(y[i]=+t(f,i,data),m[i]=+n(f,i,data),output.point(e?+e(f,i,data):y[i],o?+o(f,i,data):m[i]))}if(x)return output=null,x+""||null}function h(){return I().defined(c).curve(d).context(l)}return area.x=function(n){return arguments.length?(t="function"==typeof n?n:r(+n),e=null,area):t},area.x0=function(e){return arguments.length?(t="function"==typeof e?e:r(+e),area):t},area.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:r(+t),area):e},area.y=function(t){return arguments.length?(n="function"==typeof t?t:r(+t),o=null,area):n},area.y0=function(t){return arguments.length?(n="function"==typeof t?t:r(+t),area):n},area.y1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:r(+t),area):o},area.lineX0=area.lineY0=function(){return h().x(t).y(n)},area.lineY1=function(){return h().x(t).y(o)},area.lineX1=function(){return h().x(e).y(n)},area.defined=function(t){return arguments.length?(c="function"==typeof t?t:r(!!t),area):c},area.curve=function(t){return arguments.length?(d=t,null!=l&&(output=d(l)),area):d},area.context=function(t){return arguments.length?(null==t?l=output=null:output=d(l=t),area):l},area},N=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},P=function(t){return t},B=function(){var t=P,e=N,n=null,o=r(0),c=r(m),l=r(0);function d(data){var i,r,d,h,f,x=data.length,v=0,_=new Array(x),y=new Array(x),T=+o.apply(this,arguments),w=Math.min(m,Math.max(-m,c.apply(this,arguments)-T)),p=Math.min(Math.abs(w)/x,l.apply(this,arguments)),A=p*(w<0?-1:1);for(i=0;i<x;++i)(f=y[_[i]=i]=+t(data[i],i,data))>0&&(v+=f);for(null!=e?_.sort((function(i,t){return e(y[i],y[t])})):null!=n&&_.sort((function(i,t){return n(data[i],data[t])})),i=0,d=v?(w-x*A)/v:0;i<x;++i,T=h)r=_[i],h=T+((f=y[r])>0?f*d:0)+A,y[r]={data:data[r],index:i,value:f,startAngle:T,endAngle:h,padAngle:p};return y}return d.value=function(e){return arguments.length?(t="function"==typeof e?e:r(+e),d):t},d.sortValues=function(t){return arguments.length?(e=t,n=null,d):e},d.sort=function(t){return arguments.length?(n=t,e=null,d):n},d.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:r(+t),d):o},d.endAngle=function(t){return arguments.length?(c="function"==typeof t?t:r(+t),d):c},d.padAngle=function(t){return arguments.length?(l="function"==typeof t?t:r(+t),d):l},d},Y=H(R);function j(t){this._curve=t}function H(t){function e(e){return new j(t(e))}return e._curve=t,e}function V(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(H(t)):e()._curve},t}j.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,t){this._curve.point(t*Math.sin(a),t*-Math.cos(a))}};var U=function(){return V(I().curve(Y))},G=function(){var a=z().curve(Y),t=a.curve,e=a.lineX0,n=a.lineX1,r=a.lineY0,o=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return V(e())},delete a.lineX0,a.lineEndAngle=function(){return V(n())},delete a.lineX1,a.lineInnerRadius=function(){return V(r())},delete a.lineY0,a.lineOuterRadius=function(){return V(o())},delete a.lineY1,a.curve=function(e){return arguments.length?t(H(e)):t()._curve},a},W=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Z=Array.prototype.slice;function $(t){return t.source}function J(t){return t.target}function Q(t){var source=$,e=J,n=E,o=X,c=null;function link(){var r,l=Z.call(arguments),s=source.apply(this,l),d=e.apply(this,l);if(c||(c=r=Object(path.a)()),t(c,+n.apply(this,(l[0]=s,l)),+o.apply(this,l),+n.apply(this,(l[0]=d,l)),+o.apply(this,l)),r)return c=null,r+""||null}return link.source=function(t){return arguments.length?(source=t,link):source},link.target=function(t){return arguments.length?(e=t,link):e},link.x=function(t){return arguments.length?(n="function"==typeof t?t:r(+t),link):n},link.y=function(t){return arguments.length?(o="function"==typeof t?t:r(+t),link):o},link.context=function(t){return arguments.length?(c=null==t?null:t,link):c},link}function K(t,e,n,r,o){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,o,r,o)}function tt(t,e,n,r,o){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+o)/2,r,n,r,o)}function et(t,e,n,r,o){var c=W(e,n),l=W(e,n=(n+o)/2),d=W(r,n),h=W(r,o);t.moveTo(c[0],c[1]),t.bezierCurveTo(l[0],l[1],d[0],d[1],h[0],h[1])}function nt(){return Q(K)}function it(){return Q(tt)}function at(){var t=Q(et);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var circle={draw:function(t,e){var n=Math.sqrt(e/_);t.moveTo(n,0),t.arc(0,0,n,0,m)}},ot={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},st=Math.sqrt(1/3),ct=2*st,ut={draw:function(t,e){var n=Math.sqrt(e/ct),r=n*st;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},lt=Math.sin(_/10)/Math.sin(7*_/10),ht=Math.sin(m/10)*lt,ft=-Math.cos(m/10)*lt,gt={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=ht*n,o=ft*n;t.moveTo(0,-n),t.lineTo(r,o);for(var i=1;i<5;++i){var a=m*i/5,c=Math.cos(a),s=Math.sin(a);t.lineTo(s*n,-c*n),t.lineTo(c*r-s*o,s*r+c*o)}t.closePath()}},pt={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},xt=Math.sqrt(3),vt={draw:function(t,e){var n=-Math.sqrt(e/(3*xt));t.moveTo(0,2*n),t.lineTo(-xt*n,-n),t.lineTo(xt*n,-n),t.closePath()}},_t=-.5,yt=Math.sqrt(3)/2,mt=1/Math.sqrt(12),bt=3*(mt/2+1),Tt={draw:function(t,e){var n=Math.sqrt(e/bt),r=n/2,o=n*mt,c=r,l=n*mt+n,d=-c,h=l;t.moveTo(r,o),t.lineTo(c,l),t.lineTo(d,h),t.lineTo(_t*r-yt*o,yt*r+_t*o),t.lineTo(_t*c-yt*l,yt*c+_t*l),t.lineTo(_t*d-yt*h,yt*d+_t*h),t.lineTo(_t*r+yt*o,_t*o-yt*r),t.lineTo(_t*c+yt*l,_t*l-yt*c),t.lineTo(_t*d+yt*h,_t*h-yt*d),t.closePath()}},wt=[circle,ot,ut,pt,gt,vt,Tt],At=function(){var t=r(circle),e=r(64),n=null;function symbol(){var r;if(n||(n=r=Object(path.a)()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return symbol.type=function(e){return arguments.length?(t="function"==typeof e?e:r(e),symbol):t},symbol.size=function(t){return arguments.length?(e="function"==typeof t?t:r(+t),symbol):e},symbol.context=function(t){return arguments.length?(n=null==t?null:t,symbol):n},symbol},kt=function(){};function St(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Mt(t){this._context=t}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:St(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:St(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Ct=function(t){return new Mt(t)};function Ot(t){this._context=t}Ot.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:St(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Lt=function(t){return new Ot(t)};function Dt(t){this._context=t}Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:St(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Ft=function(t){return new Dt(t)};function Rt(t,e){this._basis=new Mt(t),this._beta=e}Rt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,o=t[0],c=e[0],l=t[n]-o,d=e[n]-c,i=-1;++i<=n;)r=i/n,this._basis.point(this._beta*t[i]+(1-this._beta)*(o+r*l),this._beta*e[i]+(1-this._beta)*(c+r*d));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Et=function t(e){function n(t){return 1===e?new Mt(t):new Rt(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Xt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function It(t,e){this._context=t,this._k=(1-e)/6}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Xt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zt=function t(e){function n(t){return new It(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Nt(t,e){this._context=t,this._k=(1-e)/6}Nt.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Xt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pt=function t(e){function n(t){return new Nt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Bt(t,e){this._context=t,this._k=(1-e)/6}Bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Yt=function t(e){function n(t){return new Bt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function jt(t,e,n){var r=t._x1,o=t._y1,c=t._x2,l=t._y2;if(t._l01_a>v){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,d=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/d,o=(o*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/d}if(t._l23_a>v){var b=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);c=(c*b+t._x1*t._l23_2a-e*t._l12_2a)/h,l=(l*b+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,o,c,l,t._x2,t._y2)}function Ht(t,e){this._context=t,this._alpha=e}Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:jt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Vt=function t(e){function n(t){return e?new Ht(t,e):new It(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ut(t,e){this._context=t,this._alpha=e}Ut.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:jt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gt=function t(e){function n(t){return e?new Ut(t,e):new Nt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Wt(t,e){this._context=t,this._alpha=e}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var qt=function t(e){function n(t){return e?new Wt(t,e):new Bt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Zt(t){this._context=t}Zt.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var $t=function(t){return new Zt(t)};function Jt(t){return t<0?-1:1}function Qt(t,e,n){var r=t._x1-t._x0,h1=e-t._x1,o=(t._y1-t._y0)/(r||h1<0&&-0),c=(n-t._y1)/(h1||r<0&&-0),p=(o*h1+c*r)/(r+h1);return(Jt(o)+Jt(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(p))||0}function Kt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function te(t,e,n){var r=t._x0,o=t._y0,c=t._x1,l=t._y1,d=(c-r)/3;t._context.bezierCurveTo(r+d,o+d*e,c-d,l-d*n,c,l)}function ee(t){this._context=t}function ne(t){this._context=new ie(t)}function ie(t){this._context=t}function re(t){return new ee(t)}function ae(t){return new ne(t)}function oe(t){this._context=t}function se(t){var i,e,n=t.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=t[0]+2*t[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*t[i]+2*t[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*t[n-1]+t[n],i=1;i<n;++i)e=a[i]/b[i-1],b[i]-=e,r[i]-=e*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(t[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*t[i+1]-a[i+1];return[a,b]}ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:te(this,this._t0,Kt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,te(this,Kt(this,n=Qt(this,t,e)),n);break;default:te(this,this._t0,n=Qt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ne.prototype=Object.create(ee.prototype)).point=function(t,e){ee.prototype.point.call(this,e,t)},ie.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,c){this._context.bezierCurveTo(e,t,r,n,c,o)}},oe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=se(t),o=se(e),c=0,l=1;l<n;++c,++l)this._context.bezierCurveTo(r[0][c],o[0][c],r[1][c],o[1][c],t[l],e[l]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ce=function(t){return new oe(t)};function ue(t,e){this._context=t,this._t=e}ue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var le=function(t){return new ue(t,.5)};function de(t){return new ue(t,0)}function he(t){return new ue(t,1)}var fe=function(t,e){if((o=t.length)>1)for(var n,r,o,i=1,c=t[e[0]],l=c.length;i<o;++i)for(r=c,c=t[e[i]],n=0;n<l;++n)c[n][1]+=c[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},ge=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function pe(t,e){return t[e]}var xe=function(){var t=r([]),e=ge,n=fe,o=pe;function c(data){var i,r,c=t.apply(this,arguments),l=data.length,d=c.length,h=new Array(d);for(i=0;i<d;++i){for(var f,x=c[i],v=h[i]=new Array(l),_=0;_<l;++_)v[_]=f=[0,+o(data[_],x,_,data)],f.data=data[_];v.key=x}for(i=0,r=e(h);i<d;++i)h[r[i]].index=i;return n(h,r),h}return c.keys=function(e){return arguments.length?(t="function"==typeof e?e:r(Z.call(e)),c):t},c.value=function(t){return arguments.length?(o="function"==typeof t?t:r(+t),c):o},c.order=function(t){return arguments.length?(e=null==t?ge:"function"==typeof t?t:r(Z.call(t)),c):e},c.offset=function(t){return arguments.length?(n=null==t?fe:t,c):n},c},ve=function(t,e){if((n=t.length)>0){for(var i,n,r,o=0,c=t[0].length;o<c;++o){for(r=i=0;i<n;++i)r+=t[i][o][1]||0;if(r)for(i=0;i<n;++i)t[i][o][1]/=r}fe(t,e)}},_e=function(t,e){if((l=t.length)>0)for(var i,n,r,o,c,l,d=0,h=t[e[0]].length;d<h;++d)for(o=c=0,i=0;i<l;++i)(r=(n=t[e[i]][d])[1]-n[0])>0?(n[0]=o,n[1]=o+=r):r<0?(n[1]=c,n[0]=c+=r):(n[0]=0,n[1]=r)},ye=function(t,e){if((n=t.length)>0){for(var n,r=0,o=t[e[0]],c=o.length;r<c;++r){for(var i=0,l=0;i<n;++i)l+=t[i][r][1]||0;o[r][1]+=o[r][0]=-l/2}fe(t,e)}},me=function(t,e){if((o=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,o,c=0,l=1;l<r;++l){for(var i=0,d=0,h=0;i<o;++i){for(var f=t[e[i]],x=f[l][1]||0,v=(x-(f[l-1][1]||0))/2,_=0;_<i;++_){var y=t[e[_]];v+=(y[l][1]||0)-(y[l-1][1]||0)}d+=x,h+=v*x}n[l-1][1]+=n[l-1][0]=c,d&&(c-=h/d)}n[l-1][1]+=n[l-1][0]=c,fe(t,e)}},be=function(t){var e=t.map(Te);return ge(t).sort((function(a,b){return e[a]-e[b]}))};function Te(t){for(var e,i=-1,n=0,r=t.length,o=-1/0;++i<r;)(e=+t[i][1])>o&&(o=e,n=i);return n}var we=function(t){var e=t.map(Ae);return ge(t).sort((function(a,b){return e[a]-e[b]}))};function Ae(t){for(var e,s=0,i=-1,n=t.length;++i<n;)(e=+t[i][1])&&(s+=e);return s}var ke=function(t){return we(t).reverse()},Se=function(t){var i,e,n=t.length,r=t.map(Ae),o=be(t),c=0,l=0,d=[],h=[];for(i=0;i<n;++i)e=o[i],c<l?(c+=r[e],d.push(e)):(l+=r[e],h.push(e));return h.reverse().concat(d)},Me=function(t){return ge(t).reverse()}},751:function(t,e,n){"use strict";n.r(e),n.d(e,"dsvFormat",(function(){return f})),n.d(e,"csvParse",(function(){return v})),n.d(e,"csvParseRows",(function(){return _})),n.d(e,"csvFormat",(function(){return y})),n.d(e,"csvFormatBody",(function(){return m})),n.d(e,"csvFormatRows",(function(){return T})),n.d(e,"csvFormatRow",(function(){return w})),n.d(e,"csvFormatValue",(function(){return A})),n.d(e,"tsvParse",(function(){return S})),n.d(e,"tsvParseRows",(function(){return M})),n.d(e,"tsvFormat",(function(){return C})),n.d(e,"tsvFormatBody",(function(){return O})),n.d(e,"tsvFormatRows",(function(){return L})),n.d(e,"tsvFormatRow",(function(){return D})),n.d(e,"tsvFormatValue",(function(){return F})),n.d(e,"autoType",(function(){return R}));var r={},o={};function c(t){return new Function("d","return {"+t.map((function(t,i){return JSON.stringify(t)+": d["+i+'] || ""'})).join(",")+"}")}function l(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function d(t,e){var s=t+"",n=s.length;return n<e?new Array(e-n+1).join(0)+s:s}function h(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),c=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+d(-e,6):e>9999?"+"+d(e,6):d(e,4))+"-"+d(t.getUTCMonth()+1,2)+"-"+d(t.getUTCDate(),2)+(c?"T"+d(n,2)+":"+d(r,2)+":"+d(o,2)+"."+d(c,3)+"Z":o?"T"+d(n,2)+":"+d(r,2)+":"+d(o,2)+"Z":r||n?"T"+d(n,2)+":"+d(r,2)+"Z":"")}var f=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function d(text,t){var e,c=[],l=text.length,d=0,h=0,f=l<=0,x=!1;function v(){if(f)return o;if(x)return x=!1,r;var i,t,e=d;if(34===text.charCodeAt(e)){for(;d++<l&&34!==text.charCodeAt(d)||34===text.charCodeAt(++d););return(i=d)>=l?f=!0:10===(t=text.charCodeAt(d++))?x=!0:13===t&&(x=!0,10===text.charCodeAt(d)&&++d),text.slice(e+1,i-1).replace(/""/g,'"')}for(;d<l;){if(10===(t=text.charCodeAt(i=d++)))x=!0;else if(13===t)x=!0,10===text.charCodeAt(d)&&++d;else if(t!==n)continue;return text.slice(e,i)}return f=!0,text.slice(e,l)}for(10===text.charCodeAt(l-1)&&--l,13===text.charCodeAt(l-1)&&--l;(e=v())!==o;){for(var _=[];e!==r&&e!==o;)_.push(e),e=v();t&&null==(_=t(_,h++))||c.push(_)}return c}function f(e,n){return e.map((function(e){return n.map((function(t){return v(e[t])})).join(t)}))}function x(e){return e.map(v).join(t)}function v(t){return null==t?"":t instanceof Date?h(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(text,t){var e,n,r=d(text,(function(r,i){if(e)return e(r,i-1);n=r,e=t?function(t,e){var object=c(t);return function(n,i){return e(object(n),i,t)}}(r,t):c(r)}));return r.columns=n||[],r},parseRows:d,format:function(e,n){return null==n&&(n=l(e)),[n.map(v).join(t)].concat(f(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=l(t)),f(t,e).join("\n")},formatRows:function(t){return t.map(x).join("\n")},formatRow:x,formatValue:v}},x=f(","),v=x.parse,_=x.parseRows,y=x.format,m=x.formatBody,T=x.formatRows,w=x.formatRow,A=x.formatValue,k=f("\t"),S=k.parse,M=k.parseRows,C=k.format,O=k.formatBody,L=k.formatRows,D=k.formatRow,F=k.formatValue;function R(object){for(var t in object){var e,n,r=object[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(e=+r)){if(!(n=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;E&&n[4]&&!n[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=e;else r=null;object[t]=r}return object}var E=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},885:function(t,e,n){(function(e){var r;r=function(t,n,r,o,c,l,d,h,f,x,v,_,y){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="",n(n.s=0)}([function(t,e,n){n(1),t.exports=n(15)},function(t,e,n){},function(e,n){e.exports=t},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=o},function(t,e){t.exports=c},function(t,e){t.exports=l},function(t,e){t.exports=d},function(t,e){t.exports=h},function(t,e){t.exports=f},function(t,e){t.exports=x},function(t,e){t.exports=v},function(t,e){t.exports=_},function(t,e){t.exports=y},function(t,n,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}r.r(n);var h=r(2),f=r(3),x=r(4),v=r(5),_={arc:"bb-arc",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",zoomRect:"bb-zoom-rect",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};function y(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function T(t){return T="function"==typeof Symbol&&"symbol"===m(Symbol.iterator)?function(t){return m(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":m(t)},T(t)}var w,A=r(6),k=(w=function(t){return void 0!==t&&t})(self)||w(window)||w(e)||w(globalThis)||Function("return this")(),S=k&&k.document,M=function(t){return t||0===t},C=function(t){return"function"==typeof t},O=function(t){return"string"==typeof t},L=function(t){return"number"==typeof t},D=function(t){return void 0===t},F=function(t){return void 0!==t},R=function(t){return"boolean"==typeof t},E=function(t){return 10*Math.ceil(t/10)},X=function(t){return Math.ceil(t)+.5},I=function(t){return t[1]-t[0]},z=function(t){return"object"===T(t)},N=function(t){return D(t)||null===t||O(t)&&0===t.length||z(t)&&!(t instanceof Date)&&0===Object.keys(t).length||L(t)&&isNaN(t)},P=function(t){return!N(t)},B=function(t){return t&&t.constructor===Array},Y=function(t){return t&&!t.nodeType&&z(t)&&!B(t)},j=function(t,e,n){return F(t[e])?t[e]:n},H=function(t){for(var e=C(t),n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e&&t.call.apply(t,r),e},V=function(t){return O(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},U=function(t,text){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-1,1],n=!!(arguments.length>3&&void 0!==arguments[3])&&arguments[3];if(t&&O(text))if(-1===text.indexOf("\n"))t.text(text);else{var r=[t.text(),text].map((function(t){return t.replace(/[\s\n]/g,"")}));if(r[0]!==r[1]){var o=text.split("\n"),c=n?o.length-1:1;t.html(""),o.forEach((function(n,i){t.append("tspan").attr("x",0).attr("dy","".concat(0===i?e[0]*c:e[1],"em")).text(n)}))}}},G=function(path){var t=path.getBBox(),e=t.x,n=t.y,r=t.width,o=t.height;return[{x:e,y:n+o},{x:e,y:n},{x:e+r,y:n},{x:e+r,y:n+o}]},W=function(t){var e=null,n=f.event,main=t.context||t.main;return n&&"BrushEvent"===n.constructor.name?e=n.selection:main&&(e=main.select(".".concat(_.brush)).node())&&(e=Object(A.brushSelection)(e)),e},Z=function(t){return t.rect||(t.rect=t.getBoundingClientRect())},$=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Math.random()+(t?"":0)},J=function(t){var e=W(t);return!e||e[0]===e[1]},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},source=arguments.length>1?arguments[1]:void 0;for(var p in source)t[p]=source[p];return t},K=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},tt=function(t){return[].slice.call(t)},et=function(data){var t=data[0]instanceof Date,e=(t?data.map(Number):data).filter((function(t,i,e){return e.indexOf(t)===i}));return t?e.map((function(t){return new Date(t)})):e},nt=function(t){return t&&t.length?t.reduce((function(p,t){return p.concat(t)})):[]},it=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length||1===n.length&&!n[0])return t;var source=n.shift();return Y(t)&&Y(source)&&Object.keys(source).forEach((function(e){var n=source[e];Y(n)?(!t[e]&&(t[e]={}),t[e]=it(t[e],n)):t[e]=B(n)?n.concat():n})),it.apply(void 0,[t].concat(n))})),at=function(data){var t,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return data[0]instanceof Date?t=e?function(a,b){return a-b}:function(a,b){return b-a}:e&&!data.every(isNaN)?t=function(a,b){return a-b}:!e&&(t=function(a,b){return(a>b?-1:a<b&&1)||a===b&&0}),data.concat().sort(t)},ot=function(t,data){var e=data.filter((function(t){return P(t)}));return e.length?L(e[0])?e=Math[t].apply(Math,y(e)):e[0]instanceof Date&&(e=at(e,"min"===t)[0]):e=void 0,e},st=function(t,e){for(var n=[],i=t;i<e;i++)n.push(i);return n},ct={mouse:function(){try{return new MouseEvent("t"),function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0};t.dispatchEvent(new MouseEvent(e,n))}}catch(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0},r=S.createEvent("MouseEvent");r.initMouseEvent(e,n.bubbles,n.cancelable,k,0,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}}(),touch:function(t,e,n){var r=new Touch(it({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[r],targetTouches:[],changedTouches:[r]}))}},ut=function(t,data){var e=t;for(var n in data)e=e.replace(new RegExp("{=".concat(n,"}"),"g"),data[n]);return e},lt=r(7),ht=function(){function t(e,n){o(this,t);var r=Object(lt.scaleLinear)();this.config=e,this.scale=r,(e.noTransition||!n.config.transition_duration)&&(e.withoutTransition=!0),e.range=r.rangeExtent?r.rangeExtent():this.scaleExtent((n.orgXScale||r).range())}return d(t,[{key:"axisX",value:function(t,e){var n=this;t.attr("transform",(function(t){return"translate(".concat(Math.ceil(e(t)+n.config.tickOffset),",0)")}))}},{key:"axisY",value:function(t,e){t.attr("transform",(function(t){return"translate(0,".concat(Math.ceil(e(t)),")")}))}},{key:"scaleExtent",value:function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}},{key:"generateTicks",value:function(t){var e=[];if(t.ticks)return t.ticks.apply(t,y(this.config.tickArguments||[])).map((function(t){return O(t)&&L(t)&&!isNaN(t)&&Math.round(10*t)/10||t}));for(var n=t.domain(),i=Math.ceil(n[0]);i<n[1];i++)e.push(i);return e.length>0&&e[0]>0&&e.unshift(e[0]-(e[1]-e[0])),e}},{key:"copyScale",value:function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t}},{key:"textFormatted",value:function(t){var e=this.config.tickFormat,n=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,r=e?e(n):n;return F(r)?r:""}},{key:"transitionise",value:function(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)}}],[{key:"getSizeFor1Char",value:function(t){var e={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call((function(t){try{var n=t.node().getBBox(),r=n.width,o=n.height;r&&o&&(e.w=r,e.h=o),t.text("")}catch(t){}})),this.getSizeFor1Char=function(){return e},e}}]),t}(),ft=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n={innerTickSize:6,outerTickSize:e.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:e.noTransition};n.tickLength=Math.max(n.innerTickSize,0)+n.tickPadding,this.helper=new ht(n,e),this.config=n,this.params=e}return d(t,[{key:"create",value:function(g){var t=this,e=this.config,n=this.params,r=this.helper,o=r.scale,c=e.orient,l=this.splitTickText.bind(this),d=/^(left|right)$/.test(c),h=/^(top|bottom)$/.test(c),x=r[h?"axisX":"axisY"],v=x===r.axisX?"y":"x",_=/^(top|left)$/.test(c)?-1:1,y=n.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():r.scaleExtent((n.orgXScale||o).range());var m=e,T=m.innerTickSize,w=m.tickLength,A=m.range,k=n.name,S=k&&/^(x|y|y2)$/.test(k)?n.config["axis_".concat(k,"_tick_text_position")]:{x:0,y:0},M="subX"===k?"subchart_axis_x":"axis_".concat(k),C=n.config["".concat(M,"_show")],O=!!C&&n.config["".concat(M,"_tick_show")],D=!!C&&n.config["".concat(M,"_tick_text_show")],F=null;g.each((function(){var g=Object(f.select)(this),m=this.__chart__||o,k=r.copyScale();F=g,this.__chart__=k,e.tickOffset=n.isCategory?Math.ceil((k(1)-k(0))/2):0;var path=g.selectAll(".domain").data([0]);if(path.enter().append("path").attr("class","domain").merge(r.transitionise(path)).attr("d",(function(){var t=e.outerTickSize*_;return h?"M".concat(A[0],",").concat(t,"V0H").concat(A[1],"V").concat(t):"M".concat(t,",").concat(A[0],"H0V").concat(A[1],"H").concat(t)})),O||D){var M=e.tickValues||r.generateTicks(k),C=g.selectAll(".tick").data(M,k),R=C.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),E=C.exit().remove();C=R.merge(C),O&&R.append("line"),D&&R.append("text");var X=ht.getSizeFor1Char(C),I=[],tspan=C.select("text").selectAll("tspan").data((function(t,e){var o=n.tickMultiline?l(t,k,M,d,X.w):B(r.textFormatted(t))?r.textFormatted(t).concat():[r.textFormatted(t)];return I[e]=o.length,o.map((function(t){return{index:e,splitted:t}}))}));tspan.exit().remove(),(tspan=tspan.enter().append("tspan").merge(tspan).text((function(t){return t.splitted}))).attr("x",h?0:w*_).attr("dx",function(){var t=0;return"bottom"===c&&y&&(t=8*Math.sin(Math.PI*(y/180))),t+(S.x||0)}()).attr("dy",(function(t,i){var e=0;return"top"!==c&&(e=X.h,0===i&&(e=d?-((I[t.index]-1)*(X.h/2)-3):0===S.y?".71em":0)),L(e)&&S.y?e+S.y:e||".71em"}));var z=C.select("line"),N=C.select("text");if(R.select("line").attr("".concat(v,"2"),T*_),R.select("text").attr("".concat(v),w*_),t.setTickLineTextPosition(z,N),n.tickTitle&&N.append&&N.append("title").each((function(t){Object(f.select)(this).text(n.tickTitle[t])})),k.bandwidth){var P=k,Y=P.bandwidth()/2;k=m=function(t){return P(t)+Y}}else m.bandwidth?m=k:x.call(r,E,k);x.call(r,R,m),x.call(r,r.transitionise(C).style("opacity","1"),k)}})),this.g=F}},{key:"getTickXY",value:function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e}},{key:"getTickSize",value:function(t){var e=this.helper.scale,n=this.config,r=n.innerTickSize,o=n.range,c=e(t)+(n.tickCentered?0:n.tickOffset);return o[0]<c&&c<o[1]?r:0}},{key:"setTickLineTextPosition",value:function(t,e){var n,r=this.getTickXY(),o=this.config,c=o.innerTickSize,l=o.orient,d=o.tickLength,h=o.tickOffset,f=this.params.tickTextRotate;"bottom"===l?(t.attr("x1",r.x).attr("x2",r.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",(n=f,n?11.5-n/15*2.5*(n>0?1:-1):d)).style("text-anchor",function(t){return t?t>0?"start":"end":"middle"}(f)).attr("transform",function(t){return t?"rotate(".concat(t,")"):null}(f))):"top"===l?(t.attr("x2",0).attr("y2",-c),e.attr("x",0).attr("y",2*-d).style("text-anchor","middle")):"left"===l?(t.attr("x2",-c).attr("y1",r.y).attr("y2",r.y),e.attr("x",-d).attr("y",h).style("text-anchor","end")):"right"===l&&(t.attr("x2",c).attr("y2",0),e.attr("x",d).attr("y",0).style("text-anchor","start"))}},{key:"splitTickText",value:function(t,e,n,r,o){var c=this.params,l=this.helper.textFormatted(t),d=O(l)&&l.indexOf("\n")>-1?l.split("\n"):[];if(d.length)return d;if(B(l))return l;var h=c.tickWidth;return(!h||h<=0)&&(h=r?95:c.isCategory?Math.ceil(e(n[1])-e(n[0]))-12:110),function t(e,text){for(var n,r,c,i=1;i<text.length;i++)if(" "===text.charAt(i)&&(r=i),n=text.substr(0,i+1),c=o*n.length,h<c)return t(e.concat(text.substr(0,r||i)),text.slice(r?r+1:i));return e.concat(text)}(d,l+"")}},{key:"scale",value:function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale}},{key:"orient",value:function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient}},{key:"tickFormat",value:function(t){return arguments.length?(this.config.tickFormat=t,this):this.config.tickFormat}},{key:"tickCentered",value:function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered}},{key:"tickOffset",value:function(){return this.config.tickOffset}},{key:"tickInterval",value:function(t){var e;return(e=this.params.isCategory?2*this.config.tickOffset:(this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize)/(t||this.g.selectAll("line").size()))===1/0?0:e}},{key:"ticks",value:function(){for(var t=this.config,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length?(t.tickArguments=tt(n),this):t.tickArguments}},{key:"tickCulling",value:function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling}},{key:"tickValues",value:function(t){var e=this,n=this.config;if(C(t))n.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this}},{key:"setTransition",value:function(t){return this.config.transition=t,this}}]),t}(),gt=function(t,e){var n=t.config.axis_rotated;return e?n:!n},pt=function(t){return"".concat(_.axis," ").concat(_["axis".concat(K(t))])},xt=function(){function t(e){o(this,t),this.owner=e,this.setOrient()}return d(t,[{key:"init",value:function(){var t=this,e=this.owner,n=e.config,r=n.axis_rotated,main=e.main,o=["x","y"];n.axis_y2_show&&o.push("y2"),e.axesList={},o.forEach((function(o){var c=pt(o),l=o.toUpperCase(),d=_["axis".concat(l,"Label")];e.axes[o]=main.append("g").attr("class",c).attr("clip-path",(function(){var t=null;return"x"===o?t=e.clipPathForXAxis:"y"===o&&n.axis_y_inner&&(t=e.clipPathForYAxis),t})).attr("transform",e.getTranslate(o)).style("visibility",n["axis_".concat(o,"_show")]?"visible":"hidden"),e.axes[o].append("text").attr("class",d).attr("transform",["rotate(-90)",null]["x"===o?+!r:+r]).style("text-anchor",t["textAnchorFor".concat(l,"AxisLabel")].bind(t)),t.generateAxes(o)}))}},{key:"setOrient",value:function(){var t=this.owner,e=t.config,n=e.axis_rotated,r=e.axis_y_inner,o=e.axis_y2_inner;t.xOrient=n?"left":"bottom",t.yOrient=n?r?"top":"bottom":r?"right":"left",t.y2Orient=n?o?"bottom":"top":o?"left":"right",t.subXOrient=n?"left":"bottom"}},{key:"generateAxes",value:function(t){var e,n=this.owner,r=n.config,o=[],c=r["axis_".concat(t,"_axes")],l=r.axis_rotated;"x"===t?e=l?v.axisLeft:v.axisBottom:"y"===t?e=l?v.axisBottom:v.axisLeft:"y2"===t&&(e=l?v.axisTop:v.axisRight),c.length&&c.forEach((function(r){var c=r.tick||{},l=n[t].copy();r.domain&&l.domain(r.domain),o.push(e(l).ticks(c.count).tickFormat(c.format||function(t){return t}).tickValues(c.values).tickSizeOuter(!1===c.outer?0:6))})),n.axesList[t]=o}},{key:"updateAxes",value:function(){var t=this.owner,e=t.config;Object.keys(t.axesList).forEach((function(n){var r=e["axis_".concat(n,"_axes")],o=t[n].copy(),c=o.range();t.axesList[n].forEach((function(l,i){var d=l.scale().range();c.every((function(t,i){return t===d[i]}))||l.scale().range(c);var h="".concat(pt(n),"-").concat(i+1),g=t.main.select(".".concat(h.replace(/\s/,".")));g.empty()?g=t.main.append("g").attr("class",h).style("visibility",e["axis_".concat(n,"_show")]?"visible":"hidden").call(l):(r[i].domain&&o.domain(r[i].domain),t.xAxis.helper.transitionise(g).call(l.scale(o))),g.attr("transform",t.getTranslate(n,i+1))}))}))}},{key:"getAxis",value:function(t,e,n,r,o){var c=this.owner,l=c.config,d=/^(x|subX)$/.test(t),h=d?"x":"y",f=d&&c.isCategorized(),x=c["".concat(t,"Orient")],v=d?c.xAxisTickFormat:l["axis_".concat(t,"_tick_format")],_=d?c.xAxisTickValues:c["".concat(t,"AxisTickValues")],y=it({outerTick:n,noTransition:r,config:l,name:t,tickTextRotate:o?0:l["axis_".concat(h,"_tick_rotate")]},d&&{isCategory:f,tickMultiline:l.axis_x_tick_multiline,tickWidth:l.axis_x_tick_width,tickTitle:f&&l.axis_x_tick_tooltip&&c.api.categories(),orgXScale:c.x}),m=new ft(y).scale(d&&c.zoomScale||e).orient(x);return d&&c.isTimeSeries()&&_&&!C(_)?_=_.map((function(t){return c.parseDate(t)})):!d&&c.isTimeSeriesY()&&(m.ticks(l.axis_y_tick_time_value),_=null),_&&m.tickValues(_),m.tickFormat(v||!d&&c.isStackNormalized()&&function(t){return"".concat(t,"%")}),f&&(m.tickCentered(l.axis_x_tick_centered),N(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1)),l["axis_".concat(h,"_tick_count")]&&m.ticks(l["axis_".concat(h,"_tick_count")]),m}},{key:"updateXAxisTickValues",value:function(t,e){var n,r=this.owner,o=r.config,c=o.axis_x_tick_fit,l=o.axis_x_tick_count;return(c||l&&c)&&(n=this.generateTickValues(r.mapTargetsToUniqueXs(t),l,r.isTimeSeries())),e?e.tickValues(n):r.xAxis&&(r.xAxis.tickValues(n),r.subXAxis.tickValues(n)),n}},{key:"getId",value:function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"}},{key:"getXAxisTickFormat",value:function(){var t,e=this.owner,n=e.config.axis_x_tick_format,r=e.isTimeSeries(),o=e.isCategorized();return n?C(n)?t=n:r&&(t=function(t){return t?e.axisTimeFormat(n)(t):""}):t=r?e.defaultAxisTimeFormat:o?e.categoryName:function(t){return t<0?t.toFixed(0):t},C(t)?function(n){return t.apply(e,o?[n,e.categoryName(n)]:[n])}:t}},{key:"getTickValues",value:function(t){var e=this.owner,n=e.config["axis_".concat(t,"_tick_values")],r=e["".concat(t,"Axis")];return(C(n)?n():n)||(r?r.tickValues():void 0)}},{key:"getLabelOptionByAxisId",value:function(t){return this.owner.config["axis_".concat(t,"_label")]}},{key:"getLabelText",value:function(t){var option=this.getLabelOptionByAxisId(t);return O(option)?option:option?option.text:null}},{key:"setLabelText",value:function(t,text){var e=this.owner.config,option=this.getLabelOptionByAxisId(t);O(option)?e["axis_".concat(t,"_label")]=text:option&&(option.text=text)}},{key:"getLabelPosition",value:function(t,e){var n=this.owner.config.axis_rotated,option=this.getLabelOptionByAxisId(t),r=z(option)&&option.position?option.position:e[+!n],o=function(t){return!!~r.indexOf(t)};return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}}},{key:"getXAxisLabelPosition",value:function(){return this.getLabelPosition("x",["inner-top","inner-right"])}},{key:"getYAxisLabelPosition",value:function(){return this.getLabelPosition("y",["inner-right","inner-top"])}},{key:"getY2AxisLabelPosition",value:function(){return this.getLabelPosition("y2",["inner-right","inner-top"])}},{key:"getLabelPositionById",value:function(t){return this["get".concat(t.toUpperCase(),"AxisLabelPosition")]()}},{key:"textForXAxisLabel",value:function(){return this.getLabelText("x")}},{key:"textForYAxisLabel",value:function(){return this.getLabelText("y")}},{key:"textForY2AxisLabel",value:function(){return this.getLabelText("y2")}},{key:"xForAxisLabel",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.owner,r=t.isMiddle?-n.height/2:0;return gt(n,e)?r=t.isLeft?0:t.isCenter?n.width/2:n.width:t.isBottom&&(r=-n.height),r}},{key:"dxForAxisLabel",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.owner,r=t.isBottom?"0.5em":"0";return gt(n,e)?r=t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop&&(r="-0.5em"),r}},{key:"textAnchorForAxisLabel",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.owner,r=t.isMiddle?"middle":"end";return gt(n,e)?r=t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom&&(r="start"),r}},{key:"xForXAxisLabel",value:function(){return this.xForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"xForYAxisLabel",value:function(){return this.xForAxisLabel(this.getYAxisLabelPosition())}},{key:"xForY2AxisLabel",value:function(){return this.xForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dxForXAxisLabel",value:function(){return this.dxForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"dxForYAxisLabel",value:function(){return this.dxForAxisLabel(this.getYAxisLabelPosition())}},{key:"dxForY2AxisLabel",value:function(){return this.dxForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dyForXAxisLabel",value:function(){var t=this.owner.config,e=this.getXAxisLabelPosition().isInner,n=t.axis_x_height;return t.axis_rotated?e?"1.2em":-25-this.getMaxTickWidth("x"):e?"-0.5em":n?n-10:"3em"}},{key:"dyForYAxisLabel",value:function(){var t=this.owner,e=this.getYAxisLabelPosition().isInner;return t.config.axis_rotated?e?"-0.5em":"3em":e?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)}},{key:"dyForY2AxisLabel",value:function(){var t=this.owner,e=this.getY2AxisLabelPosition().isInner;return t.config.axis_rotated?e?"1.2em":"-2.2em":e?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)}},{key:"textAnchorForXAxisLabel",value:function(){return this.textAnchorForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"textAnchorForYAxisLabel",value:function(){return this.textAnchorForAxisLabel(this.getYAxisLabelPosition())}},{key:"textAnchorForY2AxisLabel",value:function(){return this.textAnchorForAxisLabel(this.getY2AxisLabelPosition())}},{key:"getMaxTickWidth",value:function(t,e){var n=this.owner,r=n.config,o=n.currentMaxTickWidths[t],c=0;if(e||!r["axis_".concat(t,"_show")])return o.size;if(n.svg){var l=/^y2?$/.test(t),d=n.filterTargetsToShow(n.data.targets),h=n[t].copy().domain(n["get".concat(l?"Y":"X","Domain")](d,t)),f=h.domain();if(B(o.domain)&&o.domain.every((function(t,i){return t===f[i]})))return o.size;o.domain=f;var x=this.getAxis(t,h,!1,!1,!0),v=r["axis_".concat(t,"_tick_count")];v&&x.tickValues(this.generateTickValues(f,v,l?n.isTimeSeriesY():n.isTimeSeries())),l||this.updateXAxisTickValues(d,x);var _=n.selectChart.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");x.create(_),_.selectAll("text").each((function(){c=Math.max(c,this.getBoundingClientRect().width)})),_.remove()}return c>0&&(o.size=c),o.size}},{key:"updateLabels",value:function(t){var e=this,n=this.owner,r={X:n.main.select(".".concat(_.axisX," .").concat(_.axisXLabel)),Y:n.main.select(".".concat(_.axisY," .").concat(_.axisYLabel)),Y2:n.main.select(".".concat(_.axisY2," .").concat(_.axisY2Label))};Object.keys(r).filter((function(t){return!r[t].empty()})).forEach((function(n){var o=r[n],c="".concat(n,"AxisLabel");(t?o.transition():o).attr("x",e["xFor".concat(c)].bind(e)).attr("dx",e["dxFor".concat(c)].bind(e)).attr("dy",e["dyFor".concat(c)].bind(e)).text(e["textFor".concat(c)].bind(e))}))}},{key:"getPadding",value:function(t,e,n,r){var p=L(t)?t:t[e];return M(p)?"ratio"===t.unit?t[e]*r:this.convertPixelsToAxisPadding(p,r):n}},{key:"convertPixelsToAxisPadding",value:function(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))}},{key:"generateTickValues",value:function(t,e,n){var r,o,c,l,i,d,h=t;if(e){var f=C(e)?e():e;if(1===f)h=[t[0]];else if(2===f)h=[t[0],t[t.length-1]];else if(f>2){var x=this.owner.isCategorized();for(c=f-2,r=t[0],l=((o=t[t.length-1])-r)/(c+1),h=[r],i=0;i<c;i++)d=+r+l*(i+1),h.push(n?new Date(d):x?Math.round(d):d);h.push(o)}}return n||(h=h.sort((function(a,b){return a-b}))),h}},{key:"generateTransitions",value:function(t){var e=this.owner.axes,n=c(["x","y","y2","subx"].map((function(n){var r=e[n];return r&&t&&(r=r.transition().duration(t)),r})),4);return{axisX:n[0],axisY:n[1],axisY2:n[2],axisSubX:n[3]}}},{key:"redraw",value:function(t,e,n){var r=this.owner,o=e?"0":"1";["x","y","y2","subX"].forEach((function(e){var c=r["".concat(e,"Axis")];c&&(!n&&(c.config.withoutTransition=!r.config.transition_duration),r.axes[e.toLowerCase()].style("opacity",o),c.create(t["axis".concat(K(e))]))})),this.updateAxes()}},{key:"redrawAxis",value:function(t,e,n,r,o){var c,l=this,d=this.owner,h=d.config,f=!!d.zoomScale;!f&&d.isCategorized()&&0===t.length&&d.x.domain([0,d.axes.x.selectAll(".tick").size()]),d.x&&t.length?(!f&&d.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),!h.axis_x_tick_values&&this.updateXAxisTickValues(t)):d.xAxis&&(d.xAxis.tickValues([]),d.subXAxis.tickValues([])),h.zoom_rescale&&!r&&(c=d.x.orgDomain()),["y","y2"].forEach((function(e){var n=d[e];if(n){var r=h["axis_".concat(e,"_tick_values")],o=h["axis_".concat(e,"_tick_count")];if(n.domain(d.getYDomain(t,e,c)),!r&&o){var f=n.domain();d["".concat(e,"Axis")].tickValues(l.generateTickValues(f,f.every((function(t){return 0===t}))?1:o,d.isTimeSeriesY()))}}})),this.redraw(n,d.hasArcType(),o),this.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis||e.Y)&&t.length&&this.setCulling(),e.Y&&(d.subY&&d.subY.domain(d.getYDomain(t,"y")),d.subY2&&d.subY2.domain(d.getYDomain(t,"y2")))}},{key:"setCulling",value:function(){var t=this.owner,e=t.config;["subx","x","y","y2"].forEach((function(n){var r=t.axes[n],o="subx"===n?"x":n,c=e["axis_".concat(o,"_tick_culling")];if(r&&c){var l,d=r.selectAll(".tick text"),h=at(d.data()),f=h.length,x=e["axis_".concat(o,"_tick_culling_max")];if(f){for(var v=1;v<f;v++)if(f/v<x){l=v;break}d.each((function(t){this.style.display=h.indexOf(t)%l?"none":"block"}))}else d.style("display","block")}}))}}]),t}(),vt=function(){function t(e){o(this,t);var n=this;n.api=e,n.config=n.getOptions(),n.data={},n.cache={},n.axes={},n.rendered=!1}return d(t,[{key:"beforeInit",value:function(){var t=this;t.callPluginHook("$beforeInit"),H(t.config.onbeforeinit,t,t.api)}},{key:"afterInit",value:function(){var t=this;t.callPluginHook("$afterInit"),H(t.config.onafterinit,t,t.api)}},{key:"init",value:function(){var t=this,e=t.config;t.initParams();var n={element:e.bindto,classname:"bb"};Y(e.bindto)&&(n.element=e.bindto.element||"#chart",n.classname=e.bindto.classname||n.classname),t.selectChart=C(n.element.node)?e.bindto.element:Object(f.select)(n.element||[]),t.selectChart.empty()&&(t.selectChart=Object(f.select)(S.body.appendChild(S.createElement("div")))),t.selectChart.html("").classed(n.classname,!0),t.initToRender()}},{key:"initToRender",value:function(t){var e=this,n=e.config,r=e.selectChart,o=function(){return"none"===r.style("display")||"hidden"===r.style("visibility")},c=n.render.lazy||o(),l=k.MutationObserver;if(c&&l&&!1!==n.render.observe&&!t&&new l((function(t,n){o()||(n.disconnect(),!e.rendered&&e.initToRender(!0))})).observe(r.node(),{attributes:!0,attributeFilter:["class","style"]}),!c||t){var d=e.convertData(n,e.initWithData);d&&e.initWithData(d)}}},{key:"initParams",value:function(){var t=this,e=this,n=e.config,r=n.axis_rotated;e.datetimeId="bb-".concat(+new Date),e.initClip(),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.point=e.generatePoint(),e.extraLineClasses=e.generateExtraLineClass(),e.dataTimeFormat=n.data_xLocaltime?h.timeParse:h.utcParse,e.axisTimeFormat=n.axis_x_localtime?h.timeFormat:h.utcFormat;var o=e.config.zoom_enabled&&"drag"===e.config.zoom_enabled.type;e.defaultAxisTimeFormat=function(n){var r=o?t.zoomScale:t.zoomScale&&e.x.orgDomain().toString()!==t.zoomScale.domain().toString(),c=(n.getMilliseconds()?".%L":n.getSeconds()&&".:%S")||n.getMinutes()&&"%I:%M"||n.getHours()&&"%I %p"||1!==n.getDate()&&"%b %d"||r&&1===n.getDate()&&"%b'%y"||n.getMonth()&&"%-m/%-d"||"%Y";return e.axisTimeFormat(c)(n)},e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.isLegendRight="right"===n.legend_position,e.isLegendInset="inset"===n.legend_position,e.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,e.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:{size:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},e.rotated_padding_left=30,e.rotated_padding_right=r&&!n.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.inputType=e.convertInputType(),e.axes.subx=Object(f.selectAll)([])}},{key:"initWithData",value:function(data){var t=this,e=t.config;if(t.axis=new xt(t),e.zoom_enabled&&t.initZoom(),t.data.xs={},t.data.targets=t.convertDataToTargets(data),e.data_filter&&(t.data.targets=t.data.targets.filter(e.data_filter)),e.data_hide&&t.addHiddenTargetIds(!0===e.data_hide?t.mapToIds(t.data.targets):e.data_hide),e.legend_hide&&t.addHiddenLegendIds(!0===e.legend_hide?t.mapToIds(t.data.targets):e.legend_hide),t.updateSizes(),t.updateScales(!0),t.x&&(t.x.domain(at(t.getXDomain(t.data.targets))),t.subX.domain(t.x.domain()),t.orgXDomain=t.x.domain()),t.y&&(t.y.domain(t.getYDomain(t.data.targets,"y")),t.subY.domain(t.y.domain())),t.y2&&(t.y2.domain(t.getYDomain(t.data.targets,"y2")),t.subY2&&t.subY2.domain(t.y2.domain())),t.svg=t.selectChart.append("svg").style("overflow","hidden").style("display","block"),e.interaction_enabled&&t.inputType){var n="touch"===t.inputType;t.svg.on(n?"touchstart":"mouseenter",(function(){return H(e.onover,t,t.api)})).on(n?"touchend":"mouseleave",(function(){return H(e.onout,t,t.api)}))}e.svg_classname&&t.svg.attr("class",e.svg_classname),t.defs=t.svg.append("defs"),t.clipChart=t.appendClip(t.defs,t.clipId),t.clipXAxis=t.appendClip(t.defs,t.clipIdForXAxis),t.clipYAxis=t.appendClip(t.defs,t.clipIdForYAxis),t.clipGrid=t.appendClip(t.defs,t.clipIdForGrid),C(e.color_tiles)&&t.patterns&&t.patterns.forEach((function(p){return t.defs.append((function(){return p.node}))})),t.updateSvgSize();var main=t.svg.append("g").attr("transform",t.getTranslate("main"));if(t.main=main,e.subchart_show&&t.initSubchart(),t.initTooltip&&t.initTooltip(),t.initLegend&&t.initLegend(),t.initTitle&&t.initTitle(),e.data_empty_label_text&&main.append("text").attr("class","".concat(_.text," ").concat(_.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),t.initRegion(),e.clipPath||t.axis.init(),main.append("g").attr("class",_.chart).attr("clip-path",t.clipPath),t.callPluginHook("$init"),t.initEventRect(),t.initChartElements(),t.initGrid(),main.insert("rect",e.zoom_privileged?null:"g.".concat(_.regions)).attr("class",_.zoomRect).attr("width",t.width).attr("height",t.height).style("opacity","0").on("dblclick.zoom",null),e.clipPath&&t.axis.init(),t.updateTargets(t.data.targets),t.updateDimension(),H(e.oninit,t,t.api),t.setBackground(),t.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),e.data_onmin||e.data_onmax){var r=t.getMinMaxData();H(e.data_onmin,t,r.min),H(e.data_onmax,t,r.max)}t.bindResize(),t.api.element=t.selectChart.node(),t.rendered=!0}},{key:"initChartElements",value:function(){var t=this;["Bar","Radar","Line","Bubble","Arc","Gauge","Pie"].forEach((function(e){t["init".concat(e)]()})),P(t.config.data_labels)&&t.initText()}},{key:"setChartElements",value:function(){var t=this;t.api.$={chart:t.selectChart,svg:t.svg,defs:t.defs,main:t.main,tooltip:t.tooltip,legend:t.legend,title:t.title,grid:t.grid,arc:t.arcs,bar:{bars:t.mainBar},line:{lines:t.mainLine,areas:t.mainArea,circles:t.mainCircle},text:{texts:t.mainText}}}},{key:"setBackground",value:function(){var t=this,e=t.config.background;if(P(e)){var element=t.svg.select(".".concat(_[t.hasArcType()?"chart":"regions"])).insert(e.imgUrl?"image":"rect",":first-child");e.imgUrl?element.attr("href",e.imgUrl):e.color&&element.style("fill",e.color),element.attr("class",e.class||null).attr("width","100%").attr("height","100%")}}},{key:"smoothLines",value:function(t,e){"grid"===e&&t.each((function(){var g=Object(f.select)(this),t=c(["x1","x2","y1","y2"].map((function(t){return Math.ceil(g.attr(t))})),4),e=t[0],n=t[1],r=t[2],o=t[3];g.attr({x1:e,x2:n,y1:r,y2:o})}))}},{key:"updateSizes",value:function(t){var e=this,n=e.config,r=n.axis_rotated,o=e.hasArcType(),legend={width:e.legend?e.getLegendWidth():0,height:e.legend?e.getLegendHeight():0},c=e.isLegendRight||e.isLegendInset?0:legend.height,l=r||o?0:e.getHorizontalAxisHeight("x"),d=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?l:30,h=n.subchart_show&&!o?n.subchart_size_height+d:0;t||e.setContainerSize(),e.margin=r?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+c+e.getCurrentPaddingBottom(),left:h+(o?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:l+h+c+e.getCurrentPaddingBottom(),left:o?0:e.getCurrentPaddingLeft()},e.margin2=r?{top:e.margin.top,right:NaN,bottom:20+c,left:e.rotated_padding_left}:{top:e.currentHeight-h-c,right:NaN,bottom:d+c,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(legend),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=r?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=r?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?legend.width+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!n.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&o&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)}},{key:"updateTargets",value:function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType(t)&&(e.hasType("radar")?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()}},{key:"showTargets",value:function(){var t=this;t.svg.selectAll(".".concat(_.target)).filter((function(e){return t.isTargetToShow(e.id)})).transition().duration(t.config.transition_duration).style("opacity","1")}},{key:"getWithOption",value:function(t){var e={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(e).forEach((function(n){var r=e[n];O(r)&&(r=e[r]),e[n]=j(t,"with".concat(n),r)})),e}},{key:"redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=this,main=n.main,r=n.config,o=n.filterTargetsToShow(n.data.targets),c=t.initializing,l=t.flow,d=n.getWithOption(t),h=d.Transition?r.transition_duration:0,f=d.TransitionForExit?h:0,x=d.TransitionForAxis?h:0,v=e||n.axis.generateTransitions(x);c&&r.tooltip_init_show||"touch"!==n.inputType||n.hideTooltip(),n.updateSizes(c),d.Legend&&r.legend_show?n.updateLegend(n.mapToIds(n.data.targets),t,v):d.Dimension&&n.updateDimension(!0),n.axis.redrawAxis(o,d,v,l,c),n.updateCircleY(),n.updateXgridFocus(),r.data_empty_label_text&&main.select("text.".concat(_.text,".").concat(_.empty)).attr("x",n.width/2).attr("y",n.height/2).text(r.data_empty_label_text).style("display",o.length?"none":null),n.updateGrid(h),n.updateRegion(h),n.updateBar(f),n.updateLine(f),n.updateArea(f),n.updateCircle(),n.hasDataLabel()&&n.updateText(f),n.redrawTitle&&n.redrawTitle(),n.arcs&&n.redrawArc(h,f,d.Transform),n.radars&&n.redrawRadar(h,f),n.mainText&&main.selectAll(".".concat(_.selectedCircles)).filter(n.isBarType.bind(n)).selectAll("circle").remove(),r.interaction_enabled&&!l&&d.EventRect&&n.bindZoomEvent(),c&&n.setChartElements(),n.generateRedrawList(o,l,h,d.Subchart),n.callPluginHook("$redraw",t,h)}},{key:"generateRedrawList",value:function(t,e,n,r){var o=this,c=o.config,l=o.getDrawShape();c.subchart_show&&o.redrawSubchart(r,n,l);var d=e&&o.generateFlow({targets:t,flow:e,duration:e.duration,shape:l,xv:o.xv.bind(o)}),h=(n||d)&&o.isTabVisible(),f=o.getRedrawList(l,e,d,h),v=e||c.onrendered?function(){d&&d(),H(c.onrendered,o,o.api)}:null;if(v)if(h){var _=o.generateWait();Object(x.transition)().duration(n).each((function(){f.reduce((function(t,e){return t.concat(e)}),[]).forEach((function(t){return _.add(t)}))})).call(_,v)}else v();o.mapToIds(o.data.targets).forEach((function(t){o.withoutFadeIn[t]=!0}))}},{key:"getDrawShape",value:function(){var t=this,e=t.config.axis_rotated,n=t.hasType("radar"),r={type:{},indices:{}};if(t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")){var o=t.getShapeIndices(t.isLineType);if(r.indices.line=o,r.type.line=t.generateDrawLine?t.generateDrawLine(o,!1):void 0,t.hasTypeOf("Area")){var c=t.getShapeIndices(t.isAreaType);r.indices.area=c,r.type.area=t.generateDrawArea?t.generateDrawArea(c,!1):void 0}}if(t.hasType("bar")){var l=t.getShapeIndices(t.isBarType);r.indices.bar=l,r.type.bar=t.generateDrawBar?t.generateDrawBar(l):void 0}return r.pos={xForText:t.generateXYForText(r.indices,!0),yForText:t.generateXYForText(r.indices,!1),cx:(n?t.radarCircleX:e?t.circleY:t.circleX).bind(t),cy:(n?t.radarCircleY:e?t.circleX:t.circleY).bind(t)},r}},{key:"getRedrawList",value:function(t,e,n,r){var o=this,c=o.config,l=o.hasArcType(),d=t.pos,h=d.cx,f=d.cy,x=d.xForText,v=d.yForText,_=[];if(!l){var y=t.type,area=y.area,m=y.bar,line=y.line;(c.grid_x_lines.length||c.grid_y_lines.length)&&_.push(o.redrawGrid(r)),c.regions.length&&_.push(o.redrawRegion(r)),o.hasTypeOf("Line")&&(_.push(o.redrawLine(line,r)),o.hasTypeOf("Area")&&_.push(o.redrawArea(area,r))),o.hasType("bar")&&_.push(o.redrawBar(m,r)),P(c.data_labels)&&_.push(o.redrawText(x,v,e,r))}return(!l||o.hasType("radar"))&&_.push(o.redrawCircle(h,f,r,n)),_}},{key:"updateAndRedraw",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,r=n.config;e.withTransition=j(e,"withTransition",!0),e.withTransform=j(e,"withTransform",!1),e.withLegend=j(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=j(e,"withTransitionForTransform",e.withTransition),e.withLegend&&r.legend_show||(t=n.axis.generateTransitions(e.withTransitionForAxis?r.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,t)),n.redraw(e,t)}},{key:"redrawWithoutRescale",value:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}},{key:"isTimeSeries",value:function(){return"timeseries"===this.config.axis_x_type}},{key:"isCategorized",value:function(){return this.config.axis_x_type.indexOf("category")>=0||this.hasType("radar")}},{key:"isCustomX",value:function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||P(t.data_xs))}},{key:"isTimeSeriesY",value:function(){return"timeseries"===this.config.axis_y_type}},{key:"getTranslate",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this,l=o.config,d=l.axis_rotated,h=0;if(r&&/^(x|y2?)$/.test(t)&&(h=o.getAxisSize(t)*r),"main"===t)e=X(o.margin.left),n=X(o.margin.top);else if("context"===t)e=X(o.margin2.left),n=X(o.margin2.top);else if("legend"===t)e=o.margin3.left,n=o.margin3.top+(o.hasType("gauge")?10:0);else if("x"===t)e=d?-h:0,n=d?0:o.height+h;else if("y"===t)e=d?0:-h,n=d?o.height+h:0;else if("y2"===t)e=d?0:o.width+h,n=d?1-h:0;else if("subx"===t)e=0,n=d?0:o.height2;else if("arc"===t)e=o.arcWidth/2,n=o.arcHeight/2;else if("radar"===t){var f=o.getRadarSize(),x=c(f,1),v=x[0];e=o.width/2-v,n=X(o.margin.top)}return"translate(".concat(e,", ").concat(n,")")}},{key:"initialOpacity",value:function(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?"1":"0"}},{key:"initialOpacityForCircle",value:function(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):"0"}},{key:"opacityForCircle",value:function(t){var e=this.config.point_show?"1":"0";return M(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":e:"0"}},{key:"opacityForText",value:function(){return this.hasDataLabel()?"1":"0"}},{key:"xx",value:function(t){var e=this.config.zoom_enabled&&this.zoomScale?this.zoomScale:this.x;return t?e(t.x):null}},{key:"xv",value:function(t){var e=this,n=e.getBaseValue(t);return e.isTimeSeries()?n=e.parseDate(n):e.isCategorized()&&O(n)&&(n=e.config.axis_x_categories.indexOf(n)),Math.ceil(e.x(n))}},{key:"yv",value:function(t){var e=this,n=t.axis&&"y2"===t.axis?e.y2:e.y;return Math.ceil(n(e.getBaseValue(t)))}},{key:"subxx",value:function(t){return t?this.subX(t.x):null}},{key:"transformMain",value:function(t,e){var n,r,o,c=this;e&&e.axisX?n=e.axisX:(n=c.main.select(".".concat(_.axisX)),t&&(n=n.transition())),e&&e.axisY?r=e.axisY:(r=c.main.select(".".concat(_.axisY)),t&&(r=r.transition())),e&&e.axisY2?o=e.axisY2:(o=c.main.select(".".concat(_.axisY2)),t&&(o=o.transition())),(t?c.main.transition():c.main).attr("transform",c.getTranslate("main")),n.attr("transform",c.getTranslate("x")),r.attr("transform",c.getTranslate("y")),o.attr("transform",c.getTranslate("y2")),c.main.select(".".concat(_.chartArcs)).attr("transform",c.getTranslate("arc"))}},{key:"transformAll",value:function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)}},{key:"updateSvgSize",value:function(){var t=this,e=t.svg.select(".".concat(_.brush," .overlay")),n={width:0,height:0};e.size()&&(n.width=+e.attr("width"),n.height=+e.attr("height")),t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#".concat(t.clipId),"#".concat(t.clipIdForGrid)]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#".concat(t.clipIdForXAxis)).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForYAxis)).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForSubchart)).select("rect").attr("width",t.width).attr("height",n.height),t.svg.select(".".concat(_.zoomRect)).attr("width",t.width).attr("height",t.height)}},{key:"updateDimension",value:function(t){var e=this;t||(e.xAxis&&e.config.axis_rotated?(e.xAxis.create(e.axes.x),e.subXAxis.create(e.axes.subx)):(e.yAxis&&e.yAxis.create(e.axes.y),e.y2Axis&&e.y2Axis.create(e.axes.y2))),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)}},{key:"bindResize",value:function(){var t=this,e=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add((function(){return H(e.onresize,t,t.api)})),e.resize_auto&&t.resizeFunction.add((function(){t.resizeTimeout&&(k.clearTimeout(t.resizeTimeout),t.resizeTimeout=null),t.resizeTimeout=k.setTimeout((function(){t.api.flush(!1,!0)}),200)})),t.resizeFunction.add((function(){return H(e.onresized,t,t.api)})),k.addEventListener("resize",t.resizeFunction)}},{key:"generateResize",value:function(){function t(){e.forEach((function(t){return t()}))}var e=[];return t.add=function(t){return e.push(t)},t.remove=function(t){return e.splice(e.indexOf(t),1)},t}},{key:"endall",value:function(t,e){var n=0;t.each((function(){return++n})).on("end",(function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];--n||e.apply.apply(e,[this].concat(r))}))}},{key:"generateWait",value:function(){var t=[],e=function(e,n){var r;!function e(){for(var o,c=0,i=0;o=t[i];i++)if(o.empty())c++;else try{o.transition()}catch(t){c++}r&&clearTimeout(r),c===t.length?n&&n():r=setTimeout(e,50)}()};return e.add=function(e){B(e)?t=t.concat(e):t.push(e)},e}},{key:"parseDate",value:function(t){var e;return t instanceof Date?e=t:O(t)?e=this.dataTimeFormat(this.config.data_xFormat)(t):L(t)&&!isNaN(t)&&(e=new Date(+t)),(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '".concat(t,"' to Date object")),e}},{key:"isTabVisible",value:function(){return!S.hidden}},{key:"convertInputType",value:function(){var t=this.config,e=!1;if(/Mobi/.test(k.navigator.userAgent)&&t.interaction_inputType_touch){var n=k.navigator&&"maxTouchPoints"in k.navigator&&k.navigator.maxTouchPoints>0,r="ontouchmove"in k||k.DocumentTouch&&S instanceof k.DocumentTouch;e=n||r}return(t.interaction_inputType_mouse&&!e&&"onmouseover"in k?"mouse":e&&"touch")||null}},{key:"callPluginHook",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.config.plugins.forEach((function(n){"$beforeInit"===t&&(n.$$=e,e.api.plugins.push(n)),n[t].apply(n,r)}))}}]),t}(),_t=function t(e){o(this,t);var n=new vt(this);this.plugins=[],this.internal=n,n.loadConfig(e),n.beforeInit(e),n.init(),n.afterInit(e),function t(e,n,r){Object.keys(e).forEach((function(o){n[o]=e[o].bind(r),Object.keys(e[o]).length&&t(e[o],n[o],r)}))}(t.prototype,this,this)},yt=function t(){return o(this,t),{bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:void 0,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_stack_normalize:!1,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onselected:function(){},data_onunselected:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function(){},color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0,legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1,axis_rotated:!1,axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[],axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[],axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[],grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_front:!1,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle",line_connectNull:!1,line_step_type:"step",line_classes:void 0,line_point:!0,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bubble_maxR:35,area_zerobased:!0,area_above:!1,area_linearGradient:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_innerRadius:0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0,plugins:[],gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0,spline_interpolation_type:"cardinal",radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1,render:{},regions:[],tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null,title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"}};Q(vt.prototype,{getOptions:function(){return new yt},loadConfig:function(t){var e,n,r,o=this.config,c=function(){var t=n.shift();return t&&e&&z(e)&&t in e?(e=e[t],c()):t?void 0:e};Object.keys(o).forEach((function(l){e=t,n=l.split("_"),r=c(),F(r)&&(o[l]=r)}))}}),Q(vt.prototype,{getScale:function(t,e,n){return(n?Object(lt.scaleTime)():Object(lt.scaleLinear)()).range([t,e])},getX:function(t,e,n,r){var o=this,c=o.zoomScale||o.getScale(t,e,o.isTimeSeries());return o.getCustomizedScale(n?c.domain(n):c,r)},getY:function(t,e,n){var r=this.getScale(t,e,this.isTimeSeriesY());return n&&r.domain(n),r},getCustomizedScale:function(t,e){var n=this,r=e||function(){return n.xAxis.tickOffset()},o=function(e,n){var o=t(e)+r();return n?o:Math.ceil(o)};for(var c in t)o[c]=t[c];return o.orgDomain=function(){return t.domain()},o.orgScale=function(){return t},n.isCategorized()&&(o.domain=function(e){var n=e;return arguments.length?(t.domain(n),o):[(n=this.orgDomain())[0],n[1]+1]}),o},getYScale:function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},getSubYScale:function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},updateScales:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.config,o=r.axis_rotated;n.xMin=o?1:0,n.xMax=o?n.height:n.width,n.yMin=o?0:n.height,n.yMax=o?n.width:1,n.subXMin=n.xMin,n.subXMax=n.xMax,n.subYMin=o?0:n.height2,n.subYMax=o?n.width2:1;var c=e&&n.x&&n.x.orgDomain(),l=e&&n.orgXDomain;n.x=n.getX(n.xMin,n.xMax,c,(function(){return n.xAxis.tickOffset()})),n.subX=n.getX(n.xMin,n.xMax,l,(function(t){return t%1?0:n.subXAxis.tickOffset()})),n.xAxisTickFormat=n.axis.getXAxisTickFormat(),n.xAxisTickValues=n.axis.getTickValues("x"),n.xAxis=n.axis.getAxis("x",n.x,r.axis_x_tick_outer,t),n.subXAxis=n.axis.getAxis("subX",n.subX,r.axis_x_tick_outer,t),n.y=n.getY(n.yMin,n.yMax,n.y?n.y.domain():r.axis_y_default),n.subY=n.getY(n.subYMin,n.subYMax,n.subY?n.subY.domain():r.axis_y_default),n.yAxisTickValues=n.axis.getTickValues("y"),n.yAxis=n.axis.getAxis("y",n.y,r.axis_y_tick_outer,t),r.axis_y2_show&&(n.y2=n.getY(n.yMin,n.yMax,n.y2?n.y2.domain():r.axis_y2_default),n.subY2=n.getY(n.subYMin,n.subYMax,n.subY2?n.subY2.domain():r.axis_y2_default),n.y2AxisTickValues=n.axis.getTickValues("y2"),n.y2Axis=n.axis.getAxis("y2",n.y2,r.axis_y2_tick_outer,t)),n.updateArc&&n.updateArc()}}),Q(vt.prototype,{getYDomainMinMax:function(t,e){var n=this,r=n.config,o="min"===e,c=r.data_groups,l=n.mapToIds(t),d=n.getValuesAsIdKeyed(t);return c.length>0&&function(){for(var e,r=n["has".concat(o?"Negative":"Positive","ValueInTargets")](t),h=function(t,c){if(0===(c=c.filter((function(t){return l.indexOf(t)>=0}))).length)return e=c,"continue";var h=c[0],f=n.axis.getId(h);r&&d[h]&&(d[h]=d[h].map((function(t){return(o?t<0:t>0)?t:0})));for(var x,v=function(t,e){if(!d[e])return"continue";var c=n.axis.getId(e);d[e].forEach((function(t,i){var e=+t;c!==f||r&&(o?e>0:e<0)||(d[h][i]+=e)}))},_=1;x=c[_];_++)v(0,x);e=c},f=0;e=c[f];f++)h(0,e)}(),ot(e,Object.keys(d).map((function(t){return ot(e,d[t])})))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},getYDomain:function(t,e,n){var r=this,o=r.config;if(r.isStackNormalized())return[0,100];var c=t.filter((function(t){return r.axis.getId(t.id)===e})),l=n?r.filterByXDomain(c,n):c,d=o["axis_".concat(e,"_min")],h=o["axis_".concat(e,"_max")],f=r.getYDomainMin(l),x=r.getYDomainMax(l),v=o["axis_".concat(e,"_center")],_=r.hasType("bar",l)&&o.bar_zerobased||r.hasType("area",l)&&o.area_zerobased,y=o["axis_".concat(e,"_inverted")],m=r.hasDataLabel()&&o.axis_rotated,T=r.hasDataLabel()&&!o.axis_rotated;if(f=M(d)?d:M(h)?f<h?f:h-10:f,x=M(h)?h:M(d)?d<x?x:d+10:x,0===l.length)return r[e].domain();isNaN(f)&&(f=0),isNaN(x)&&(x=f),f===x&&(f<0?x=0:f=0);var w=f>=0&&x>=0,A=f<=0&&x<=0;(M(d)&&w||M(h)&&A)&&(_=!1),_&&(w&&(f=0),A&&(x=0));var k=Math.abs(x-f),S={top:.1*k,bottom:.1*k};if(F(v)){var C=Math.max(Math.abs(f),Math.abs(x));x=v+C,f=v-C}if(m){var O=I(r.y.range()),L=r.getDataLabelLength(f,x,"width").map((function(t){return t/O}));["bottom","top"].forEach((function(t,i){S[t]+=k*(L[i]/(1-L[0]-L[1]))}))}else if(T){var D=r.getDataLabelLength(f,x,"height");["bottom","top"].forEach((function(t,i){S[t]+=r.axis.convertPixelsToAxisPadding(D[i],k)}))}if(/^y2?$/.test(e)){var p=o["axis_".concat(e,"_padding")];P(p)&&["bottom","top"].forEach((function(t){S[t]=r.axis.getPadding(p,t,S[t],k)}))}_&&(w&&(S.bottom=f),A&&(S.top=-x));var R=[f-S.bottom,x+S.top];return y?R.reverse():R},getXDomainMinMax:function(t,e){var n=this,r=n.config["axis_x_".concat(e)];return F(r)?n.isTimeSeries()?n.parseDate(r):r:ot(e,t.map((function(t){return ot(e,t.values.map((function(t){return t.x})))})))},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e,n,r=this,o=r.config,c=t[1]-t[0],l=o.axis_x_padding,d=n=r.isCategorized()?0:r.hasType("bar")?(e=r.getMaxDataCount())>1?c/(e-1)/2:.5:.01*c,h=n;return Y(l)&&P(l)?(d=M(l.left)?l.left:n,h=M(l.right)?l.right:n):L(o.axis_x_padding)&&(d=l,h=l),{left:d,right:h}},getXDomain:function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],r=n[0],o=n[1],c=e.getXDomainPadding(n),l=0,d=0;return r-o!=0||e.isCategorized()||(e.isTimeSeries()?(r=new Date(.5*r.getTime()),o=new Date(1.5*o.getTime())):(r=0===r?1:.5*r,o=0===o?-1:1.5*o)),(r||0===r)&&(l=e.isTimeSeries()?new Date(r.getTime()-c.left):r-c.left),(o||0===o)&&(d=e.isTimeSeries()?new Date(o.getTime()+c.right):o+c.right),[l,d]},updateXDomain:function(t,e,n,r,o){var c=this,l=c.config.zoom_enabled;if(n&&(c.x.domain(o||at(c.getXDomain(t))),c.orgXDomain=c.x.domain(),l&&c.zoom.updateScaleExtent(),c.subX.domain(c.x.domain()),c.brush&&c.brush.scale(c.subX)),e){var d=o||!c.brush||J(c)?c.orgXDomain:W(c).map(c.subX.invert);c.x.domain(d),l&&c.zoom.updateScaleExtent()}return r&&c.x.domain(c.trimXDomain(c.x.orgDomain())),c.x.domain()},trimXDomain:function(t){var e=c(this.getZoomDomain(),2),n=e[0],r=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),r<=t[1]&&(t[0]=+t[0]-(t[1]-r),t[1]=r),t}}),Q(vt.prototype,{isX:function(t){var e,n,r,o=this.config,c=o.data_x&&t===o.data_x,l=P(o.data_xs)&&(e=o.data_xs,n=t,r=!1,Object.keys(e).forEach((function(t){return e[t]===n&&(r=!0)})),r);return c||l},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return t.data_stack_normalize&&t.data_groups.length},isGrouped:function(t){return this.config.data_groups.map((function(e){return e.indexOf(t)>=0}))[0]},getXKey:function(t){var e=this.config;return e.data_x?e.data_x:P(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function(t,e){var n,r=this;return(e&&P(e)?r.mapToIds(e):[]).forEach((function(e){r.getXKey(e)===t&&(n=r.data.xs[e])})),n},getIndexByX:function(t,e){return e?e.indexOf(O(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,i){var e=this;return t in e.data.xs&&e.data.xs[t]&&M(e.data.xs[t][i])?e.data.xs[t][i]:i},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this;Object.keys(t).forEach((function(n){e.config.data_xs[n]=t[n]}))},isMultipleX:function(){return P(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(data){var t;return data&&(t=this.config.data_names[data.id],data.name=void 0===t?data.id:t),data},getAllValuesOnIndex:function(t){var e=this;return e.filterTargetsToShow(e.data.targets).map((function(n){return e.addName(e.getValueOnIndex(n.values,t))}))},getValueOnIndex:function(t,e){var n=t.filter((function(t){return t.index===e}));return n.length?n[0]:null},updateTargetX:function(t,e){var n=this;t.forEach((function(t){t.values.forEach((function(r,i){r.x=n.generateTargetX(e[i],t.id,i)})),n.data.xs[t.id]=e}))},updateTargetXs:function(t,e){var n=this;t.forEach((function(t){e[t.id]&&n.updateTargetX([t],e[t.id])}))},generateTargetX:function(t,e,n){var r=this,o=r.isCategorized()?n:t||n;return r.isTimeSeries()?o=t?r.parseDate(t):r.parseDate(r.getXValue(e,n)):r.isCustomX()&&!r.isCategorized()&&(o=M(t)?+t:r.getXValue(e,n)),o},cloneTarget:function(t){return{id:t.id,id_org:t.id_org,values:t.values.map((function(t){return{x:t.x,value:t.value,id:t.id}}))}},updateXs:function(t){t.length&&(this.xs=t.map((function(t){return t.x})))},getPrevX:function(i){var t=this.xs[i-1];return F(t)?t:null},getNextX:function(i){var t=this.xs[i+1];return F(t)?t:null},getBaseValue:function(data){var t=this,e=data.value;return e&&(t.isAreaRangeType(data)?e=t.getAreaRangeData(data,"mid"):t.isBubbleZType(data)&&(e=t.getBubbleZData(e,"y"))),e},getMinMaxValue:function(data){var t,e,n=this.getBaseValue.bind(this);return(data||this.data.targets.map((function(t){return t.values}))).forEach((function(r,i){var o=r.map(n).filter(L);t=Math.min.apply(Math,[i?t:1/0].concat(y(o))),e=Math.max.apply(Math,[i?e:-1/0].concat(y(o)))})),{min:t,max:e}},getMinMaxData:function(){var t=this,e="$minMaxData",n=t.getCache(e);if(!n){var data=t.data.targets.map((function(t){return t.values})),r=t.getMinMaxValue(data),o=[],c=[];data.forEach((function(e){var n=t.getFilteredDataByValue(e,r.min),l=t.getFilteredDataByValue(e,r.max);n.length&&(o=o.concat(n)),l.length&&(c=c.concat(l))})),t.addCache(e,n={min:o,max:c})}return n},getTotalPerIndex:function(){var t=this,e=t.getCache("$totalPerIndex");return t.isStackNormalized()&&!e&&(e=[],t.data.targets.forEach((function(t){t.values.forEach((function(t,i){e[i]||(e[i]=0),e[i]+=L(t.value)?t.value:0}))}))),e},getTotalDataSum:function(){var t=this,e="$totalDataSum",n=t.getCache(e);if(!n){var r=nt(t.data.targets.map((function(t){return t.values}))).map((function(t){return t.value})).reduce((function(p,t){return p+t}));t.addCache(e,n=r)}return n},getFilteredDataByValue:function(data,t){var e=this;return data.filter((function(n){return e.getBaseValue(n)===t}))},getMaxDataCount:function(){return Math.max.apply(Math,y(this.data.targets.map((function(t){return t.values.length}))))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return e>1?(t=t.map((function(t){return t.values})).reduce((function(a,b){return a.concat(b)})).map((function(t){return t.x})),t=at(et(t)).map((function(t,e){return{x:t,index:e}}))):e&&(t=t[0].values),t},mapToIds:function(t){return t.map((function(t){return t.id}))},mapToTargetIds:function(t){return t?B(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var n,r=this.mapToIds(t),i=0;n=r[i];i++)if(n===e)return!0;return!1},isTargetToShow:function(t){return this.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter((function(t){return e.isTargetToShow(t.id)}))},mapTargetsToUniqueXs:function(t){var e=[];return t&&t.length&&(e=et(nt(t.map((function(t){return t.values.map((function(t){return+t.x}))})))),e=this.isTimeSeries()?e.map((function(t){return new Date(+t)})):e.map((function(t){return+t}))),at(e)},addHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter((function(e){return t.indexOf(e)<0}))},addHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter((function(e){return t.indexOf(e)<0}))},getValuesAsIdKeyed:function(t){var e=this,n={},r=e.isMultipleX(),o=r?e.mapTargetsToUniqueXs(t).map((function(t){return O(t)?t:+t})):null;return t.forEach((function(t){var data=[];t.values.forEach((function(t){var n=t.value;B(n)?data.push.apply(data,y(n)):Y(n)&&"high"in n?data.push.apply(data,y(Object.values(n))):e.isBubbleZType(t)?data.push(e.getBubbleZData(n,"y")):r?data[e.getIndexByX(t.x,o)]=n:data.push(n)})),n[t.id]=data})),n},checkValueInTargets:function(t,e){for(var n,r=Object.keys(t),i=0;i<r.length;i++){n=t[r[i]].values;for(var o=0;o<n.length;o++)if(e(n[o].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,(function(t){return t<0}))},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,(function(t){return t>0}))},_checkOrder:function(t){var e=this.config.data_order;return O(e)&&e.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=this,n=e.config,r=y(t),o=e.isOrderAsc(),c=e.isOrderDesc();return o||c?r.sort((function(t,e){var n=function(p,t){return p+Math.abs(t.value)},r=t.values.reduce(n,0),c=e.values.reduce(n,0);return o?c-r:r-c})):C(n.data_order)&&r.sort(n.data_order),r},filterByX:function(t,e){return nt(t.map((function(t){return t.values}))).filter((function(t){return t.x-e==0}))},filterRemoveNull:function(data){var t=this;return data.filter((function(e){return M(t.getBaseValue(e))}))},filterByXDomain:function(t,e){return t.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(t){return e[0]<=t.x&&t.x<=e[1]}))}}))},hasDataLabel:function(){var t=this.config.data_labels;return R(t)&&t||z(t)&&P(t)},getDataLabelLength:function(t,e,n){var r=this,o=[0,0];return r.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text((function(t){return r.dataLabelFormat(t.id)(t)})).each((function(t,i){o[i]=1.3*this.getBoundingClientRect()[n]})).remove(),o},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var i,n=t[e].x,r=[];for(i=e-1;i>=0&&n===t[i].x;i--)r.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)r.push(t[i]);return r},findClosestFromTargets:function(t,e){var n=this,r=t.map((function(t){return n.findClosest(t.values,e)}));return n.findClosest(r,e)},findClosest:function(t,e){var n,r=this,o=r.config.point_sensitivity;return t.filter((function(t){return t&&r.isBarType(t.id)})).forEach((function(t){var e=r.main.select(".".concat(_.bars).concat(r.getTargetSelectorSuffix(t.id)," .").concat(_.bar,"-").concat(t.index)).node();!n&&r.isWithinBar(e)&&(n=t)})),t.filter((function(t){return t&&!r.isBarType(t.id)})).forEach((function(t){var c=r.dist(t,e);c<o&&(o=c,n=t)})),n},dist:function(data,t){var e=this,n=e.config.axis_rotated,r=n?1:0,o=n?0:1,c=e.circleY(data,data.index),l=(e.zoomScale||e.x)(data.x);return Math.sqrt(Math.pow(l-t[r],2)+Math.pow(c-t[o],2))},convertValuesToStep:function(t){var e=this.config,n=e.axis_rotated,r=e.line_step_type,o=this.isCategorized(),c=B(t)?t.concat():[t];if(!n&&!o)return t;var l=c[0].id,d=c[0].x-1,h=c[0].value;return o&&c.unshift({x:d,value:h,id:l}),"step-after"===r&&c.unshift({x:d-1,value:h,id:l}),h=c[(d=c.length)-1].value,o&&c.push({x:d,value:h,id:l}),"step-before"===r&&c.push({x:d+1,value:h,id:l}),c},convertValuesToRange:function(t){var e=B(t)?t.concat():[t],n=[];return e.forEach((function(t){var e=t.x,r=t.id;n.push({x:e,id:r,value:t.value[0]}),n.push({x:e,id:r,value:t.value[2]})})),n},updateDataAttributes:function(t,e){var n=this.config["data_".concat(t)];return D(e)||(Object.keys(e).forEach((function(t){n[t]=e[t]})),this.redraw({withLegend:!0})),n},getAreaRangeData:function(t,e){var n=t.value;if(B(n)){var r=["high","mid","low"].indexOf(e);return-1===r?null:n[r]}return n[e]},getRatio:function(t,e,n){var r=this,o=r.config,c=r.api,l=0;if(e&&c.data.shown.call(c).length){var d=c.data.values.bind(c);if(l=e.ratio||e.value,"arc"===t)if(r.pie.padAngle()()){var h=r.getTotalDataSum();r.hiddenTargetIds.length&&(h-=d(r.hiddenTargetIds).reduce((function(p,t){return p+t}))),l=e.value/h}else l=(e.endAngle-e.startAngle)/(Math.PI*(r.hasType("gauge")&&!o.gauge_fullCircle?1:2));else if("index"===t){var f=this.getTotalPerIndex();if(r.hiddenTargetIds.length){var x=d(r.hiddenTargetIds,!1);x.length&&(x=x.reduce((function(t,e){return t.map((function(t,i){return(L(t)?t:0)+e[i]}))})),f=f.map((function(t,i){return t-x[i]})))}e.ratio=L(e.value)&&f&&f[e.index]>0?e.value/f[e.index]:0,l=e.ratio}else"radar"===t&&(l=parseFloat(Math.max(e.value,0))/r.maxValue*o.radar_size_ratio)}return n&&l?100*l:l},updateDataIndexByX:function(t){var e=t.reduce((function(t,e,n){return t[+e.x]=n,t}),{});this.data.targets.forEach((function(t){t.values.forEach((function(t,n){var r=e[+t.x];void 0===r&&(r=n),t.index=r}))}))}});var mt=r(8);Q(vt.prototype,{convertData:function(t,e){var data,n=this;if(t.bindto?(data={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach((function(e){var n="data_".concat(e);n in t&&(data[e]=t[n])}))):data=t,data.url&&e)n.convertUrlToData(data.url,data.mimeType,data.headers,data.keys,e);else if(data.json)data=n.convertJsonToData(data.json,data.keys);else if(data.rows)data=n.convertRowsToData(data.rows);else if(data.columns)data=n.convertColumnsToData(data.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.");return B(data)&&data},convertUrlToData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,l=new XMLHttpRequest;l.open("GET",t),r&&Object.keys(r).forEach((function(t){l.setRequestHeader(t,r[t])})),l.onreadystatechange=function(){if(4===l.readyState){if(200!==l.status)throw new Error("".concat(t,": Something went wrong loading!"));var r=l.responseText;r&&c.call(e,e["convert".concat(K(n),"ToData")]("json"===n?JSON.parse(r):r,o))}},l.send()},_convertCsvTsvToData:function(t,e){var n,r=t.rows(e);return 1===r.length?(n=[{}],r[0].forEach((function(t){n[0][t]=null}))):n=t.parse(e),n},convertCsvToData:function(t){return this._convertCsvTsvToData({rows:mt.csvParseRows,parse:mt.csvParse},t)},convertTsvToData:function(t){return this._convertCsvTsvToData({rows:mt.tsvParseRows,parse:mt.tsvParse},t)},convertJsonToData:function(t,e){var n,data,r=this,o=this.config,c=[];if(B(t)){var l=e||o.data_keys;l.x?(n=l.value.concat(l.x),o.data_x=l.x):n=l.value,c.push(n),t.forEach((function(t){var e=n.map((function(e){var n=r.findValueInJson(t,e);return D(n)&&(n=null),n}));c.push(e)})),data=this.convertRowsToData(c)}else Object.keys(t).forEach((function(e){var n=t[e].concat();n.unshift(e),c.push(n)})),data=this.convertColumnsToData(c);return data},findValueInJson:function(object,path){if(void 0!==object[path])return object[path];var t=path.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),e=object;return t.some((function(t){return!(e=e&&t in e?e[t]:void 0)})),e},convertRowsToData:function(t){for(var e=t[0],n=[],i=1,r=t.length;i<r;i++){for(var o={},c=0,l=t[i].length;c<l;c++){if(D(t[i][c]))throw new Error("Source data is missing a component at (".concat(i,", ").concat(c,")!"));o[e[c]]=t[i][c]}n.push(o)}return n},convertColumnsToData:function(t){for(var e=[],i=0,n=t.length;i<n;i++)for(var r=t[i][0],o=1,c=t[i].length;o<c;o++){if(D(e[o-1])&&(e[o-1]={}),D(t[i][o]))throw new Error("Source data is missing a component at (".concat(i,", ").concat(o,")!"));e[o-1][r]=t[i][o]}return e},convertDataToTargets:function(data,t){var e,n=this,r=this,o=r.config,c=r.isTimeSeries(),l=Object.keys(data[0]||{}),d=l.length?l.filter(r.isNotX,r):[],h=l.length?l.filter(r.isX,r):[];d.forEach((function(l){var d=n.getXKey(l);n.isCustomX()||c?h.indexOf(d)>=0?e=(t&&r.data.xs[l]||[]).concat(data.map((function(t){return t[d]})).filter(M).map((function(t,i){return r.generateTargetX(t,l,i)}))):o.data_x?e=n.getOtherTargetXs():P(o.data_xs)&&(e=r.getXValuesOfXKey(d,r.data.targets)):e=data.map((function(t,i){return i})),e&&(n.data.xs[l]=e)})),d.forEach((function(t){if(!n.data.xs[t])throw new Error('x is not defined for id = "'.concat(t,'".'))}));var f=d.map((function(t,e){var n=o.data_idConverter(t),c=r.getXKey(t),l=r.isCustomX()&&r.isCategorized(),d=l&&data.map((function(t){return t.x})).every((function(t){return o.axis_x_categories.indexOf(t)>-1}));return{id:n,id_org:t,values:data.map((function(h,i){var f,x=h[c],v=h[t];return v=null===v||isNaN(v)||Y(v)?B(v)||Y(v)?v:null:+h[t],l&&0===e&&!D(x)?(!d&&0===e&&0===i&&(o.axis_x_categories=[]),-1===(f=o.axis_x_categories.indexOf(x))&&(f=o.axis_x_categories.length,o.axis_x_categories.push(x))):f=r.generateTargetX(x,t,i),(D(h[t])||r.data.xs[t].length<=i)&&(f=void 0),{x:f,value:v,id:n}})).filter((function(t){return F(t.x)}))}}));return f.forEach((function(t){o.data_xSort&&(t.values=t.values.sort((function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}))),t.values.forEach((function(t,i){return t.index=i})),r.data.xs[t.id].sort((function(t,e){return t-e}))})),r.hasNegativeValue=r.hasNegativeValueInTargets(f),r.hasPositiveValue=r.hasPositiveValueInTargets(f),o.data_type&&r.setTargetType(r.mapToIds(f).filter((function(t){return!(t in o.data_types)})),o.data_type),f.forEach((function(t){return r.addCache(t.id_org,t,!0)})),f}}),Q(vt.prototype,{load:function(t,e){var n=this,r=t;r&&(e.filter&&(r=r.filter(e.filter)),(e.type||e.types)&&r.forEach((function(t){var r=e.types&&e.types[t.id]||e.type;n.setTargetType(t.id,r)})),n.data.targets.forEach((function(t){for(var i=0;i<r.length;i++)if(t.id===r[i].id){t.values=r[i].values,r.splice(i,1);break}})),n.data.targets=n.data.targets.concat(r)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},loadFromArgs:function(t){var e=this;if(e.config){e.resetCache();var data=t.data||e.convertData(t,(function(n){return e.load(e.convertDataToTargets(n),t)}));data&&e.load(e.convertDataToTargets(data),t)}},unload:function(t,e){var n=this,r=e,o=t;return n.resetCache(),r||(r=function(){}),(o=o.filter((function(t){return n.hasTarget(n.data.targets,t)})))&&0!==o.length?(n.svg.selectAll(o.map((function(t){return n.selectorTarget(t)}))).transition().style("opacity","0").remove().call(n.endall,r),void o.forEach((function(t){n.withoutFadeIn[t]=!1,n.legend&&n.legend.selectAll(".".concat(_.legendItem).concat(n.getTargetSelectorSuffix(t))).remove(),n.data.targets=n.data.targets.filter((function(e){return e.id!==t}))}))):void r()}}),Q(vt.prototype,{categoryName:function(i){var t=this.config;return i<t.axis_x_categories.length?t.axis_x_categories[i]:i}});var bt=r(9);Q(vt.prototype,{initEventRect:function(){this.main.select(".".concat(_.chart)).append("g").attr("class",_.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t,e=this,n=e.config,r=e.isMultipleX(),o=n.zoom_enabled,c=e.main.select(".".concat(_.eventRects)).style("cursor",o&&"drag"!==o.type?n.axis_rotated?"ns-resize":"ew-resize":null).classed(_.eventRectsMultiple,r).classed(_.eventRectsSingle,!r);if(c.selectAll(".".concat(_.eventRect)).remove(),e.eventRect=c.selectAll(".".concat(_.eventRect)),r)t=e.eventRect.data([0]),t=e.generateEventRectsForMultipleXs(t.enter()).merge(t);else{var l=e.getMaxDataCountTarget();e.updateDataIndexByX(l),e.updateXs(l),e.updatePointClass(!0),c.datum(l),e.eventRect=c.selectAll(".".concat(_.eventRect)),(t=e.eventRect.data((function(t){return t}))).exit().remove(),t=e.generateEventRectsForSingleX(t.enter()).merge(t)}e.updateEventRect(t),"touch"!==e.inputType||e.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(r)},bindTouchOnEventRect:function(t){var e,n=this,r=n.config,o=function(){var t=f.event.changedTouches[0];return Object(f.select)(S.elementFromPoint(t.clientX,t.clientY))},c=function(e){if(t)n.selectRectForMultipleXs(e);else{var r=o(),c=function(t){var e=t&&t.attr("class")&&1*t.attr("class").replace(new RegExp("(".concat(_.eventRect,"-?|s)"),"g"),"");return(isNaN(e)||null===e)&&(e=-1),e}(r);n.callOverOutForTouch(c),-1===c?n.unselectRect():n.selectRectForSingle(e,r,c)}},l=r.interaction_inputType_touch.preventDefault,d=R(l)&&l||!1,h=!isNaN(l)&&l||null;n.svg.on("touchstart.eventRect touchmove.eventRect",(function(){var t=o(),l=f.event;if(!t.empty()&&t.classed(_.eventRect)){if(n.dragging||n.flowing||n.hasArcType()||l.touches.length>1)return;(function(t){var n=t.type,o=t.changedTouches[0]["client".concat(r.axis_rotated?"Y":"X")];"touchstart"===n?d?t.preventDefault():null!==h&&(e=o):"touchmove"===n&&(d||!0===e||null!==h&&Math.abs(e-o)>=h)&&(e=!0,t.preventDefault())})(l),c(this)}else n.unselectRect(),n.callOverOutForTouch()}),!0).on("touchend.eventRect",(function(){var t=o();!t.empty()&&t.classed(_.eventRect)&&(n.hasArcType()||!n.toggleShape||n.cancelClick)&&n.cancelClick&&(n.cancelClick=!1)}),!0)},updateEventRect:function(t){var e,n,r,o,c=this,l=c.config,d=c.zoomScale||c.x,h=t||c.eventRect.data(),f=l.axis_rotated;if(c.isMultipleX())e=0,n=0,r=c.width,o=c.height;else{var x,v;if(c.isCategorized())x=c.getEventRectWidth(),v=function(t){return d(t.x)-x/2};else{var _=function(t){var e=t.index;return{prev:c.getPrevX(e),next:c.getNextX(e)}};x=function(t){var e=_(t);return null===e.prev&&null===e.next?f?c.height:c.width:(null===e.prev&&(e.prev=d.domain()[0]),null===e.next&&(e.next=d.domain()[1]),Math.max(0,(d(e.next)-d(e.prev))/2))},v=function(t){var e=_(t),n=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=d.domain()[0]),(d(n)+d(e.prev))/2)}}e=f?0:v,n=f?v:0,r=f?c.width:x,o=f?x:c.height}h.attr("class",c.classEvent.bind(c)).attr("x",e).attr("y",n).attr("width",r).attr("height",o)},selectRectForSingle:function(t,e,n){var r=this,o=r.config,c=o.data_selection_enabled,l=o.data_selection_grouped,d=o.tooltip_grouped,h=r.getAllValuesOnIndex(n);d&&(r.showTooltip(h,t),r.showXGridFocus(h),!c||l)||r.main.selectAll(".".concat(_.shape,"-").concat(n)).each((function(){Object(f.select)(this).classed(_.EXPANDED,!0),c&&e.style("cursor",l?"pointer":null),d||(r.hideXGridFocus(),r.hideTooltip(),!l&&r.expandCirclesBars(n))})).filter((function(t){return r.isWithinShape(this,t)})).call((function(h){var f=h.data();c&&(l||o.data_selection_isselectable(f))&&e.style("cursor","pointer"),d||(r.showTooltip(f,t),r.showXGridFocus(f),r.unexpandCircles(),h.each((function(t){return r.expandCirclesBars(n,t.id)})))}))},expandCirclesBars:function(t,e,n){var r=this;r.config.point_focus_expand_enabled&&r.expandCircles(t,e,n),r.expandBars(t,e,n)},selectRectForMultipleXs:function(t){var e=this,n=e.config,r=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(r)){var o=Object(f.mouse)(t),c=e.findClosestFromTargets(r,o);if(e.mouseover&&(!c||c.id!==e.mouseover.id)&&(n.data_onout.call(e.api,e.mouseover),e.mouseover=void 0),!c)return void e.unselectRect();var l=(e.isBubbleType(c)||e.isScatterType(c)||!n.tooltip_grouped?[c]:e.filterByX(r,c.x)).map((function(t){return e.addName(t)}));e.showTooltip(l,t),e.expandCirclesBars(c.index,c.id,!0),e.showXGridFocus(l),(e.isBarType(c.id)||e.dist(c,o)<n.point_sensitivity)&&(e.svg.select(".".concat(_.eventRect)).style("cursor","pointer"),!e.mouseover&&(n.data_onover.call(e.api,c),e.mouseover=c))}},unselectRect:function(){var t=this;t.svg.select(".".concat(_.eventRect)).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t._handleLinkedCharts(!1),t.unexpandCircles(),t.unexpandBars()},setOverOut:function(t,e){var n=this,r=n.config,o=Y(e);if(o||-1!==e){var c=r[t?"data_onover":"data_onout"].bind(n.api);if(r.color_onover&&n.setOverColor(t,e,o),o)c(e,n.main.select(".".concat(_.arc,"-").concat(e.id)).node());else if(r.tooltip_grouped)t&&n.expandCirclesBars(e,null,!0),n.isMultipleX()||n.main.selectAll(".".concat(_.shape,"-").concat(e)).each((function(t){c(t,this)}));else{var l=n.setOverOut,d=l.last||[],h=n.main.selectAll(".".concat(_.shape,"-").concat(e)).filter((function(t){return n.isWithinShape(this,t)}));h.each((function(t){var e=this;(0===d.length||d.every((function(t){return t!==e})))&&(c(t,this),d.push(this))})),d.length>0&&h.empty()&&(c=r.data_onout.bind(n.api),d.forEach((function(t){return c(Object(f.select)(t).datum(),t)})),d=[]),l.last=d}}},callOverOutForTouch:function(t){var e=this,n=e.callOverOutForTouch,r=n.last;(Y(t)&&r?t.id!==r.id:t!==r)&&((r||L(r))&&e.setOverOut(!1,r),(t||L(t))&&e.setOverOut(!0,t),n.last=t)},getDraggableSelection:function(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(bt.drag)().on("drag",(function(){t.drag(Object(f.mouse)(this))})).on("start",(function(){t.dragstart(Object(f.mouse)(this))})).on("end",(function(){t.dragend()})):function(){}},generateEventRectsForSingleX:function(t){var e=this,n=e.config,rect=t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("click",(function(t){e.clickHandlerForSingleX.bind(this)(t,e)})).call(e.getDraggableSelection());return"mouse"===e.inputType&&rect.on("mouseover",(function(t){e.dragging||e.flowing||e.hasArcType()||e.config.tooltip_grouped&&e.setOverOut(!0,t.index)})).on("mousemove",(function(t){if(!(e.dragging||e.flowing||e.hasArcType())){var n=t.index,r=e.svg.select(".".concat(_.eventRect,"-").concat(n));e.isStepType(t)&&"step-after"===e.config.line_step_type&&Object(f.mouse)(this)[0]<e.x(e.getXValue(t.id,n))&&(n-=1),-1===n?e.unselectRect():e.selectRectForSingle(this,r,n),e.config.tooltip_grouped||e.setOverOut(-1!==n,t.index)}})).on("mouseout",(function(t){!e.config||e.hasArcType()||(e.unselectRect(),e.setOverOut(!1,t.index))})),rect},clickHandlerForSingleX:function(t,e){var n=e,r=n.config;if(n.hasArcType()||!n.toggleShape||n.cancelClick)n.cancelClick&&(n.cancelClick=!1);else{var o=t.index;n.main.selectAll(".".concat(_.shape,"-").concat(o)).each((function(t){(r.data_selection_grouped||n.isWithinShape(this,t))&&(n.toggleShape(this,t,o),r.data_onclick.call(n.api,t,this))}))}},generateEventRectsForMultipleXs:function(t){var e=this,rect=t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",_.eventRect).on("click",(function(){e.clickHandlerForMultipleXS.bind(this)(e)})).call(e.getDraggableSelection());return"mouse"===e.inputType&&rect.on("mouseover mousemove",(function(){e.selectRectForMultipleXs(this)})).on("mouseout",(function(){!e.config||e.hasArcType()||e.unselectRect()})),rect},clickHandlerForMultipleXS:function(t){var e=t,n=e.config,r=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(r)){var o=Object(f.mouse)(this),c=e.findClosestFromTargets(r,o);!c||(e.isBarType(c.id)||e.dist(c,o)<n.point_sensitivity)&&e.main.selectAll(".".concat(_.shapes).concat(e.getTargetSelectorSuffix(c.id))).selectAll(".".concat(_.shape,"-").concat(c.index)).each((function(){(n.data_selection_grouped||e.isWithinShape(this,c))&&(e.toggleShape(this,c,c.index),n.data_onclick.call(e.api,c,this))}))}},dispatchEvent:function(t,e,n){var r=this.isMultipleX(),o=".".concat(r?_.eventRect:"".concat(_.eventRect,"-").concat(e)),c=this.main.select(o).node(),l=c.getBoundingClientRect(),d=l.width,h=l.left,f=l.top,x=h+(n?n[0]:0)+(r?0:d/2),v=f+(n?n[1]:0);ct[/^(mouse|click)/.test(t)?"mouse":"touch"](c,t,{screenX:x,screenY:v,clientX:x,clientY:v})}}),Q(vt.prototype,{setContainerSize:function(){var t=this;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,n=e.size_height||t.getParentHeight();return n>0?n:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getAxisSize:function(t){var e=this,n=e.config.axis_rotated;return n&&"x"===t||!n&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getCurrentPaddingTop:function(){var t=this,e=t.config,n=e.axis_y2_axes.length,r=M(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(r+=t.getTitlePadding()),n&&e.axis_rotated&&(r+=t.getHorizontalAxisHeight("y2")*n),r},getCurrentPaddingBottom:function(){var t=this.config,e=t.axis_rotated?"y":"x",n=t["axis_".concat(e,"_axes")].length;return(M(t.padding_bottom)?t.padding_bottom:0)+(n?this.getHorizontalAxisHeight(e)*n:0)},getCurrentPaddingLeft:function(t){var e=this,n=e.config,r=n.axis_rotated,o=r?"x":"y",c=n["axis_".concat(o,"_axes")].length,l=e.getAxisWidthByAxisId(o,t);return(M(n.padding_left)?n.padding_left:r?n.axis_x_show?Math.max(E(l),40):1:!n.axis_y_show||n.axis_y_inner?e.axis.getYAxisLabelPosition().isOuter?30:1:E(l))+l*c},getCurrentPaddingRight:function(){var t=this,e=t.config,n=t.isLegendRight?t.getLegendWidth()+20:0,r=e.axis_y2_axes.length,o=t.getAxisWidthByAxisId("y2");return(M(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):E(o)+n)+o*r},getParentRectValue:function(t){for(var e,n="offset".concat(K(t)),r=this.selectChart.node();!e&&r&&"BODY"!==r.tagName;){try{e=r.getBoundingClientRect()[t]}catch(t){n in r&&(e=r[n])}r=r.parentNode}if("width"===t){var o=S.body.offsetWidth;e>o&&(e=o)}return e},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?parseInt(t,10):0},getSvgLeft:function(t){var e=this,n=e.config,r=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,o=n.axis_rotated?_.axisX:_.axisY,c=e.main.select(".".concat(o)).node(),l=c&&r?c.getBoundingClientRect():{right:0},d=e.selectChart.node().getBoundingClientRect(),h=e.hasArcType(),f=l.right-d.left-(h?0:e.getCurrentPaddingLeft(t));return f>0?f:0},getAxisWidthByAxisId:function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},getHorizontalAxisHeight:function(t){var e=this,n=e.config,r=n.axis_rotated,o=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?(("x"===t&&!r&&n.axis_x_tick_rotate||"y"===t&&r&&n.axis_y_tick_rotate)&&(o=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n["axis_".concat(t,"_tick_rotate")])/180)),o+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||r?0:-10)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},getEventRectWidth:function(){return Math.max(0,this.xAxis.tickInterval())}});var Tt=r(10);Q(vt.prototype,{getShapeIndices:function(t){var e=this,n=e.config,r=n.data_xs,o=P(r),c={},i=o?{}:0;return o&&et(Object.keys(r).map((function(t){return r[t]}))).forEach((function(t){i[t]=0,c[t]={}})),e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach((function(t){for(var e,o=(t.id in r?r[t.id]:""),l=o?c[o]:c,d=0;e=n.data_groups[d];d++)if(!(e.indexOf(t.id)<0))for(var h,f=0;h=e[f];f++)if(h in l){l[t.id]=l[h];break}D(l[t.id])&&(l[t.id]=o?i[o]++:i++,l.__max__=(o?i[o]:i)-1)})),c},getIndices:function(t,e){var n=this.config.data_xs;return P(n)?t[n[e]]:t},getIndicesMax:function(t){return P(this.config.data_xs)?Object.keys(t).map((function(e){return t[e].__max__||0})).reduce((function(t,e){return t+e})):t.__max__},getShapeX:function(t,e,n){var r=this,o=n?r.subX:r.zoomScale||r.x,c=r.config.bar_padding,l=function(p,t){return p+t},d=z(t)&&t.total.length?t.total.reduce(l)/2:0;return function(n){var h=r.getIndices(e,n.id),f=n.id in h?h[n.id]:0,x=(h.__max__||0)+1,v=0;if(P(n.x)){var _=o(n.x);v=d?_-(t[n.id]||t.width)+t.total.slice(0,f+1).reduce(l)-d:_-(L(t)?t:t.width)*(x/2-f)}return t&&v&&x>1&&c&&(f&&(v+=c*f),x>2?v-=(x-1)*c/2:2===x&&(v-=c/2)),v}},getShapeY:function(t){var e=this,n=e.isStackNormalized();return function(r){var o=n?e.getRatio("index",r,!0):e.isBubbleZType(r)?e.getBubbleZData(r.value,"y"):r.value;return(t?e.getSubYScale(r.id):e.getYScale(r.id))(o)}},getShapeOffsetData:function(t){var e=this,n=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(t,e))),r=n.map((function(t){var n=t.values;e.isStepType(t)&&(n=e.convertValuesToStep(n));var r,o=n.reduce((function(t,e){return t[+e.x]=e,t}),{});return r=e.isStackNormalized()?n.map((function(t){return e.getRatio("index",t,!0)})):n.map((function(t){return t.value})),{id:t.id,rowValues:n,rowValueMapByXValue:o,values:r}}));return{indexMapByTargetId:n.reduce((function(t,e,n){return t[e.id]=n,t}),{}),shapeOffsetTargets:r}},getShapeOffset:function(t,e,n){var r=this,o=r.getShapeOffsetData(t),c=o.shapeOffsetTargets,l=o.indexMapByTargetId;return function(t,o){var d=r.getIndices(e,t.id),h=n?r.getSubYScale(t.id):r.getYScale(t.id),f=h(0),x=+t.x,v=f;return c.forEach((function(e){var n=e.rowValues,r=e.values;if(e.id!==t.id&&d[e.id]===d[t.id]&&l[e.id]<l[t.id]){var c=n[o];c&&+c.x===x||(c=e.rowValueMapByXValue[x]),c&&c.value*t.value>=0&&(v+=h(r[c.index])-f)}})),v}},isWithinShape:function(t,e){var n,r=this,o=Object(f.select)(t);return r.isTargetToShow(e.id)?r.hasValidPointType(t.nodeName)?n=r.isStepType(e)?r.isWithinStep(t,r.getYScale(e.id)(e.value)):r.isWithinCircle(t,r.isBubbleType(e)?1.5*r.pointSelectR(e):0):"path"===t.nodeName&&(n=!o.classed(_.bar)||r.isWithinBar(t)):n=!1,n},getInterpolate:function(t){var e=this.getInterpolateType(t);return{basis:Tt.curveBasis,"basis-closed":Tt.curveBasisClosed,"basis-open":Tt.curveBasisOpen,bundle:Tt.curveBundle,cardinal:Tt.curveCardinal,"cardinal-closed":Tt.curveCardinalClosed,"cardinal-open":Tt.curveCardinalOpen,"catmull-rom":Tt.curveCatmullRom,"catmull-rom-closed":Tt.curveCatmullRomClosed,"catmull-rom-open":Tt.curveCatmullRomOpen,"monotone-x":Tt.curveMonotoneX,"monotone-y":Tt.curveMonotoneY,natural:Tt.curveNatural,"linear-closed":Tt.curveLinearClosed,linear:Tt.curveLinear,step:Tt.curveStep,"step-after":Tt.curveStepAfter,"step-before":Tt.curveStepBefore}[e]},getInterpolateType:function(t){var e=this,n=e.config.spline_interpolation_type,r=e.isInterpolationType(n)?n:"cardinal";return e.isSplineType(t)?r:e.isStepType(t)?e.config.line_step_type:"linear"}});var wt=r(11);Q(vt.prototype,{initPie:function(){var t=this,e=t.config,n=e.data_type,r=e.pie_padding,o=e["".concat(n,"_startingAngle")]||0,c=(t.hasType("pie")&&r?.01*r:e["".concat(n,"_padAngle")])||0;t.pie=Object(Tt.pie)().startAngle(o).endAngle(o+2*Math.PI).padAngle(c).sortValues(t.isOrderAsc()||t.isOrderDesc()?function(a,b){return t.isOrderAsc()?a-b:b-a}:null).value((function(t){return t.values.reduce((function(a,b){return a+b.value}),0)}))},updateRadius:function(){var t=this,e=t.config,n=e.pie_innerRadius,r=e.pie_padding,o=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=o?(t.radius-o)/t.radius:.6;var c=n||(r?r*(t.innerRadiusRatio+.1):0);t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:c},getInnerRadius:function(t){var e=this.innerRadius;return!L(e)&&t&&(e=e[t.data.id]||0),e},updateArc:function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},updateAngle:function(t){var e=this,n=e.config,r=e.pie,o=t,c=!1;if(!n)return null;if(o.data&&e.isGaugeType(o.data)){var l=e.getTotalDataSum();l>n.gauge_max&&(n.gauge_max=l);var d=Math.PI*(n.gauge_fullCircle?2:1),h=n.gauge_startingAngle,f=d*(l/(n.gauge_max-n.gauge_min));r=e.pie.startAngle(h).endAngle(f+h)}return r(e.filterTargetsToShow()).forEach((function(t){c||t.data.id!==o.data.id||(c=!0,o=t)})),isNaN(o.startAngle)&&(o.startAngle=0),isNaN(o.endAngle)&&(o.endAngle=o.startAngle),c?o:null},getSvgArc:function(){var t=this,e=t.getInnerRadius(),n=Object(Tt.arc)().outerRadius(t.radius).innerRadius(L(e)?e:0),r=function(r,o){var path="M 0 0";if(r.value||r.data){L(e)||(n=n.innerRadius(t.getInnerRadius(r)));var c=!o&&t.updateAngle(r);o?path=n(r):c&&(path=n(c))}return path};return r.centroid=n.centroid,r},getSvgArcExpanded:function(t){var e=this,n=Object(Tt.arc)().outerRadius(e.radiusExpanded*(t||1));return function(t){var r=e.updateAngle(t);return r?n.innerRadius(e.getInnerRadius(t))(r):"M 0 0"}},getArc:function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e=this,n=e.config,r=e.updateAngle(t),o="";if(r&&(!e.hasType("gauge")||e.data.targets.length>1)){var c=this.svgArc.centroid(r),l=isNaN(c[0])?0:c[0],d=isNaN(c[1])?0:c[1],h=Math.sqrt(l*l+d*d),f=e.hasType("donut")&&n.donut_label_ratio||e.hasType("pie")&&n.pie_label_ratio;f=f?C(f)?f(t,e.radius,h):f:e.radius&&(h?(36/e.radius>.375?1.175-36/e.radius:.8)*e.radius/h:0),o="translate(".concat(l*f,",").concat(d*f,")")}return o},convertToArcData:function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var e=this;e.shouldShowArcLabel()&&t.each((function(t){var n=Object(f.select)(this),r=e.updateAngle(t),o=r?r.value:t.value,c=e.getRatio("arc",r),l=t.data.id,d=e.hasType("gauge");if(d||e.meetsArcLabelThreshold(c)){var text=(e.getArcLabelFormat()||e.defaultArcValueFormat)(o,c,l).toString();U(n,text,[-1,1],d)}}))},textForGaugeMinMax:function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},expandArc:function(t){var e=this;if(e.transiting)var n=setInterval((function(){e.transiting||(clearInterval(n),e.legend.selectAll(".".concat(_.legendItemFocused)).size()>0&&e.expandArc(t))}),10);else{var r=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(r,".".concat(_.chartArc))).each((function(t){if(e.shouldExpand(t.data.id)&&0!==t.value){var n=e.expandDuration(t.data.id);Object(f.select)(this).selectAll("path").transition().duration(n).attr("d",e.svgArcExpanded).transition().duration(2*n).attr("d",e.svgArcExpandedSub)}}))}},unexpandArc:function(t){var e=this;if(!e.transiting){var n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n,".".concat(_.chartArc))).selectAll("path").transition().duration((function(t){return e.expandDuration(t.data.id)})).attr("d",e.svgArc),e.svg.selectAll("".concat(_.arc)).style("opacity","1")}},expandDuration:function(t){var e,n=this,r=n.config;return n.isDonutType(t)?e="donut":n.isGaugeType(t)?e="gauge":n.isPieType(t)&&(e="pie"),e?r["".concat(e,"_expand_duration")]:50},shouldExpand:function(t){var e=this,n=e.config;return e.isDonutType(t)&&n.donut_expand||e.isGaugeType(t)&&n.gauge_expand||e.isPieType(t)&&n.pie_expand},shouldShowArcLabel:function(){var t=this,e=t.config;return["pie","donut","gauge"].some((function(n){return t.hasType(n)&&e["".concat(n,"_label_show")]}))},meetsArcLabelThreshold:function(t){var e=this.config;return t>=(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)},getArcLabelFormat:function(){var t=this,e=t.config,n=e.pie_label_format;return t.hasType("gauge")?n=e.gauge_label_format:t.hasType("donut")&&(n=e.donut_label_format),n},getGaugeLabelExtents:function(){return this.config.gauge_label_extents},getArcTitle:function(){var t=this,e=t.hasType("donut")?"donut":t.hasType("gauge")&&"gauge";return e?t.config["".concat(e,"_title")]:""},updateTargetsForArc:function(t){var e=this,main=e.main,n=e.hasType("gauge"),r=e.classChartArc.bind(e),o=e.classArcs.bind(e),c=e.classFocus.bind(e),l=main.select(".".concat(_.chartArcs)).selectAll(".".concat(_.chartArc)).data(e.pie(t)).attr("class",(function(t){return r(t)+c(t.data)})),d=l.enter().append("g").attr("class",r);d.append("g").attr("class",o).merge(l),d.append("text").attr("dy",n&&!e.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none")},initArc:function(){var t=this;t.arcs=t.main.select(".".concat(_.chart)).append("g").attr("class",_.chartArcs).attr("transform",t.getTranslate("arc")),t.setArcTitle()},setArcTitle:function(){var t=this,title=t.getArcTitle(),e=t.hasType("gauge");if(title){var text=t.arcs.append("text").attr("class",_[e?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle");e&&text.attr("dy","-0.3em").style("font-size","27px"),U(text,title,e?void 0:[-.6,1.35],!0)}},redrawArc:function(t,e,n){var r=this,o=r.config,main=r.main,c=o.interaction_enabled,l=main.selectAll(".".concat(_.arcs)).selectAll(".".concat(_.arc)).data(r.arcData.bind(r));l.exit().transition().duration(e).style("opacity","0").remove(),(l=l.enter().append("path").attr("class",r.classArc.bind(r)).style("fill",(function(t){return r.color(t.data)})).style("cursor",(function(t){return c&&o.data_selection_isselectable(t)?"pointer":null})).style("opacity","0").each((function(t){r.isGaugeType(t.data)&&(t.startAngle=o.gauge_startingAngle,t.endAngle=o.gauge_startingAngle),this._current=t})).merge(l)).attr("transform",(function(t){return!r.isGaugeType(t.data)&&n?"scale(0)":""})).style("opacity",(function(t){return t===this._current?"0":"1"})).each((function(){r.transiting=!0})).transition().duration(t).attrTween("d",(function(t){var e=r.updateAngle(t);if(!e)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var n=Object(wt.interpolate)(this._current,e);return this._current=n(0),function(e){var o=n(e);return o.data=t.data,r.getArc(o,!0)}})).attr("transform",n?"scale(1)":"").style("fill",(function(t){var e;return r.levelColor?(e=r.levelColor(t.data.values[0].value),o.data_colors[t.data.id]=e):e=r.color(t.data.id),e})).style("opacity","1").call(r.endall,(function(){if(r.levelColor){var path=Object(f.select)(this),t=path.datum();r.updateLegendItemColor(t.data.id,path.style("fill"))}r.transiting=!1})),c&&r.bindArcEvent(l),r.redrawArcText(t)},bindArcEvent:function(t){function e(t,e,n){r.expandArc(n),r.api.focus(n),r.toggleFocusLegend(n,!0),r.showTooltip([e],t)}function n(t){var e=t&&t.id||void 0;r.unexpandArc(e),r.api.revert(),r.revertLegend(),r.hideTooltip()}var r=this,o="touch"===r.inputType,c="mouse"===r.inputType;if(t.on("click",(function(t,i){var e,n=r.updateAngle(t);n&&(e=r.convertToArcData(n),r.toggleShape&&r.toggleShape(this,e,i),r.config.data_onclick.call(r.api,e,this))})),c&&t.on("mouseover",(function(t){if(!r.transiting){var n=r.updateAngle(t),o=n?r.convertToArcData(n):null;e(this,o,o&&o.id||void 0),r.setOverOut(!0,o)}})).on("mouseout",(function(t){if(!r.transiting){var e=r.updateAngle(t),o=e?r.convertToArcData(e):null;n(),r.setOverOut(!1,o)}})).on("mousemove",(function(t){var e=r.updateAngle(t),n=e?r.convertToArcData(e):null;r.showTooltip([n],this)})),o&&r.hasArcType()&&!r.radars){var l=function(){if(!r.transiting){var t=(d=f.event.changedTouches[0],Object(f.select)(S.elementFromPoint(d.clientX,d.clientY))).datum(),o=t&&t.data&&t.data.id?r.updateAngle(t):null,c=o?r.convertToArcData(o):null,l=c&&c.id||void 0;r.callOverOutForTouch(c),D(l)?n():e(this,c,l)}var d};r.svg.on("touchstart",l).on("touchmove",l)}},redrawArcText:function(t){var text,e=this,n=e.config,main=e.main,r=e.hasType("gauge");if(r&&1===e.data.targets.length&&n.gauge_title||(text=main.selectAll(".".concat(_.chartArc)).select("text").style("opacity","0").attr("class",(function(t){return e.isGaugeType(t.data)?_.gaugeValue:null})).call(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",(function(t){return e.isGaugeType(t.data)&&1===e.data.targets.length?"".concat(Math.round(e.radius/5),"px"):null})).transition().duration(t).style("opacity",(function(t){return e.isTargetToShow(t.data.id)&&e.isArcType(t.data)?"1":"0"}))),main.select(".".concat(_.chartArcsTitle)).style("opacity",e.hasType("donut")||r?"1":"0"),r){var o=n.gauge_fullCircle,c=-1*Math.PI/2,l=(o?-4:-1)*c;o&&text&&text.attr("dy","".concat(Math.round(e.radius/14))),e.arcs.select(".".concat(_.chartArcsBackground)).attr("d",(function(){var t={data:[{value:n.gauge_max}],startAngle:c,endAngle:l};return e.getArc(t,!0,!0)})),e.arcs.select(".".concat(_.chartArcsGaugeUnit)).attr("dy",".75em").text(n.gauge_label_show?n.gauge_units:""),n.gauge_label_show&&(e.arcs.select(".".concat(_.chartArcsGaugeMin)).attr("dx","".concat(-1*(e.innerRadius+(e.radius-e.innerRadius)/(o?1:2)),"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_min,!1)),!o&&e.arcs.select(".".concat(_.chartArcsGaugeMax)).attr("dx","".concat(e.innerRadius+(e.radius-e.innerRadius)/2,"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_max,!0)))}},initGauge:function(){var t=this,e=t.config,n=t.arcs,r=function(t){n.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")};t.hasType("gauge")&&(n.append("path").attr("class",_.chartArcsBackground),e.gauge_units&&r(_.chartArcsGaugeUnit),e.gauge_label_show&&(r(_.chartArcsGaugeMin),!e.gauge_fullCircle&&r(_.chartArcsGaugeMax)))},getGaugeLabelHeight:function(){return this.config.gauge_label_show?20:0}}),Q(vt.prototype,{initBar:function(){this.main.select(".".concat(_.chart)).append("g").attr("class",_.chartBars)},updateTargetsForBar:function(t){var e=this,n=e.config,r=e.classChartBar.bind(e),o=e.classBars.bind(e),c=e.classFocus.bind(e);e.main.select(".".concat(_.chartBars)).selectAll(".".concat(_.chartBar)).data(t).attr("class",(function(t){return r(t)+c(t)})).enter().append("g").attr("class",r).style("opacity","0").style("pointer-events","none").append("g").attr("class",o).style("cursor",(function(t){return n.data_selection_isselectable(t)?"pointer":null}))},updateBar:function(t){var e=this,n=e.barData.bind(e),r=e.classBar.bind(e),o=e.initialOpacity.bind(e);e.mainBar=e.main.selectAll(".".concat(_.bars)).selectAll(".".concat(_.bar)).data(n),e.mainBar.exit().transition().duration(t).style("opacity","0").remove(),e.mainBar=e.mainBar.enter().append("path").attr("class",r).style("fill",e.color).merge(e.mainBar).style("opacity",o)},redrawBar:function(t,e){return[(e?this.mainBar.transition($()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function(t,e){var n,r=this,o=r.config,c=t.tickInterval(r.getMaxDataCount()),l=o.data_groups.length,d=function(t){var n=t?o.bar_width[t]:o.bar_width,r=t?n.ratio:o.bar_width_ratio,l=t?n.max:o.bar_width_max,d=L(n)?n:e?c*r/e:0;return l&&d>l?l:d};return n=d(),!l&&z(o.bar_width)&&(n={width:n,total:[]},r.filterTargetsToShow(r.data.targets).forEach((function(t){o.bar_width[t.id]&&(n[t.id]=d(t.id),n.total.push(n[t.id]||n.width))}))),n},getBars:function(i,t){var e=this,n=M(i)?"-".concat(i):"";return(t?e.main.selectAll(".".concat(_.bars).concat(e.getTargetSelectorSuffix(t))):e.main).selectAll(".".concat(_.bar).concat(n))},expandBars:function(i,t,e){e&&this.unexpandBars(),this.getBars(i,t).classed(_.EXPANDED,!0)},unexpandBars:function(i){this.getBars(i).classed(_.EXPANDED,!1)},generateDrawBar:function(t,e){var n=this.config,r=this.generateGetBarPoints(t,e),o=n.axis_rotated,c=n.data_groups.length,l=n.bar_radius,d=n.bar_radius_ratio,h=L(l)&&l>0?function(){return l}:L(d)?function(t){return t*d}:null;return function(t,i){var e=r(t,i),n=+o,l=+!n,d=t.value<0,f=["",""],x=0;if(h&&!c){var v=o?l:n,_=e[2][v]-e[0][v];x=h(_);var y="a".concat(x,",").concat(x," ").concat(d?"1 0 0":"0 0 1"," ");f[+!o]="".concat(y).concat(x,",").concat(x),f[+o]="".concat(y).concat([-x,x][o?"sort":"reverse"]()),d&&f.reverse()}var path=o?"H".concat(e[1][n]-x," ").concat(f[0],"V").concat(e[2][l]-x," ").concat(f[1],"H").concat(e[3][n]):"V".concat(e[1][l]+(d?-x:x)," ").concat(f[0],"H").concat(e[2][n]-x," ").concat(f[1],"V").concat(e[3][l]);return"M".concat(e[0][n],",").concat(e[0][l]).concat(path,"z")}},generateGetBarPoints:function(t,e){var n=this,r=e?n.subXAxis:n.xAxis,o=n.getIndicesMax(t)+1,c=n.getBarW(r,o),l=n.getShapeX(c,t,!!e),d=n.getShapeY(!!e),h=n.getShapeOffset(n.isBarType,t,!!e),f=e?n.getSubYScale:n.getYScale;return function(t,i){var e=f.call(n,t.id)(0),r=h(t,i)||e,o=L(c)?c:c[t.id]||c.width,x=l(t),v=d(t);return n.config.axis_rotated&&(t.value>0&&v<e||t.value<0&&e<v)&&(v=e),[[x,r],[x,v-=e-r],[x+o,v],[x+o,r]]}},isWithinBar:function(t){var e=Object(f.mouse)(t),n=c(G(t),2),r=n[0],o=n[1],l=Math.min(r.x,o.x),d=Math.min(r.y,o.y),h=this.config.bar_sensitivity,x=t.getBBox(),v=x.width,_=x.height;return l-h<e[0]&&e[0]<l+v+h&&d-h<e[1]&&e[1]<d+_+h}}),Q(vt.prototype,{initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var t=this,e="$baseLength",n=t.getCache(e);return n||t.addCache(e,n=ot("min",[t.axes.x.select("path").node().getTotalLength(),t.axes.y.select("path").node().getTotalLength()])),n},getBubbleR:function(t){var e=this,n=e.config.bubble_maxR;C(n)?n=n(t):!L(n)&&(n=e.getBaseLength()/(2*e.getMaxDataCount())+12);var r=ot("max",e.getMinMaxData().max.map((function(t){return e.isBubbleZType(t)?e.getBubbleZData(t.value,"y"):Y(t.value)?t.value.mid:t.value}))),o=n*n*Math.PI,area=(e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value)*(o/r);return Math.sqrt(area/Math.PI)},getBubbleZData:function(t,e){return Y(t)?t[e]:t["y"===e?0:1]},isBubbleZType:function(t){return this.isBubbleType(t)&&(Y(t.value)&&("z"in t.value||"y"in t.value)||B(t.value)&&2===t.value.length)}}),Q(vt.prototype,{initLine:function(){this.main.select(".".concat(_.chart)).append("g").attr("class",_.chartLines)},updateTargetsForLine:function(t){var e=this,n=e.config,r=e.classChartLine.bind(e),o=e.classLines.bind(e),c=e.classAreas.bind(e),l=e.classCircles.bind(e),d=e.classFocus.bind(e),h=e.main.select(".".concat(_.chartLines)).selectAll(".".concat(_.chartLine)).data(t).attr("class",(function(t){return r(t)+d(t)})).enter().append("g").attr("class",r).style("opacity","0").style("pointer-events","none");h.append("g").attr("class",o),h.append("g").attr("class",c),n.point_show&&(n.data_selection_enabled&&h.append("g").attr("class",(function(t){return e.generateClass(_.selectedCircles,t.id)})),h.append("g").attr("class",l).style("cursor",(function(t){return n.data_selection_isselectable(t)?"pointer":null}))),t.forEach((function(t){e.main.selectAll(".".concat(_.selectedCircles).concat(e.getTargetSelectorSuffix(t.id))).selectAll("".concat(_.selectedCircle)).each((function(e){e.value=t.values[e.index].value}))}))},updateLine:function(t){var e=this;e.mainLine=e.main.selectAll(".".concat(_.lines)).selectAll(".".concat(_.line)).data(e.lineData.bind(e)),e.mainLine.exit().transition().duration(t).style("opacity","0").remove(),e.mainLine=e.mainLine.enter().append("path").attr("class",(function(t){return"".concat(e.classLine.bind(e)(t)," ").concat(e.extraLineClasses(t)||"")})).style("stroke",e.color).merge(e.mainLine).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",(function(t){return e.isStepType(t)?"crispEdges":""})).attr("transform",null)},redrawLine:function(t,e){return[(e?this.mainLine.transition($()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function(t){var e=this;return e.config.axis_rotated&&e.isStepType(t)?function(n){var r=e.getInterpolate(t)(n);return r.orgPoint=r.point,r.pointRotated=function(t,e){1===this._point&&(this._point=2);var n=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,n),this._context.lineTo(t,n),this._x=t,this._y=e},r.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},r}:e.getInterpolate(t)},generateDrawLine:function(t,e){var n=this,r=n.config,o=r.line_connectNull,c=r.axis_rotated,l=n.generateGetLinePoints(t,e),d=e?n.getSubYScale:n.getYScale,h=function(t){return(e?n.subxx:n.xx).call(n,t)},f=function(t,i){return n.isGrouped(t.id)?l(t,i)[0][1]:d.call(n,t.id)(n.getBaseValue(t))},line=Object(Tt.line)();line=c?line.x(f).y(h):line.x(h).y(f),o||(line=line.defined((function(t){return null!==n.getBaseValue(t)})));var x=e?n.subX:n.x;return function(t){var path,e=d.call(n,t.id),l=o?n.filterRemoveNull(t.values):t.values,h=0,f=0;if(n.isLineType(t)){var v=r.data_regions[t.id];v?path=n.lineWithRegions(l,x,e,v):(n.isStepType(t)&&(l=n.convertValuesToStep(l)),path=line.curve(n.getCurve(t))(l))}else l[0]&&(h=x(l[0].x),f=e(l[0].value)),path=c?"M ".concat(f," ").concat(h):"M ".concat(h," ").concat(f);return path||"M 0 0"}},generateGetLinePoints:function(t,e){var n=this,r=n.config,o=!!e,c=n.getShapeX(0,t,o),l=n.getShapeY(o),d=n.getShapeOffset(n.isLineType,t,o),h=o?n.getSubYScale:n.getYScale;return function(t,i){var e=h.call(n,t.id)(0),o=d(t,i)||e,f=c(t),x=l(t);r.axis_rotated&&(t.value>0&&x<e||t.value<0&&e<x)&&(x=e);var v=[f,x-(e-o)];return[v,v,v,v]}},lineWithRegions:function(t,e,n,r){var o,c,l,d,h=this,f=h.config.axis_rotated,x=h.isTimeSeries(),v=h.isCategorized()?.5:0,_=[],y=function(t,e){for(var n,i=0;n=e[i];i++)if(n.start<t&&t<=n.end)return n.style;return!1};if(F(r))for(var m,T=function(t,e){return D(t)?e:x?h.parseDate(t):t},i=0;m=r[i];i++){var w=T(m.start,t[0].x),A=T(m.end,t[t.length-1].x),style=m.style||{dasharray:"2 2"};_[i]={start:w,end:A,style:style}}for(var data,k=f?function(dt){return n(dt.value)}:function(dt){return e(dt.x)},S=f?function(dt){return e(dt.x)}:function(dt){return n(dt.value)},M=function(t){return"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1])},C=x?function(t,r,o,d){var h=t.x.getTime(),x=r.x-t.x,v=new Date(h+x*o),_=new Date(h+x*(o+d)),y=f?[[n(c(o)),e(v)],[n(c(o+l)),e(_)]]:[[e(v),n(c(o))],[e(_),n(c(o+l))]];return M(y)}:function(t,r,l,d){var h=f?[[n(c(l),!0),e(o(l))],[n(c(l+d),!0),e(o(l+d))]]:[[e(o(l),!0),n(c(l))],[e(o(l+d),!0),n(c(l+d))]];return M(h)},path="M",O=0;data=t[O];O++){var L=t[O-1];if(style=y(data.x,_),D(_)||!style)path+="".concat(O?"L":"").concat(k(data),",").concat(S(data));else{try{style=style.dasharray.split(" ")}catch(t){style="2 2".split(" ")}o=h.getScale(L.x+v,data.x+v,x),c=h.getScale(L.value,data.value);var R=e(data.x)-e(L.x),E=n(data.value)-n(L.value),dd=Math.sqrt(Math.pow(R,2)+Math.pow(E,2));d=(l=style[0]/dd)*style[1];for(var X=l;X<=1;X+=d)path+=C(L,data,X,l),X+d>=1&&(path+=C(L,data,1,0))}}return path},updateAreaGradient:function(){var t=this;t.data.targets.forEach((function(e){var n="".concat(t.datetimeId,"-areaGradient").concat(t.getTargetSelectorSuffix(e.id));if(t.isAreaType(e)&&t.defs.select("#".concat(n)).empty()){var r=t.color(e),o=t.config.area_linearGradient,c=o.x,l=void 0===c?[0,0]:c,d=o.y,h=void 0===d?[0,1]:d,f=o.stops,x=void 0===f?[[0,r,1],[1,r,0]]:f,v=t.defs.append("linearGradient").attr("id","".concat(n)).attr("x1",l[0]).attr("x2",l[1]).attr("y1",h[0]).attr("y2",h[1]);x.forEach((function(t){var n=C(t[1])?t[1](e.id):t[1];v.append("stop").attr("offset",t[0]).attr("stop-color",n||r).attr("stop-opacity",t[2])}))}}))},updateAreaColor:function(t){var e=this;return e.config.area_linearGradient?"url(#".concat(e.datetimeId,"-areaGradient").concat(e.getTargetSelectorSuffix(t.id),")"):e.color(t)},updateArea:function(t){var e=this;e.config.area_linearGradient&&e.updateAreaGradient(),e.mainArea=e.main.selectAll(".".concat(_.areas)).selectAll(".".concat(_.area)).data(e.lineData.bind(e)),e.mainArea.exit().transition().duration(t).style("opacity","0").remove(),e.mainArea=e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.updateAreaColor.bind(e)).style("opacity",(function(){return e.orgAreaOpacity=Object(f.select)(this).style("opacity"),"0"})).merge(e.mainArea),e.mainArea.style("opacity",e.orgAreaOpacity)},redrawArea:function(t,e){var n=this;return[(e?n.mainArea.transition($()):n.mainArea).attr("d",t).style("fill",n.updateAreaColor.bind(n)).style("opacity",(function(t){return(n.isAreaRangeType(t)?n.orgAreaOpacity/1.75:n.orgAreaOpacity)+""}))]},generateDrawArea:function(t,e){var n=this,r=n.config,o=r.line_connectNull,c=r.axis_rotated,l=n.generateGetAreaPoints(t,e),d=e?n.getSubYScale:n.getYScale,h=function(t){return(e?n.subxx:n.xx).call(n,t)},f=function(t,i){return n.isGrouped(t.id)?l(t,i)[0][1]:d.call(n,t.id)(n.isAreaRangeType(t)?n.getAreaRangeData(t,"high"):0)},x=function(t,i){return n.isGrouped(t.id)?l(t,i)[1][1]:d.call(n,t.id)(n.isAreaRangeType(t)?n.getAreaRangeData(t,"low"):t.value)};return function(t){var path,e=o?n.filterRemoveNull(t.values):t.values,l=0,d=0;if(n.isAreaType(t)){var area=Object(Tt.area)();area=c?area.y(h).x0(f).x1(x):area.x(h).y0(r.area_above?0:f).y1(x),o||(area=area.defined((function(t){return null!==n.getBaseValue(t)}))),n.isStepType(t)&&(e=n.convertValuesToStep(e)),path=area.curve(n.getCurve(t))(e)}else e[0]&&(l=n.x(e[0].x),d=n.getYScale(t.id)(e[0].value)),path=c?"M ".concat(d," ").concat(l):"M ".concat(l," ").concat(d);return path||"M 0 0"}},generateGetAreaPoints:function(t,e){var n=this,r=n.config,o=n.getShapeX(0,t,!!e),c=n.getShapeY(!!e),l=n.getShapeOffset(n.isAreaType,t,!!e),d=e?n.getSubYScale:n.getYScale;return function(t,i){var e=d.call(n,t.id)(0),h=l(t,i)||e,f=o(t),x=c(t);return r.axis_rotated&&(t.value>0&&x<e||t.value<0&&e<x)&&(x=e),[[f,h],[f,x-(e-h)],[f,x-(e-h)],[f,h]]}},updateCircle:function(){var t=this;if(t.config.point_show){t.mainCircle=t.main.selectAll(".".concat(_.circles)).selectAll(".".concat(_.circle)).data((function(e){return!t.isBarType(e)&&(!t.isLineType(e)||t.shouldDrawPointsForLine(e))&&t.labelishData(e)})),t.mainCircle.exit().remove();var e=t.point("create",this,t.pointR.bind(t),t.color);t.mainCircle=t.mainCircle.enter().append(e).merge(t.mainCircle).style("stroke",t.color).style("opacity",t.initialOpacityForCircle.bind(t))}},redrawCircle:function(t,e,n,r){var o=this,c=o.main.selectAll(".".concat(_.selectedCircle));if(!o.config.point_show)return[];var l=[];o.mainCircle.each((function(d){var h=o.point("update",o,t,e,o.opacityForCircle.bind(o),o.color,n,r,c).bind(this)(d);l.push(h)}));var d=o.isCirclePoint()?"c":"";return[l,c.attr("".concat(d,"x"),t).attr("".concat(d,"y"),e)]},circleX:function(t){var e=this,n=M(t.x);return e.config.zoom_enabled&&e.zoomScale?n?e.zoomScale(t.x):null:n?e.x(t.x):null},updateCircleY:function(){var t=this,e=t.generateGetLinePoints(t.getShapeIndices(t.isLineType),!1);t.circleY=function(n,i){var r=n.id;return t.isGrouped(r)?e(n,i)[0][1]:t.getYScale(r)(t.getBaseValue(n))}},getCircles:function(i,t){var e=this,n=M(i)?"-".concat(i):"";return(t?e.main.selectAll(".".concat(_.circles).concat(e.getTargetSelectorSuffix(t))):e.main).selectAll(".".concat(_.circle).concat(n))},expandCircles:function(i,t,e){var n=this,r=n.pointExpandedR.bind(n);e&&n.unexpandCircles();var o=n.getCircles(i,t).classed(_.EXPANDED,!0),c=r(o)/n.config.point_r,l=1-c;n.isCirclePoint()?o.attr("r",r):o.each((function(){var t=Object(f.select)(this);if("circle"===this.tagName)t.attr("r",r);else{var e=this.getBBox(),n=e.width,o=e.height,d=l*(+t.attr("x")+n/2),h=l*(+t.attr("y")+o/2);t.attr("transform","translate(".concat(d," ").concat(h,") scale(").concat(c,")"))}}))},unexpandCircles:function(i){var t=this,e=t.pointR.bind(t),n=t.getCircles(i).filter((function(){return Object(f.select)(this).classed(_.EXPANDED)})).classed(_.EXPANDED,!1);n.attr("r",e),t.isCirclePoint()||n.attr("transform","scale(".concat(e(n)/t.config.point_r,")"))},pointR:function(t){var e=this,n=e.config.point_r,r=n;return e.isStepType(t)?r=0:e.isBubbleType(t)?r=e.getBubbleR(t):C(n)&&(r=n(t)),r},pointExpandedR:function(t){var e=this,n=e.config,r=e.isBubbleType(t)?1.15:1.75;return n.point_focus_expand_enabled?n.point_focus_expand_r||e.pointR(t)*r:e.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return C(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var n=Object(f.mouse)(t),element=Object(f.select)(t),r=this.isCirclePoint()?"c":"",o=+element.attr("".concat(r,"x")),c=+element.attr("".concat(r,"y"));if(!o&&!c&&1===t.nodeType){var l=t.getBBox?t.getBBox():t.getBoundingClientRect();o=l.x,c=l.y}return Math.sqrt(Math.pow(o-n[0],2)+Math.pow(c-n[1],2))<(e||this.config.point_sensitivity)},isWithinStep:function(t,e){return Math.abs(e-Object(f.mouse)(t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||B(e)&&-1!==e.indexOf(t.id)}}),Q(vt.prototype,{hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){var e=t||this.config.point_type;return z(e)&&C(e.create)&&C(e.update)},insertPointInfoDefs:function(t,e){var n=function(t,e){for(var n,r=t.attributes,i=0;n=r[i];i++)n=n.name,e.setAttribute(n,t.getAttribute(n))},r=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,o=S.createElementNS(f.namespaces.svg,r.nodeName.toLowerCase());if(o.id=e,o.style.fill="inherit",o.style.stroke="inherit",n(r,o),r.childNodes&&r.childNodes.length){var c=Object(f.select)(o);"innerHTML"in o?c.html(r.innerHTML):tt(r.childNodes).forEach((function(t){n(t,c.append(t.tagName).node())}))}this.defs.node().appendChild(o)},pointFromDefs:function(t){return this.defs.select("#".concat(t))},updatePointClass:function(t){var e=this,n=!1;return(Y(t)||e.mainCircle)&&(n=!0===t?e.mainCircle.attr("class",e.classCircle.bind(e)):e.classCircle(t)),n},generatePoint:function(){var t=this,e=t.config,n=[],pattern=P(e.point_pattern)?e.point_pattern:[e.point_type];return function(e,r){for(var o=arguments.length,c=Array(o>2?o-2:0),l=2;l<o;l++)c[l-2]=arguments[l];return function(o){var l=o.id||o.data&&o.data.id||o,element=Object(f.select)(this);n.indexOf(l)<0&&n.push(l);var d=pattern[n.indexOf(l)%pattern.length];if(t.hasValidPointType(d))d=t[d];else if(!t.hasValidPointDrawMethods(d)){var h="".concat(t.datetimeId,"-point-").concat(l);if(t.pointFromDefs(h).size()<1&&t.insertPointInfoDefs(d,h),"create"===e)return t.custom.create.bind(r).apply(void 0,[element,h].concat(c));if("update"===e)return t.custom.update.bind(r).apply(void 0,[element].concat(c))}return d[e].bind(r).apply(void 0,[element].concat(c))}}},getTransitionName:function(){return $()},custom:{create:function(element,t,e,n){return element.append("use").attr("xlink:href","#".concat(t)).attr("class",this.updatePointClass.bind(this)).style("fill",n).node()},update:function(element,t,e,n,r,o,c,l){var d=element.node().getBBox(),h=d.width,f=d.height,x=function(e){return t(e)-h/2},v=element;if(o){var _=this.getTransitionName();c&&v.attr("x",x),v=v.transition(_),l.transition(this.getTransitionName())}return v.attr("x",x).attr("y",(function(t){return e(t)-f/2})).style("opacity",n).style("fill",r)}},circle:{create:function(element,t,e){return element.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",t).style("fill",e).node()},update:function(element,t,e,n,r,o,c,l){var d=this,h=element;if(d.hasType("bubble")&&h.attr("r",d.pointR.bind(d)),o){var f=d.getTransitionName();c&&h.attr("cx",t),h.attr("cx")&&(h=h.transition(f)),l.transition(d.getTransitionName())}return h.attr("cx",t).attr("cy",e).style("opacity",n).style("fill",r)}},rectangle:{create:function(element,t,e){var n=function(e){return 2*t(e)};return element.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",n).attr("height",n).style("fill",e).node()},update:function(element,t,e,n,r,o,c,l){var d=this,h=d.config.point_r,f=function(e){return t(e)-h},x=element;if(o){var v=d.getTransitionName();c&&x.attr("x",f),x=x.transition(v),l.transition(d.getTransitionName())}return x.attr("x",f).attr("y",(function(t){return e(t)-h})).style("opacity",n).style("fill",r)}}});var At="$radarPoints";Q(vt.prototype,{initRadar:function(){var t=this,e=t.config;t.hasType("radar")&&(t.radars=t.main.select(".".concat(_.chart)).append("g").attr("class",_.chartRadars),t.radars.levels=t.radars.append("g").attr("class",_.levels),t.radars.axes=t.radars.append("g").attr("class",_.axis),t.radars.shapes=t.radars.append("g").attr("class",_.shapes),t.maxValue=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this,e=t.config.axis_x_categories.length<4?-20:10,n=(Math.min(t.arcWidth,t.arcHeight)-e)/2;return[n,n]},updateTargetsForRadar:function(t){var e=this.config;N(e.axis_x_categories)&&(e.axis_x_categories=st(0,ot("max",t.map((function(t){return t.values.length}))))),this.generateRadarPoints()},getRadarPosition:function(t,e,n,r){var o=this.config,l=c(this.getRadarSize(),2),d=l[0],h=l[1],f=o.axis_x_categories.length,x=o.radar_direction_clockwise,v=tt(t).map((function(c){return function(t,e,n,r,o,c){var l=t&&r>0?n-r:r,d=2*Math.PI;return o*(1-c*("x"===e?Math.sin:Math.cos)(l*d/n))}(x,c,f,e,F(n)?n:"x"===t?d:h,L(r)?r:o.radar_size_ratio)}));return 1===v.length?v[0]:v},generateRadarPoints:function(){var t=this,e=t.data.targets,n=c(t.getRadarSize(),2),r=n[0],o=n[1],l=t.getCache(At)||{},d=l._size;d&&(d.width===r||d.height===o)||(e.forEach((function(e){l[e.id]=e.values.map((function(e,i){return t.getRadarPosition(["x","y"],i,void 0,t.getRatio("radar",e))}))})),l._size={width:r,height:o},t.addCache(At,l))},redrawRadar:function(t,e){var n=this,r=n.getTranslate("radar");r&&(n.radars.attr("transform",r),n.main.selectAll(".".concat(_.circles)).attr("transform",r),n.main.select(".".concat(_.chartTexts)).attr("transform",r),n.generateRadarPoints(),n.updateRadarLevel(),n.updateRadarAxes(),n.updateRadarShape(t,e))},generateGetRadarPoints:function(){var t=this.getCache(At);return function(e,i){var n=t[e.id][i];return[n,n,n,n]}},updateRadarLevel:function(){var t=this,e=t.config,n=c(t.getRadarSize(),2),r=n[0],o=n[1],l=e.radar_level_depth,d=e.axis_x_categories.length,h=e.radar_level_text_show,f=t.radars.levels,x=st(0,l),v=e.radar_size_ratio*Math.min(r,o),y=x.map((function(t){return v*((t+1)/l)})),m=e.radar_level_text_format,T=x.map((function(e){var n=y[e];return st(0,d).map((function(i){return t.getRadarPosition(["x","y"],i,n,1).join(",")})).join(" ")})),w=f.selectAll(".".concat(_.level)).data(x);w.exit().remove();var A=w.enter().append("g").attr("class",(function(t,i){return"".concat(_.level," ").concat(_.level,"-").concat(i)}));A.append("polygon").style("visibility",e.radar_level_show?null:"hidden"),h&&(f.select("text").empty()&&f.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text((function(){return m(0)})),A.append("text").attr("dx","-.5em").style("text-anchor","end").text((function(e){return m(t.maxValue/x.length*(e+1))}))),A.merge(w).attr("transform",(function(t){return"translate(".concat(r-y[t],", ").concat(o-y[t],")")})).selectAll("polygon").attr("points",(function(t){return T[t]})),h&&f.selectAll("text").attr("x",(function(t){return D(t)?r:T[t].split(",")[0]})).attr("y",(function(t){return D(t)?o:0}))},updateRadarAxes:function(){var t=this,e=t.config,n=c(t.getRadarSize(),2),r=n[0],o=n[1],l=e.axis_x_categories,d=t.radars.axes.selectAll("g").data(l);d.exit().remove();var h=d.enter().append("g").attr("class",(function(t,i){return"".concat(_.axis,"-").concat(i)}));if(e.radar_axis_line_show&&h.append("line"),e.radar_axis_text_show&&h.append("text"),d=h.merge(d),e.radar_axis_line_show&&d.select("line").attr("x1",r).attr("y1",o).attr("x2",(function(e,i){return t.getRadarPosition("x",i)})).attr("y2",(function(e,i){return t.getRadarPosition("y",i)})),e.radar_axis_text_show){var x=e.radar_axis_text_position,v=x.x,y=void 0===v?0:v,m=x.y,T=void 0===m?0:m;d.select("text").style("text-anchor","middle").attr("dy",".5em").call((function(t){t.each((function(t){U(Object(f.select)(this),t+"",[-.6,1.2])}))})).datum((function(t,i){return{index:i}})).attr("transform",(function(e){D(this.width)&&(this.width=this.getBoundingClientRect().width/2);var n=t.getRadarPosition("x",e.index,void 0,1),c=Math.round(t.getRadarPosition("y",e.index,void 0,1));return n>r?n+=this.width+y:Math.round(n)<r&&(n-=this.width+y),c>o?(c/2===o&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),c+=T):c<o&&(c-=T),"translate(".concat(n," ").concat(c,")")}))}t.bindEvent()},bindEvent:function(){var t=this,e=this;if(e.config.interaction_enabled){var n="mouse"===e.inputType,r=function(){var t=f.event.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);var e=Object(f.select)(t).datum();return e&&1===Object.keys(e).length?e.index:void 0},o=function(){var o=r(),c=D(o);(n||c)&&(t.hideTooltip(),t.unexpandCircles(),n?e.setOverOut(!1,o):c&&e.callOverOutForTouch())};e.radars.select(".".concat(_.axis)).on(n?"mouseover ":"touchstart",(function(){if(!e.transiting){var t=r();e.selectRectForSingle(e.svg.node(),null,t),n?e.setOverOut(!0,t):e.callOverOutForTouch(t)}})).on("mouseout",n?o:null),n||e.svg.on("touchstart",o)}},updateRadarShape:function(t,e){var n=this,r=n.data.targets,o=n.getCache(At),c=n.radars.shapes.selectAll("polygon").data(r),l=c.enter().append("g").attr("class",n.classChartRadar.bind(n));c.exit().transition().duration(e).remove(),l.append("polygon").merge(c).transition().duration(t).style("fill",(function(t){return n.color(t)})).style("stroke",(function(t){return n.color(t)})).attr("points",(function(t){return o[t.id].join(" ")}))},radarCircleX:function(t){return this.getCache(At)[t.id][t.index][0]},radarCircleY:function(t){return this.getCache(At)[t.id][t.index][1]}}),Q(vt.prototype,{initText:function(){this.main.select(".".concat(_.chart)).append("g").attr("class",_.chartTexts),this.mainText=Object(f.selectAll)([])},updateTargetsForText:function(t){var e=this,n=e.classChartText.bind(e),r=e.classTexts.bind(e),o=e.classFocus.bind(e);e.main.select(".".concat(_.chartTexts)).selectAll(".".concat(_.chartText)).data(t).attr("class",(function(t){return n(t)+o(t)})).enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none").append("g").attr("class",r)},updateText:function(t){var e=this,n=this,r=n.config,o=n.labelishData.bind(n),c=n.classText.bind(n);n.mainText=n.main.selectAll(".".concat(_.texts)).selectAll(".".concat(_.text)).data((function(t){return e.isRadarType(t)?t.values:o(t)})),n.mainText.exit().transition().duration(t).style("fill-opacity","0").remove(),n.mainText=n.mainText.enter().append("text").merge(n.mainText).attr("class",c).attr("text-anchor",(function(t){return r.axis_rotated?t.value<0?"end":"start":"middle"})).style("fill",n.updateTextColor.bind(n)).style("fill-opacity","0").text((function(t,i,e){var r=n.isBubbleZType(t)?n.getBubbleZData(t.value,"z"):t.value;return n.dataLabelFormat(t.id)(r,t.id,i,e)}))},updateTextColor:function(t){var e,n=this.config.data_labels_colors;return O(n)?e=n:Y(n)&&(e=n[t.id]),e||this.color(t)},redrawText:function(t,e,n,r){var o=this,c=$(),l=n?0:o.opacityForText.bind(o);return[this.mainText.each((function(){var text=Object(f.select)(this);(r&&text.attr("x")?text.transition(c):text).attr("x",t).attr("y",e).style("fill",o.updateTextColor.bind(o)).style("fill-opacity",l)}))]},getTextRect:function(element,t){var e=this,base=element.node?element.node():element;/text/i.test(base.tagName)||(base=base.querySelector("text"));var text=base.textContent,n="$".concat(text.replace(/\W/g,"_")),rect=e.getCache(n);return rect||(e.svg.append("text").style("visibility","hidden").style("font",Object(f.select)(base).style("font")).classed(t,!0).text(text).call((function(t){rect=Z(t.node())})).remove(),e.addCache(n,rect)),rect},generateXYForText:function(t,e){var n=this,r=Object.keys(t),o={},c=e?n.getXForText:n.getYForText;return n.hasType("radar")&&r.push("radar"),r.forEach((function(e){o[e]=n["generateGet".concat(K(e),"Points")](t[e],!1)})),function(t,i){var e=(n.isAreaType(t)?"area":n.isBarType(t)&&"bar")||n.isRadarType(t)&&"radar"||"line";return c.call(n,o[e](t,i),t,this)}},getCenteredTextPos:function(t,e,n){var r=this.config,o=r.axis_rotated;if(r.data_labels.centered&&this.isBarType(t)){var rect=Z(n),c=t.value>=0;if(o){var l=(c?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+rect.width/2;return c?-l-3:l+2}var d=(c?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+rect.height/2;return c?d:-d-2}return 0},getTextPos:function(t,e){var n=this.config.data_labels_position;return(t in n?n[t]:n)[e]||0},getXForText:function(t,e,n){var r,o,c=this,l=c.config.axis_rotated;if(l?(o=c.isBarType(e)?4:6,r=t[2][1]+o*(e.value<0?-1:1)):r=c.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value)if(r>c.width){var d=Z(n).width;r=c.width-d}else r<0&&(r=4);return l&&(r+=c.getCenteredTextPos(e,t,n)),r+c.getTextPos(e.id,"x")},getYForText:function(t,e,n){var r,o=this,c=o.config,l=c.axis_rotated,d=c.point_r,rect=Z(n),h=3;if(l)r=(t[0][0]+t[2][0]+.6*rect.height)/2;else if(r=t[2][1],L(d)&&d>5&&(o.isLineType(e)||o.isScatterType(e))&&(h+=c.point_r/2.3),e.value<0||0===e.value&&!o.hasPositiveValue&&o.hasNegativeValue)r+=rect.height+(o.isBarType(e)?-h:h);else{var f=2*-h;o.isBarType(e)?f=-h:o.isBubbleType(e)&&(f=h),r+=f}if(null===e.value&&!l){var x=rect.height;r<x?r=x:r>this.height&&(r=this.height-4)}return l||(r+=o.getCenteredTextPos(e,t,n)),r+o.getTextPos(e.id,"y")}});var kt={Area:["area","area-spline","area-spline-range","area-line-range","area-step"],AreaRange:["area-spline-range","area-line-range"],Arc:["pie","donut","gauge","radar"],Line:["line","spline","area","area-spline","area-spline-range","area-line-range","step","area-step"],Step:["step","area-step"],Spline:["spline","area-spline","area-spline-range"]};Q(vt.prototype,{setTargetType:function(t,e){var n=this,r=n.config;n.mapToTargetIds(t).forEach((function(t){n.withoutFadeIn[t]=e===r.data_types[t],r.data_types[t]=e})),t||(r.data_type=e)},hasType:function(t,e){var n=this,r=n.config.data_types,o=e||n.data.targets,c=!1;return o&&o.length?o.forEach((function(e){var n=r[e.id];(n&&n.indexOf(t)>=0||!n&&"line"===t)&&(c=!0)})):Object.keys(r).length?Object.keys(r).forEach((function(e){r[e]===t&&(c=!0)})):c=n.config.data_type===t,c},hasTypeOf:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return!kt[t].filter((function(t){return-1===r.indexOf(t)})).every((function(t){return!n.hasType(t,e)}))},isTypeOf:function(t,e){var n=O(t)?t:t.id,r=this.config.data_types[n];return B(e)?e.indexOf(r)>=0:r===e},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},isLineType:function(t){var e=O(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,kt.Line)},isStepType:function(t){return this.isTypeOf(t,kt.Step)},isSplineType:function(t){return this.isTypeOf(t,kt.Spline)},isAreaType:function(t){return this.isTypeOf(t,kt.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,kt.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(){var t=this.config,pattern=t.point_pattern;return"circle"===t.point_type&&(!pattern||B(pattern)&&0===pattern.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},barData:function(t){return this.isBarType(t)?t.values:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}});var St=function(t){return M(t.position)||"end"},Mt=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},Ct=function(t,e,n){return function(r){var o=t?0:e;return"start"===r.position?o=t?-n:0:"middle"===r.position&&(o=(t?-n:e)/2),o}};Q(vt.prototype,{initGrid:function(){var t=this;t.xgrid=Object(f.selectAll)([]),t.initGridLines(),t.initXYFocusGrid()},initGridLines:function(){var t=this,e=t.config;(e.grid_x_lines.length||e.grid_y_lines.length)&&(t.gridLines=t.main.insert("g",".".concat(_.chart).concat(e.grid_lines_front?" + *":"")).attr("clip-path",t.clipPathForGrid).attr("class","".concat(_.grid," ").concat(_.gridLines)),t.gridLines.append("g").attr("class",_.xgridLines),t.gridLines.append("g").attr("class",_.ygridLines),t.xgridLines=Object(f.selectAll)([]))},updateXGrid:function(t){var e=this,n=e.config,r=n.axis_rotated,o=e.generateGridData(n.grid_x_type,e.x),c=e.isCategorized()?e.xAxis.tickOffset():0,l=function(t){return((e.zoomScale||e.x)(t)+c)*(r?-1:1)};e.xgridAttr=r?{x1:0,x2:e.width,y1:l,y2:l}:{x1:l,x2:l,y1:0,y2:e.height},e.xgrid=e.main.select(".".concat(_.xgrids)).selectAll(".".concat(_.xgrid)).data(o),e.xgrid.exit().remove(),e.xgrid=e.xgrid.enter().append("line").attr("class",_.xgrid).merge(e.xgrid),t||e.xgrid.each((function(){var t=Object(f.select)(this);Object.keys(e.xgridAttr).forEach((function(n){t.attr(n,e.xgridAttr[n]).style("opacity",(function(){return t.attr(r?"y1":"x1")===(r?e.height:0)?"0":"1"}))}))}))},updateYGrid:function(){var t=this,e=t.config,n=e.axis_rotated,r=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),o=function(e){return Math.ceil(t.y(e))};t.ygrid=t.main.select(".".concat(_.ygrids)).selectAll(".".concat(_.ygrid)).data(r),t.ygrid.exit().remove(),t.ygrid=t.ygrid.enter().append("line").attr("class",_.ygrid).merge(t.ygrid),t.ygrid.attr("x1",n?o:0).attr("x2",n?o:t.width).attr("y1",n?0:o).attr("y2",n?t.height:o),t.smoothLines(t.ygrid,"grid")},updateGrid:function(t){var e=this;e.gridLines||e.initGridLines(),e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),e.main.select("line.".concat(_.xgridFocus)).style("visibility","hidden"),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function(t){var e=this,main=e.main,n=e.config,r=n.axis_rotated;n.grid_x_show&&e.updateXGrid(),e.xgridLines=main.select(".".concat(_.xgridLines)).selectAll(".".concat(_.xgridLine)).data(n.grid_x_lines),e.xgridLines.exit().transition().duration(t).style("opacity","0").remove();var o=e.xgridLines.enter().append("g");o.append("line").style("opacity","0"),o.append("text").attr("transform",r?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),e.xgridLines=o.merge(e.xgridLines),e.xgridLines.attr("class",(function(t){return"".concat(_.xgridLine," ").concat(t.class||"").trim()})).select("text").attr("text-anchor",St).attr("dx",Mt).transition().duration(t).text((function(t){return t.text})).transition().style("opacity","1")},updateYGridLines:function(t){var e=this,main=e.main,n=e.config,r=n.axis_rotated;n.grid_y_show&&e.updateYGrid(),e.ygridLines=main.select(".".concat(_.ygridLines)).selectAll(".".concat(_.ygridLine)).data(n.grid_y_lines),e.ygridLines.exit().transition().duration(t).style("opacity","0").remove();var o=e.ygridLines.enter().append("g");o.append("line").style("opacity","0"),o.append("text").attr("transform",r?"rotate(-90)":"").style("opacity","0"),e.ygridLines=o.merge(e.ygridLines);var c=e.yv.bind(e);e.ygridLines.attr("class",(function(t){return"".concat(_.ygridLine," ").concat(t.class||"").trim()})).select("line").transition().duration(t).attr("x1",r?c:0).attr("x2",r?c:e.width).attr("y1",r?0:c).attr("y2",r?e.height:c).transition().style("opacity","1"),e.ygridLines.select("text").attr("text-anchor",St).attr("dx",Mt).transition().duration(t).attr("dy",-5).attr("x",Ct(r,e.width,e.height)).attr("y",c).text((function(t){return t.text})).transition().style("opacity","1")},redrawGrid:function(t){var e=this,n=e.config.axis_rotated,r=e.xv.bind(e),o=e.xgridLines.select("line"),c=e.xgridLines.select("text");return o=(t?o.transition():o).attr("x1",n?0:r).attr("x2",n?e.width:r).attr("y1",n?r:0).attr("y2",n?r:e.height),c=(t?c.transition():c).attr("x",Ct(!n,e.width,e.height)).attr("y",r).text((function(t){return t.text})),[(t?o.transition():o).style("opacity","1"),(t?c.transition():c).style("opacity","1")]},initXYFocusGrid:function(){var t=this,e=t.config,n=e.grid_front,r=".".concat(_[n&&t.gridLines?"gridLines":"chart"]).concat(n?" + *":"");t.grid=t.main.insert("g",r).attr("clip-path",t.clipPathForGrid).attr("class",_.grid),e.grid_x_show&&t.grid.append("g").attr("class",_.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",_.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",_.xgridFocus).append("line").attr("class",_.xgridFocus)},showXGridFocus:function(t){var e=this,n=e.config,r=n.axis_rotated,o=t.filter((function(t){return t&&M(e.getBaseValue(t))})),c=e.main.selectAll("line.".concat(_.xgridFocus)),l=e.xx.bind(e);!n.tooltip_show||e.hasType("bubble")||e.hasType("scatter")||e.hasArcType()||(c.style("visibility","visible").data([o[0]]).attr(r?"y1":"x1",l).attr(r?"y2":"x2",l),e.smoothLines(c,"grid"))},hideXGridFocus:function(){this.main.select("line.".concat(_.xgridFocus)).style("visibility","hidden")},updateXgridFocus:function(){var t=this,e=t.config.axis_rotated;t.main.select("line.".concat(_.xgridFocus)).attr("x1",e?0:-10).attr("x2",e?t.width:-10).attr("y1",e?-10:0).attr("y2",e?-10:t.height)},generateGridData:function(t,e){var n=this.main.select(".".concat(_.axisX)).selectAll(".tick").size(),r=[];if("year"===t)for(var o=this.getXDomain(),c=o[0].getFullYear(),l=o[1].getFullYear(),i=c;i<=l;i++)r.push(new Date("".concat(i,"-01-01 00:00:00")));else(r=e.ticks(10)).length>n&&(r=r.filter((function(t){return(t+"").indexOf(".")<0})));return r},getGridFilterToRemove:function(t){return t?function(line){var e=!1;return(B(t)?t.concat():[t]).forEach((function(param){("value"in param&&line.value===param.value||"class"in param&&line.class===param.class)&&(e=!0)})),e}:function(){return!0}},removeGridLines:function(t,e){var n=this,r=n.config,o=n.getGridFilterToRemove(t),c=e?_.xgridLines:_.ygridLines,l=e?_.xgridLine:_.ygridLine;n.main.select(".".concat(c)).selectAll(".".concat(l)).filter(o).transition().duration(r.transition_duration).style("opacity","0").remove();var d="grid_".concat(e?"x":"y","_lines");r[d]=r[d].filter((function(line){return!o(line)}))}}),Q(vt.prototype,{initTooltip:function(){var t=this,e=t.config,n=e.tooltip_contents.bindto;if(t.tooltip=Object(f.select)(n),t.tooltip.empty()&&(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",_.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),e.tooltip_init_show){if(t.isTimeSeries()&&O(e.tooltip_init_x)){var i,r,o=t.data.targets[0];for(e.tooltip_init_x=t.parseDate(e.tooltip_init_x),i=0;(r=o.values[i])&&r.x-e.tooltip_init_x!=0;i++);e.tooltip_init_x=i}t.tooltip.html(t.getTooltipHTML(t.data.targets.map((function(n){return t.addName(n.values[e.tooltip_init_x])})),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType(null,["radar"])),t.color)),n||t.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}},getTooltipHTML:function(){for(var t,e,n=this,r=n.config,o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return C(r.tooltip_contents)?(t=r.tooltip_contents).call.apply(t,[n].concat(c)):(e=n).getTooltipContent.apply(e,c)},getTooltipContent:function(t,e,n,r){var o=this,l=o.config,d=l.tooltip_format_title||e,h=l.tooltip_format_name||function(t){return t},f=l.tooltip_format_value||(o.isStackNormalized()?function(t,e){return"".concat((100*e).toFixed(2),"%")}:n),x=l.tooltip_order,v=function(t){return o.isBubbleZType(t)?o.getBubbleZData(t.value,"z"):o.getBaseValue(t)},m=o.levelColor?function(t){return o.levelColor(t.value)}:function(t){return r(t)},T=l.tooltip_contents,w=T.template,A=o.mapToTargetIds();if(null===x&&l.data_groups.length){var k=o.orderTargets(o.data.targets).map((function(t){return t.id})).reverse();t.sort((function(a,b){var t=a?a.value:null,e=b?b.value:null;return t>0&&e>0&&(t=a.id?k.indexOf(a.id):null,e=b.id?k.indexOf(b.id):null),t-e}))}else/^(asc|desc)$/.test(x)?t.sort((function(a,b){var t=a?v(a):null,e=b?v(b):null;return"asc"===x?t-e:e-t})):C(x)&&t.sort(x);var text,S,param,O,i,L=o.getTooltipContentTemplate(w),F=t.length;for(i=0;i<F;i++)if((S=t[i])&&(v(S)||0===v(S))){if(D(text)){var title=V(d?d(S.x):S.x);text=ut(L[0],{CLASS_TOOLTIP:_.tooltip,TITLE:M(title)?w?title:'<tr><th colspan="2">'.concat(title,"</th></tr>"):""})}if(param=[S.ratio,S.id,S.index,t],O=V(f.apply(void 0,[v(S)].concat(y(param)))),o.isAreaRangeType(S)){var R=c(["high","low"].map((function(t){return V(f.apply(void 0,[o.getAreaRangeData(S,t)].concat(y(param))))})),2),E=R[0],X=R[1];O="<b>Mid:</b> ".concat(O," <b>High:</b> ").concat(E," <b>Low:</b> ").concat(X)}if(void 0!==O){var I=function(){if(null===S.name)return"continue";var t=V(h.apply(void 0,[S.name].concat(y(param)))),e=m(S),n={CLASS_TOOLTIP_NAME:_.tooltipName+o.getTargetSelectorSuffix(S.id),COLOR:w||!o.patterns?e:'<svg><rect style="fill:'.concat(e,'" width="10" height="10"></rect></svg>'),NAME:t,VALUE:O};if(w&&Y(T.text)){var r=A.indexOf(S.id);Object.keys(T.text).forEach((function(t){n[t]=T.text[t][r]}))}text+=ut(L[1],n)}();if("continue"===I)continue}}return"".concat(text,"</table>")},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>','{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>')).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,n,element){var r=this,o=r.config,l=c(Object(f.mouse)(element),2),d=l[0],h=l[1],x=r.getSvgLeft(!0),v=x+r.currentWidth-r.getCurrentPaddingRight();if(h+=20,r.hasArcType())"touch"===r.inputType||r.hasType("radar")||(h+=r.height/2,d+=(r.width-(r.isLegendRight?r.getLegendWidth():0))/2);else{var _=r.x(t[0].x);o.axis_rotated?(h=_+20,d+=x+100,v-=x):(h-=5,d=x+r.getCurrentPaddingLeft(!0)+20+(r.zoomScale?d:_))}var y=d+e;return y>v&&(d-=y-v+20),h+n>r.currentHeight&&(h-=n+30),h<0&&(h=0),{top:h,left:d}},showTooltip:function(t,element){var e=this,n=e.config,r=n.tooltip_contents.bindto,o=e.hasArcType(null,["radar"]),c=t.filter((function(t){return t&&M(e.getBaseValue(t))})),l=n.tooltip_position||e.tooltipPosition;if(0!==c.length&&n.tooltip_show){var d=e.tooltip.datum(),h=JSON.stringify(t),f=d&&d.width||0,x=d&&d.height||0;if(!d||d.current!==h){var v=t.concat().sort()[0].index;H(n.tooltip_onshow,e),e.tooltip.html(e.getTooltipHTML(t,e.axis.getXAxisTickFormat(),e.getYFormat(o),e.color)).style("display",null).style("visibility",null).datum({index:v,current:h,width:f=e.tooltip.property("offsetWidth"),height:x=e.tooltip.property("offsetHeight")}),H(n.tooltip_onshown,e),e._handleLinkedCharts(!0,v)}if(!r){var _=l.call(this,c,f,x,element);e.tooltip.style("top","".concat(_.top,"px")).style("left","".concat(_.left,"px"))}}},hideTooltip:function(t){var e=this,n=e.config;(!n.tooltip_doNotHide||t)&&(H(n.tooltip_onhide,e),this.tooltip.style("display","none").style("visibility","hidden").datum(null),H(n.tooltip_onhidden,e))},_handleLinkedCharts:function(t,e){var n=this;if(n.config.tooltip_linked){var r=n.config.tooltip_linked_name;(n.api.internal.charts||[]).forEach((function(o){if(o!==n.api){var c=o.internal.config,l=c.tooltip_linked,d=c.tooltip_linked_name,h=S.body.contains(o.element);if(l&&r===d&&h){var data=o.internal.tooltip.data()[0],f=e!==(data&&data.index);try{t&&f?o.tooltip.show({index:e}):!t&&o.tooltip.hide()}catch(t){}}}}))}}}),Q(vt.prototype,{initLegend:function(){var t=this,e=t.config;t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g"),e.legend_show?(t.legend.attr("transform",t.getTranslate("legend")),t.updateLegend()):(t.legend.style("visibility","hidden"),t.hiddenLegendIds=t.mapToIds(t.data.targets))},updateLegend:function(t,e,n){var r=this,o=r.config,c=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};c.withTransition=j(c,"withTransition",!0),c.withTransitionForTransform=j(c,"withTransitionForTransform",!0),o.legend_contents_bindto&&o.legend_contents_template?r.updateLegendTemplate():r.updateLegendElement(t||r.mapToIds(r.data.targets),c,n),r.legend.selectAll(".".concat(_.legendItem)).classed(_.legendItemHidden,(function(t){return!r.isTargetToShow(t)})),r.updateScales(!1,!r.zoomScale),r.updateSvgSize(),r.transformAll(c.withTransitionForTransform,n),r.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,n=Object(f.select)(e.legend_contents_bindto),template=e.legend_contents_template;if(!n.empty()){var r=t.mapToIds(t.data.targets),o=[],html="";r.forEach((function(e){var content=C(template)?template.call(t,e,t.color(e),t.api.data(e)[0].values):ut(template,{COLOR:t.color(e),TITLE:e});content&&(o.push(e),html+=content)}));var c=n.html(html).selectAll((function(){return this.childNodes})).data(o);t.setLegendItem(c),t.legend=n}},updateSizeForLegend:function(t){var e=this,n=e.config,r=t.width,o=t.height,c={top:e.isLegendTop?e.getCurrentPaddingTop()+n.legend_inset_y+5.5:e.currentHeight-o-e.getCurrentPaddingBottom()-n.legend_inset_y,left:e.isLegendLeft?e.getCurrentPaddingLeft()+n.legend_inset_x+.5:e.currentWidth-r-e.getCurrentPaddingRight()-n.legend_inset_x+.5};e.margin3={top:e.isLegendRight?0:e.isLegendInset?c.top:e.currentHeight-o,right:NaN,bottom:0,left:e.isLegendRight?e.currentWidth-r:e.isLegendInset?c.left:0}},transformLegend:function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend"))},updateLegendStep:function(t){this.legendStep=t},updateLegendItemWidth:function(t){this.legendItemWidth=t},updateLegendItemHeight:function(t){this.legendItemHeight=t},updateLegendItemColor:function(t,e){this.legend.select(".".concat(_.legendItem,"-").concat(t," line")).style("stroke",e)},getLegendWidth:function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},getLegendHeight:function(){var t=this;return t.config.legend_show?t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1):0},opacityForLegend:function(t){return t.classed(_.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(_.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,r=n.mapToTargetIds(t);n.legend.selectAll(".".concat(_.legendItem)).filter((function(t){return r.indexOf(t)>=0})).classed(_.legendItemFocused,e).transition().duration(100).style("opacity",(function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,Object(f.select)(this))}))},revertLegend:function(){var t=this;t.legend.selectAll(".".concat(_.legendItem)).classed(_.legendItemFocused,!1).transition().duration(100).style("opacity",(function(){return t.opacityForLegend(Object(f.select)(this))}))},showLegend:function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),!e.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",(function(){return e.opacityForLegend(Object(f.select)(this))}))},hideLegend:function(t){var e=this,n=e.config;n.legend_show&&N(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},clearLegendItemTextBoxCache:function(){this.legendItemTextBox={}},setLegendItem:function(t){var e=this,n=e.config,r="touch"===e.inputType;t.attr("class",(function(t){var n=Object(f.select)(this);return(!n.empty()&&n.attr("class")||"")+e.generateClass(_.legendItem,t)})).style("visibility",(function(t){return e.isLegendToShow(t)?"visible":"hidden"})).style("cursor","pointer").on("click",(function(t){H(n.legend_item_onclick,e,t)||(f.event.altKey?(e.api.hide(),e.api.show(t)):(e.api.toggle(t),!r&&e.isTargetToShow(t)?e.api.focus(t):e.api.revert())),r&&e.hideTooltip()})),r||t.on("mouseout",(function(t){H(n.legend_item_onout,e,t)||(Object(f.select)(this).classed(_.legendItemFocused,!1),e.api.revert())})).on("mouseover",(function(t){H(n.legend_item_onover,e,t)||(Object(f.select)(this).classed(_.legendItemFocused,!0),!e.transiting&&e.isTargetToShow(t)&&e.api.focus(t))}))},updateLegendElement:function(t,e){var n,r,o,c=this,l=c.config,d=l.legend_item_tile_width+5,h=0,x=0,v=0,y={},m={},T={},w=[0],A={},k=0,M=c.isLegendRight||c.isLegendInset,C=t.filter((function(t){return!F(l.data_names[t])||null!==l.data_names[t]})),O=e.withTransition,L=function(t,e,n){var r,o=n===C.length-1,f=function(t,e){return c.legendItemTextBox[e]||(c.legendItemTextBox[e]=c.getTextRect(t,_.legendItem)),c.legendItemTextBox[e]}(t,e),S=f.width+d+(o&&!M?0:10)+l.legend_padding,O=f.height+4,L=M?O:S,D=M?c.getLegendHeight():c.getLegendWidth(),F=function(t,e){e||(r=(D-v-L)/2)<10&&(r=(D-L)/2,v=0,k++),A[t]=k,w[k]=c.isLegendInset?10:r,y[t]=v,v+=L};if(0===n&&(v=0,k=0,h=0,x=0),l.legend_show&&!c.isLegendToShow(e))return m[e]=0,T[e]=0,A[e]=0,void(y[e]=0);m[e]=S,T[e]=O,(!h||S>=h)&&(h=S),(!x||O>=x)&&(x=O);var R=M?x:h;l.legend_equally?(Object.keys(m).forEach((function(t){return m[t]=h})),Object.keys(T).forEach((function(t){return T[t]=x})),(r=(D-R*C.length)/2)<10?(v=0,k=0,C.forEach((function(t){return F(t)}))):F(e,!0)):F(e)};c.isLegendInset&&(k=l.legend_inset_step?l.legend_inset_step:C.length,c.updateLegendStep(k)),c.isLegendRight?(n=function(t){return h*A[t]},r=function(t){return w[A[t]]+y[t]}):c.isLegendInset?(n=function(t){return h*A[t]+10},r=function(t){return w[A[t]]+y[t]}):(n=function(t){return w[A[t]]+y[t]},r=function(t){return x*A[t]});var D=function(t,i){return n(t,i)+4+l.legend_item_tile_width},R=function(t,i){return n(t,i)},E=function(t,i){return n(t,i)-2},X=function(t,i){return n(t,i)-2+l.legend_item_tile_width},I=function(t,i){return r(t,i)+9},z=function(t,i){return r(t,i)-5},N=function(t,i){return r(t,i)+4},B=-200,Y=c.legend.selectAll(".".concat(_.legendItem)).data(C).enter().append("g");c.setLegendItem(Y),Y.append("text").text((function(t){return F(l.data_names[t])?l.data_names[t]:t})).each((function(t,i){L(this,t,i)})).style("pointer-events","none").attr("x",M?D:B).attr("y",M?B:I),Y.append("rect").attr("class",_.legendItemEvent).style("fill-opacity","0").attr("x",M?R:B).attr("y",M?B:z);var j=c.config.legend_usePoint;if(j){var H=[];Y.append((function(t){var pattern=P(l.point_pattern)?l.point_pattern:[l.point_type];-1===H.indexOf(t)&&H.push(t);var e=pattern[H.indexOf(t)%pattern.length];return"rectangle"===e&&(e="rect"),S.createElementNS(f.namespaces.svg,c.hasValidPointType(e)?e:"use")})).attr("class",_.legendItemPoint).style("fill",(function(t){return c.color(t)})).style("pointer-events","none").attr("href",(function(data,t,e){return"use"===e[t].nodeName.toLowerCase()?"#".concat(c.datetimeId,"-point-").concat(data):void 0}))}else Y.append("line").attr("class",_.legendItemTile).style("stroke",c.color).style("pointer-events","none").attr("x1",M?E:B).attr("y1",M?B:N).attr("x2",M?X:B).attr("y2",M?B:N).attr("stroke-width",l.legend_item_tile_height);o=c.legend.select(".".concat(_.legendBackground," rect")),c.isLegendInset&&h>0&&0===o.size()&&(o=c.legend.insert("g",".".concat(_.legendItem)).attr("class",_.legendBackground).append("rect"));var V=c.legend.selectAll("text").data(C).text((function(t){return F(l.data_names[t])?l.data_names[t]:t})).each((function(t,i){L(this,t,i)}));(O?V.transition():V).attr("x",D).attr("y",I);var U=c.legend.selectAll("rect.".concat(_.legendItemEvent)).data(C);if((O?U.transition():U).attr("width",(function(t){return m[t]})).attr("height",(function(t){return T[t]})).attr("x",R).attr("y",z),j){var G=c.legend.selectAll(".".concat(_.legendItemPoint)).data(C);(O?G.transition():G).each((function(){var t,e,n,r=this.nodeName.toLowerCase(),o=c.config.point_r,l="x",d="y",h=2,x=2.5;if("circle"===r){var v=.2*o;l="cx",d="cy",t=o+v,h=2*o,x=-v}else if("rect"===r){var _=2.5*o;e=_,n=_,x=3}Object(f.select)(this).attr(l,(function(t){return E(t)+h})).attr(d,(function(t){return N(t)-x})).attr("r",t).attr("width",e).attr("height",n)}))}else{var W=c.legend.selectAll("line.".concat(_.legendItemTile)).data(C);(O?W.transition():W).style("stroke",c.color).attr("x1",E).attr("y1",N).attr("x2",X).attr("y2",N)}o&&(O?o.transition():o).attr("height",c.getLegendHeight()-12).attr("width",h*(k+1)+10),c.updateLegendItemWidth(h),c.updateLegendItemHeight(x),c.updateLegendStep(k)}});var Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",e=arguments.length>1?arguments[1]:void 0,n=L(e);return t.indexOf("center")>-1?n?e/2:"middle":t.indexOf("right")>-1?n?e:"end":n?0:"start"};Q(vt.prototype,{initTitle:function(){var t=this;if(t.config.title_text){t.title=t.svg.append("g");var text=t.title.append("text").style("text-anchor",Ot(t.config.title_position)).attr("class",_.title);U(text,t.config.title_text,[.3,1.5])}},redrawTitle:function(){var t=this;if(t.title){var e=t.yForTitle.call(t);/g/i.test(t.title.node().tagName)?t.title.attr("transform","translate(".concat(Ot(t.config.title_position,t.currentWidth),", ").concat(e,")")):t.title.attr("x",t.xForTitle.call(t)).attr("y",e)}},xForTitle:function(){var t,e=this,n=e.config,r=n.title_position||"left";return/(right|center)/.test(r)?(t=e.currentWidth-e.getTextRect(e.title,_.title).width,r.indexOf("right")>=0?t-=n.title_padding.right||0:r.indexOf("center")>=0&&(t/=2)):t=n.title_padding.left||0,t},yForTitle:function(){var t=this;return(t.config.title_padding.top||0)+t.getTextRect(t.title,_.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}}),Q(vt.prototype,{initClip:function(){var t=this;t.clipId="".concat(t.datetimeId,"-clip"),t.clipIdForXAxis="".concat(t.clipId,"-xaxis"),t.clipIdForYAxis="".concat(t.clipId,"-yaxis"),t.clipIdForGrid="".concat(t.clipId,"-grid"),t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid)},getClipPath:function(t){var e=this.config;if(!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var n=!!k.navigator&&k.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url(".concat(n?"":S.URL.split("#")[0],"#").concat(t,")")},appendClip:function(t,e){return t.append("clipPath").attr("id",e).append("rect")},getAxisClipX:function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},getAxisClipY:function(t){return t?-20:-this.margin.top},getXAxisClipX:function(){return this.getAxisClipX(!this.config.axis_rotated)},getXAxisClipY:function(){return this.getAxisClipY(!this.config.axis_rotated)},getYAxisClipX:function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)},getYAxisClipY:function(){return this.getAxisClipY(this.config.axis_rotated)},getAxisClipWidth:function(t){var e=this,n=Math.max(30,e.margin.left),r=Math.max(30,e.margin.right);return t?e.width+2+n+r:e.margin.left+20},getAxisClipHeight:function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},getXAxisClipWidth:function(){return this.getAxisClipWidth(!this.config.axis_rotated)},getXAxisClipHeight:function(){return this.getAxisClipHeight(!this.config.axis_rotated)},getYAxisClipWidth:function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)},getYAxisClipHeight:function(){return this.getAxisClipHeight(this.config.axis_rotated)}}),Q(vt.prototype,{initRegion:function(){var t=this;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",_.regions)},updateRegion:function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select(".".concat(_.regions)).selectAll(".".concat(_.region)).data(n.regions),e.mainRegion.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegion=e.mainRegion.enter().append("g").merge(e.mainRegion).attr("class",e.classRegion.bind(e)),e.mainRegion.append("rect").style("fill-opacity","0")},redrawRegion:function(t){var e=this,n=e.mainRegion.select("rect");return n=(t?n.transition():n).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?n.transition():n).style("fill-opacity",(function(t){return M(t.opacity)?t.opacity:"0.1"})).on("end",(function(){Object(f.select)(this.parentNode).selectAll("rect:not([x])").remove()}))]},getRegionXY:function(t,e){var n=this,r=n.config.axis_rotated,o="x"===t,c="start",l=0;return"y"===e.axis||"y2"===e.axis?(!o&&(c="end"),(o?r:!r)&&c in e&&(l=(0,n[e.axis])(e[c]))):(o?!r:r)&&c in e&&(l=(n.zoomScale||n.x)(n.isTimeSeries()?n.parseDate(e[c]):e[c])),l},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var n=this,r=n.config.axis_rotated,o="width"===t,c=n[o?"regionX":"regionY"](e),l="end",d=n[t];return"y"===e.axis||"y2"===e.axis?(!o&&(l="start"),(o?r:!r)&&l in e&&(d=(0,n[e.axis])(e[l]))):(o?!r:r)&&l in e&&(d=(n.zoomScale||n.x)(n.isTimeSeries()?n.parseDate(e[l]):e[l])),d<c?0:d-c},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}}),Q(vt.prototype,{drag:function(t){var e=this,n=e.config,main=e.main;if(!e.hasArcType()&&n.data_selection_enabled&&(!n.zoom_enabled||e.zoom.altDomain)&&n.data_selection_multiple){var r=c(e.dragStart,2),o=r[0],l=r[1],d=c(t,2),h=d[0],x=d[1],v=Math.min(o,h),y=Math.max(o,h),m=n.data_selection_grouped?e.margin.top:Math.min(l,x),T=n.data_selection_grouped?e.height:Math.max(l,x);main.select(".".concat(_.dragarea)).attr("x",v).attr("y",m).attr("width",y-v).attr("height",T-m),main.selectAll(".".concat(_.shapes)).selectAll(".".concat(_.shape)).filter((function(t){return n.data_selection_isselectable(t)})).each((function(t,i){var n,r=Object(f.select)(this),o=r.classed(_.SELECTED),c=r.classed(_.INCLUDED),l=!1;if(r.classed(_.circle)){var d=1*r.attr("cx"),h=1*r.attr("cy");n=e.togglePoint,l=v<d&&d<y&&m<h&&h<T}else{if(!r.classed(_.bar))return;var x=function(path){var t=path.getBoundingClientRect(),e=t.width,n=t.height,r=G(path);return{x:r[0].x,y:Math.min(r[0].y,r[1].y),width:e,height:n}}(this),w=x.x,A=(h=x.y,x.width),k=x.height;n=e.togglePath,l=!(y<w||w+A<v||T<h||h+k<m)}l^c&&(r.classed(_.INCLUDED,!c),r.classed(_.SELECTED,!o),n.call(e,!o,r,t,i))}))}},dragstart:function(t){var e=this,n=e.config;e.hasArcType()||!n.data_selection_enabled||(e.dragStart=t,e.main.select(".".concat(_.chart)).append("rect").attr("class",_.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config;t.hasArcType()||!e.data_selection_enabled||(t.main.select(".".concat(_.dragarea)).transition().duration(100).style("opacity","0").remove(),t.main.selectAll(".".concat(_.shape)).classed(_.INCLUDED,!1),t.setDragStatus(!1))},setDragStatus:function(t){this.dragging=t}});var Lt=r(12);Q(vt.prototype,{selectPoint:function(t,e,i){var n=this,r=n.config,o=r.axis_rotated,c=(o?n.circleY:n.circleX).bind(n),l=(o?n.circleX:n.circleY).bind(n),d=n.pointSelectR.bind(n);H(r.data_onselected,n.api,e,t.node()),n.main.select(".".concat(_.selectedCircles).concat(n.getTargetSelectorSuffix(e.id))).selectAll(".".concat(_.selectedCircle,"-").concat(i)).data([e]).enter().append("circle").attr("class",(function(){return n.generateClass(_.selectedCircle,i)})).attr("cx",c).attr("cy",l).attr("stroke",n.color).attr("r",(function(t){return 1.4*n.pointSelectR(t)})).transition().duration(100).attr("r",d)},unselectPoint:function(t,e,i){var n=this;H(n.config.data_onunselected,n.api,e,t.node()),n.main.select(".".concat(_.selectedCircles).concat(n.getTargetSelectorSuffix(e.id))).selectAll(".".concat(_.selectedCircle,"-").concat(i)).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,n,i){this["".concat(t?"":"un","selectPoint")](e,n,i)},selectPath:function(t,e){var n=this,r=n.config;H(r.data_onselected,n,e,t.node()),r.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return Object(Lt.rgb)(n.color(e)).brighter(.75)}))},unselectPath:function(t,e){var n=this,r=n.config;H(r.data_onunselected,n,e,t.node()),r.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return n.color(e)}))},togglePath:function(t,e,n,i){this["".concat(t?"":"un","selectPath")](e,n,i)},getToggle:function(t,e){var n=this;return"path"===t.nodeName?n.togglePath:n.isStepType(e)?function(){}:n.togglePoint},toggleShape:function(t,e,i){var n,r=this,o=r.config,c=Object(f.select)(t),l=c.classed(_.SELECTED),d=r.getToggle(t,e).bind(r);if(o.data_selection_enabled&&o.data_selection_isselectable(e)){if(!o.data_selection_multiple){var h=".".concat(_.shapes);o.data_selection_grouped&&(h+=r.getTargetSelectorSuffix(e.id)),r.main.selectAll(h).selectAll(".".concat(_.shape)).each((function(t,i){var e=Object(f.select)(this);e.classed(_.SELECTED)&&(n=e,d(!1,e.classed(_.SELECTED,!1),t,i))}))}n&&n.node()===c.node()||(c.classed(_.SELECTED,!l),d(!l,c,e,i))}}}),Q(vt.prototype,{initBrush:function(){var t=this,e=t.config,n=e.axis_rotated;t.brush=n?Object(A.brushY)():Object(A.brushX)();var r,o,c=function(){t.redrawForBrush()};t.brush.on("start",(function(){"touch"===t.inputType&&t.hideTooltip(),c()})).on("brush",c).on("end",(function(){r=t.x.orgDomain()})),t.brush.updateResize=function(){var e=this;o&&clearTimeout(o),o=setTimeout((function(){var n=e.getSelection();r&&Object(A.brushSelection)(n.node())&&e.move(n,r.map(t.subX.orgScale()))}),0)},t.brush.update=function(){return 0===this.extent()()[1].filter((function(t){return isNaN(t)})).length&&t.context&&t.context.select(".".concat(_.brush)).call(this),this},t.brush.scale=function(r){var o,c,l=e.subchart_size_height||(o=t.svg.select(".".concat(_.brush," .overlay")),c={width:0,height:0},o.size()&&(c.width=+o.attr("width"),c.height=+o.attr("height")),c[n?"width":"height"]),d=t.getExtent();!d&&r.range?d=[[0,0],[r.range()[1],l]]:B(d)&&(d=d.map((function(t,i){return[t,i>0?l:i]}))),n&&d[1].reverse(),this.extent(d),this.update()},t.brush.getSelection=function(){return t.context?t.context.select(".".concat(_.brush)):Object(f.select)([])}},initSubchart:function(){var t=this,e=t.config,n=e.subchart_show?"visible":"hidden",r="".concat(t.clipId,"-subchart"),o=t.getClipPath(r);t.clipIdForSubchart=r,t.appendClip(t.defs,r),t.initBrush(),t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));var c=t.context;c.style("visibility",n),c.append("g").attr("clip-path",o).attr("class",_.chart),t.hasType("bar")&&c.select(".".concat(_.chart)).append("g").attr("class",_.chartBars),c.select(".".concat(_.chart)).append("g").attr("class",_.chartLines),c.append("g").attr("clip-path",o).attr("class",_.brush).call(t.brush),t.axes.subx=c.append("g").attr("class",_.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?n:"hidden")},updateTargetsForSubchart:function(t){var e=this,n=e.context,r=e.config,o=e.classChartBar.bind(e),c=e.classBars.bind(e),l=e.classChartLine.bind(e),d=e.classLines.bind(e),h=e.classAreas.bind(e);if(r.subchart_show){var f=n.select(".".concat(_.chartBars)).selectAll(".".concat(_.chartBar)).data(t).attr("class",o);f.enter().append("g").style("opacity","0").attr("class",o).merge(f).append("g").attr("class",c);var x=n.select(".".concat(_.chartLines)).selectAll(".".concat(_.chartLine)).data(t).attr("class",l),v=x.enter().append("g").style("opacity","0").attr("class",l).merge(x);v.append("g").attr("class",d),e.hasType("area")&&v.append("g").attr("class",h),n.selectAll(".".concat(_.brush," rect")).attr(r.axis_rotated?"width":"height",r.axis_rotated?e.width2:e.height2)}},updateBarForSubchart:function(t){var e=this;e.contextBar=e.context.selectAll(".".concat(_.bars)).selectAll(".".concat(_.bar)).data(e.barData.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity","0").remove(),e.contextBar=e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color).merge(e.contextBar).style("opacity",e.initialOpacity.bind(e))},redrawBarForSubchart:function(t,e,n){(e?this.contextBar.transition($()).duration(n):this.contextBar).attr("d",t).style("opacity","1")},updateLineForSubchart:function(t){var e=this;e.contextLine=e.context.selectAll(".".concat(_.lines)).selectAll(".".concat(_.line)).data(e.lineData.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity","0").remove(),e.contextLine=e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.contextLine).style("opacity",e.initialOpacity.bind(e))},redrawLineForSubchart:function(t,e,n){(e?this.contextLine.transition($()).duration(n):this.contextLine).attr("d",t).style("opacity","1")},updateAreaForSubchart:function(t){var e=this;e.contextArea=e.context.selectAll(".".concat(_.areas)).selectAll(".".concat(_.area)).data(e.lineData.bind(e)),e.contextArea.exit().transition().duration(t).style("opacity","0").remove(),e.contextArea=e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",(function(){return e.orgAreaOpacity=Object(f.select)(this).style("opacity"),"0"})).merge(e.contextArea).style("opacity","0")},redrawAreaForSubchart:function(t,e,n){(e?this.contextArea.transition($()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},redrawSubchart:function(t,e,n){var r=this,o=r.config;r.context.style("visibility",o.subchart_show?"visible":"hidden"),o.subchart_show&&(f.event&&"zoom"===f.event.type&&r.brush.update(),t&&(!J(r)&&r.brush.update(),Object.keys(n.type).forEach((function(t){var o=K(t),c=r["generateDraw".concat(o)](n.indices[t],!0);r["update".concat(o,"ForSubchart")](e),r["redraw".concat(o,"ForSubchart")](c,e,e)}))))},redrawForBrush:function(){var t=this;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,t.x.orgDomain())},transformContext:function(t,e){var n,r=this;e&&e.axisSubX?n=e.axisSubX:(n=r.context.select(".".concat(_.axisX)),t&&(n=n.transition())),r.context.attr("transform",r.getTranslate("context")),n.attr("transform",r.getTranslate("subx"))},getExtent:function(){var t=this,e=t.config.axis_x_extent;return e&&(C(e)?e=e(t.getXDomain(t.data.targets),t.subX):t.isTimeSeries()&&e.every(isNaN)&&(e=e.map((function(e){return t.subX(t.parseDate(e))})))),e}});var Dt=r(13);Q(vt.prototype,{initZoom:function(){var t=this;t.zoomScale=null,t.generateZoom(),t.initZoomBehaviour()},bindZoomEvent:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this,n=e.config.zoom_enabled;e.redrawEventRect();var r=e.main.select(".".concat(_.eventRects));n&&t?e.bindZoomOnEventRect(r,n.type):!1===t&&(e.api.unzoom(),r.on(".zoom",null).on(".drag",null))},generateZoom:function(){var t=this,e=t.config,n=Object(Dt.zoom)().duration(0).on("start",t.onZoomStart.bind(t)).on("zoom",t.onZoom.bind(t)).on("end",t.onZoomEnd.bind(t));n.orgScaleExtent=function(){var n=e.zoom_extent||[1,10];return[n[0],Math.max(t.getMaxDataCount()/n[1],n[1])]},n.updateScaleExtent=function(){var e=I(t.x.orgDomain())/I(t.getZoomDomain()),n=this.orgScaleExtent();return this.scaleExtent([n[0]*e,n[1]*e]),this},n.updateTransformScale=function(n){t.orgXScale&&t.orgXScale.range(t.x.range());var r=n[e.axis_rotated?"rescaleY":"rescaleX"](t.orgXScale||t.x),o=t.trimXDomain(r.domain()),c=e.zoom_rescale;r.domain(o,t.orgXDomain),t.zoomScale=t.getCustomizedScale(r),t.xAxis.scale(t.zoomScale),c&&(!t.orgXScale&&(t.orgXScale=t.x.copy()),t.x.domain(o))},t.zoom=n},onZoomStart:function(){var t=this,e=f.event.sourceEvent;e&&(t.zoom.startEvent=e,H(t.config.zoom_onzoomstart,t.api,e))},onZoom:function(){var t=this,e=t.config,n=f.event,r=n.sourceEvent;if(e.zoom_enabled&&n.sourceEvent&&0!==t.filterTargetsToShow(t.data.targets).length&&(t.zoomScale||!(r.type.indexOf("touch")>-1)||1!==r.touches.length)){var o="mousemove"===r.type,c=r.wheelDelta<0,l=n.transform;!o&&c&&t.x.domain().every((function(e,i){return e!==t.orgXDomain[i]}))&&t.x.domain(t.orgXDomain),t.zoom.updateTransformScale(l),t.isCategorized()&&t.x.orgDomain()[0]===t.orgXDomain[0]&&t.x.domain([t.orgXDomain[0]-1e-10,t.x.orgDomain()[1]]),t.redraw({withTransition:!1,withY:e.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.cancelClick=o,H(e.zoom_onzoom,t.api,t.zoomScale.domain())}},onZoomEnd:function(){var t=this,e=t.zoom.startEvent,n=f.event&&f.event.sourceEvent;e&&e.type.indexOf("touch")>-1&&(e=e.changedTouches[0],n=n.changedTouches[0]),!e||n&&e.clientX===n.clientX&&e.clientY===n.clientY||(t.redrawEventRect(),t.updateZoom(),H(t.config.zoom_onzoomend,t.api,t[t.zoomScale?"zoomScale":"subX"].domain()))},getZoomDomain:function(){var t=this.config,e=c(this.orgXDomain,2),n=e[0],r=e[1];return F(t.zoom_x_min)&&(n=ot("min",[n,t.zoom_x_min])),F(t.zoom_x_max)&&(r=ot("max",[r,t.zoom_x_max])),[n,r]},updateZoom:function(t){var e=this;if(e.zoomScale){var n=e.zoomScale.domain(),r=e.subX.domain(),o=(n[0]<=r[0]||n[0]-.015<=r[0])&&(r[1]<=n[1]||r[1]<=n[1]-.015);(t||o)&&(e.xAxis.scale(e.subX),e.x.domain(e.subX.orgDomain()),e.zoomScale=null)}},bindZoomOnEventRect:function(t,e){var n="drag"===e?this.zoomBehaviour:this.zoom;t.call(n).on("dblclick.zoom",null)},initZoomBehaviour:function(){var t=this,e=t.config.axis_rotated,n=0,r=0,o=null,l={axis:e?"y":"x",attr:e?"height":"width",index:e?1:0};t.zoomBehaviour=Object(bt.drag)().clickDistance(4).on("start",(function(){t.setDragStatus(!0),o||(o=t.main.append("rect").attr("clip-path",t.clipPath).attr("class",_.zoomBrush).attr("width",e?t.width:0).attr("height",e?0:t.height)),n=Object(f.mouse)(this)[l.index],r=n,o.attr(l.axis,n).attr(l.attr,0),t.onZoomStart()})).on("drag",(function(){r=Object(f.mouse)(this)[l.index],o.attr(l.axis,Math.min(n,r)).attr(l.attr,Math.abs(r-n))})).on("end",(function(){var e,d=t.zoomScale||t.x;if(t.setDragStatus(!1),o.attr(l.axis,0).attr(l.attr,0),n>r&&(n=(e=[r,n])[0],r=e[1]),n<0&&(r+=Math.abs(n),n=0),n!==r)t.api.zoom([n,r].map((function(t){return d.invert(t)}))),t.onZoomEnd();else if(t.isMultipleX())t.clickHandlerForMultipleXS.bind(this)(t);else{var h=f.event.sourceEvent||f.event,x=c("clientX"in h?[h.clientX,h.clientY]:[h.x,h.y],2),v=x[0],_=x[1],y=S.elementFromPoint(v,_);t.clickHandlerForSingleX.bind(y)(Object(f.select)(y).datum(),t)}}))},setZoomResetButton:function(){var t=this,e=t.config,n=e.zoom_resetButton;n&&"drag"===e.zoom_enabled.type&&(t.zoom.resetBtn?t.zoom.resetBtn.style("display",null):t.zoom.resetBtn=t.selectChart.append("div").classed(_.button,!0).append("span").on("click",t.api.unzoom.bind(t)).classed(_.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}});var Ft=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];Q(vt.prototype,{getColorFromCss:function(){var body=S.body,pattern=body.__colorPattern__;if(!pattern){var span=S.createElement("span");span.className=_.colorPattern,span.style.display="none",body.appendChild(span);var content=k.getComputedStyle(span).backgroundImage;span.parentNode.removeChild(span),content.indexOf(";")>-1&&(pattern=content.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map((function(t){return t.trim().replace(/[\"'\s]/g,"")})).filter(Boolean),body.__colorPattern__=pattern)}return pattern},generateColor:function(){var t=this,e=t.config,n=e.data_colors,r=e.data_color,o=[],pattern=P(e.color_pattern)?e.color_pattern:Object(lt.scaleOrdinal)(t.getColorFromCss()||Ft).range(),c=pattern;if(C(e.color_tiles)){var l=e.color_tiles(),d=pattern.map((function(p,e){var n=p.replace(/[#\(\)\s,]/g,""),r="".concat(t.datetimeId,"-pattern-").concat(n,"-").concat(e);return function(pattern,t,e){var n=Object(f.select)(pattern.cloneNode(!0));return n.attr("id",e).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",t),{id:e,node:n.node()}}(l[e%l.length],p,r)}));pattern=d.map((function(p){return"url(#".concat(p.id,")")})),t.patterns=d}return function(e){var l,d=e.id||e.data&&e.data.id||e,h=t.isTypeOf(d,["line","spline","step"])||!t.config.data_types[d];return C(n[d])?l=n[d](e):n[d]?l=n[d]:(o.indexOf(d)<0&&o.push(d),l=h?c[o.indexOf(d)%c.length]:pattern[o.indexOf(d)%pattern.length],n[d]=l),C(r)?r(l,e):l}},generateLevelColor:function(){var t=this.config,e=t.color_pattern,n=t.color_threshold,r="value"===n.unit,o=n.max||100,c=n.values&&n.values.length?n.values:[];return P(n)?function(t){for(var n=r?t:100*t/o,l=e[e.length-1],i=0,d=c.length;i<d;i++)if(n<=c[i]){l=e[i];break}return l}:null},setOverColor:function(t,e){var n=this,r=n.config.color_onover,o=t?r:n.color;Y(o)?o=function(t){var e=t.id;return e in r?r[e]:n.color(e)}:O(o)&&(o=function(){return r}),Y(e)?n.main.selectAll(".".concat(_.arc,"-").concat(e.id)).style("fill",o(e)):n.main.selectAll(".".concat(_.shape,"-").concat(e)).style("fill",o)}});var Rt=function(t,e,n){var r=t.config,o="axis_".concat(e,"_tick_format");return(r[o]?r[o]:t.defaultValueFormat)(n)};Q(vt.prototype,{getYFormat:function(t){var e=this,n=e.yFormat,r=e.y2Format;return t&&!e.hasType("gauge")&&(n=e.defaultArcValueFormat,r=e.defaultArcValueFormat),function(t,o,c){return("y2"===e.axis.getId(c)?r:n).call(e,t,o)}},yFormat:function(t){return Rt(this,"y",t)},y2Format:function(t){return Rt(this,"y2",t)},defaultValueFormat:function(t){return M(t)?+t:""},defaultArcValueFormat:function(t,e){return"".concat((100*e).toFixed(1),"%")},dataLabelFormat:function(t){var e=this.config.data_labels,n=function(t){return M(t)?+t:""},r=n;return C(e.format)?r=e.format:z(e.format)&&(r=e.format[t]?!0===e.format[t]?n:e.format[t]:function(){return""}),r}}),Q(vt.prototype,{addCache:function(t,e){var n=!!(arguments.length>2&&void 0!==arguments[2])&&arguments[2];this.cache[t]=n?this.cloneTarget(e):e},removeCache:function(t){var e=this;tt(t).forEach((function(t){return delete e.cache[t]}))},getCache:function(t){var e=!!(arguments.length>1&&void 0!==arguments[1])&&arguments[1];if(e){for(var n,r=[],i=0;n=t[i];i++)n in this.cache&&r.push(this.cloneTarget(this.cache[n]));return r}return this.cache[t]||null},resetCache:function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)}}),Q(vt.prototype,{generateClass:function(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},classText:function(t){return this.generateClass(_.text,t.index)},classTexts:function(t){return this.generateClass(_.texts,t.id)},classShape:function(t){return this.generateClass(_.shape,t.index)},classShapes:function(t){return this.generateClass(_.shapes,t.id)},generateExtraLineClass:function(){var t=this.config.line_classes||[],e=[];return function(n){var r=n.id||n.data&&n.data.id||n;return e.indexOf(r)<0&&e.push(r),t[e.indexOf(r)%t.length]}},classLine:function(t){return this.classShape(t)+this.generateClass(_.line,t.id)},classLines:function(t){return this.classShapes(t)+this.generateClass(_.lines,t.id)},classCircle:function(t){return this.classShape(t)+this.generateClass(_.circle,t.index)},classCircles:function(t){return this.classShapes(t)+this.generateClass(_.circles,t.id)},classBar:function(t){return this.classShape(t)+this.generateClass(_.bar,t.index)},classBars:function(t){return this.classShapes(t)+this.generateClass(_.bars,t.id)},classArc:function(t){return this.classShape(t.data)+this.generateClass(_.arc,t.data.id)},classArcs:function(t){return this.classShapes(t.data)+this.generateClass(_.arcs,t.data.id)},classArea:function(t){return this.classShape(t)+this.generateClass(_.area,t.id)},classAreas:function(t){return this.classShapes(t)+this.generateClass(_.areas,t.id)},classRegion:function(t,i){return"".concat(this.generateClass(_.region,i)," ").concat("class"in t?t.class:"")},classEvent:function(t){return this.generateClass(_.eventRect,t.index)},classTarget:function(t){var e=this.config.data_classes[t],n="";return e&&(n=" ".concat(_.target,"-").concat(e)),this.generateClass(_.target,t)+n},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" ".concat(this.focusedTargetIds.indexOf(t.id)>=0?_.focused:"")},classDefocused:function(t){return" ".concat(this.defocusedTargetIds.indexOf(t.id)>=0?_.defocused:"")},classChartText:function(t){return _.chartText+this.classTarget(t.id)},classChartLine:function(t){return _.chartLine+this.classTarget(t.id)},classChartBar:function(t){return _.chartBar+this.classTarget(t.id)},classChartArc:function(t){return _.chartArc+this.classTarget(t.data.id)},classChartRadar:function(t){return _.chartRadar+this.classTarget(t.id)},getTargetSelectorSuffix:function(t){return t||0===t?"-".concat(t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){return"".concat(e||"",".").concat(_.target+this.getTargetSelectorSuffix(t))},selectorTargets:function(t,e){var n=this,r=t||[];return r.length?r.map((function(t){return n.selectorTarget(t,e)})):null},selectorLegend:function(t){return".".concat(_.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map((function(t){return e.selectorLegend(t)})):null}}),Q(_t.prototype,{focus:function(t){var e=this.internal,n=e.mapToTargetIds(t),r=e.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),r.classed(_.focused,!0).classed(_.defocused,!1),e.hasArcType()&&e.expandArc(n),e.toggleFocusLegend(n,!0),e.focusedTargetIds=n,e.defocusedTargetIds=e.defocusedTargetIds.filter((function(t){return n.indexOf(t)<0}))},defocus:function(t){var e=this.internal,n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e))).classed(_.focused,!1).classed(_.defocused,!0),e.hasArcType()&&e.unexpandArc(n),e.toggleFocusLegend(n,!1),e.focusedTargetIds=e.focusedTargetIds.filter((function(t){return n.indexOf(t)<0})),e.defocusedTargetIds=n},revert:function(t){var e=this.internal,n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n)).classed(_.focused,!1).classed(_.defocused,!1),e.hasArcType()&&e.unexpandArc(n),e.config.legend_show&&(e.showLegend(n.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(n)).filter((function(){return Object(f.select)(this).classed(_.legendItemFocused)})).classed(_.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]}}),Q(_t.prototype,{_showHide:function(t,e,n){var r=this.internal,o=r.mapToTargetIds(e);r["".concat(t?"remove":"add","HiddenTargetIds")](o);var c=r.svg.selectAll(r.selectorTargets(o)),l=t?"1":"0";c.transition().style("opacity",l,"important").call(r.endall,(function(){c.style("opacity",null).style("opacity",l)})),n.withLegend&&r["".concat(t?"show":"hide","Legend")](o),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},show:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showHide(!0,t,e)},hide:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showHide(!1,t,e)},toggle:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.internal,o={show:[],hide:[]};r.mapToTargetIds(t).forEach((function(t){return o[r.isTargetToShow(t)?"hide":"show"].push(t)})),o.show.length&&this.show(o.show,n),o.hide.length&&setTimeout((function(){return e.hide(o.hide,n)}),0)}});var Et=function(t){var e,n=this.internal,r=t;if(n.config.zoom_enabled&&r&&function(t,e){var n=c(e,2),r=n[0],o=n[1];return t.every((function(t,i){return 0===i?t>=r:t<=o}))}(r,n.getZoomDomain())){if(n.isTimeSeries()&&(r=r.map((function(t){return n.parseDate(t)}))),n.config.subchart_show){var o=n.zoomScale||n.x;n.brush.getSelection().call(n.brush.move,[o(r[0]),o(r[1])]),e=r}else n.x.domain(r),n.zoomScale=n.x,n.xAxis.scale(n.zoomScale),e=n.zoomScale.orgDomain();n.redraw({withTransition:!0,withY:n.config.zoom_rescale,withDimension:!1}),n.setZoomResetButton(),H(n.config.zoom_onzoom,n.api,e)}else e=n.zoomScale?n.zoomScale.domain():n.x.orgDomain();return e};Q(Et,{enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wheel",e=this.internal,n=e.config,r=t;t&&(r=O(t)&&/^(drag|wheel)$/.test(t)?{type:t}:t),n.zoom_enabled=r,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,n=e.config;return(0===t||t)&&(n.zoom_x_max=ot("max",[e.orgXDomain[1],t])),n.zoom_x_max},min:function(t){var e=this.internal,n=e.config;return(0===t||t)&&(n.zoom_x_min=ot("min",[e.orgXDomain[0],t])),n.zoom_x_min},range:function(t){var e=this.zoom;if(Y(t)){var n=t.min,r=t.max;F(n)&&e.min(n),F(r)&&e.max(r)}return{min:e.min(),max:e.max()}}}),Q(_t.prototype,{zoom:Et,unzoom:function(){var t=this.internal,e=t.config;if(t.zoomScale){e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(Dt.zoomIdentity),t.updateZoom(!0),t.zoom.resetBtn&&t.zoom.resetBtn.style("display","none");var n=t.main.select(".".concat(_.eventRects));Object(Dt.zoomTransform)(n.node())!==Dt.zoomIdentity&&t.zoom.transform(n,Dt.zoomIdentity),t.redraw({withTransition:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withY:e.zoom_rescale})}}}),Q(_t.prototype,{load:function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach((function(e){n.data_classes[e]=t.classes[e]})),"categories"in t&&e.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach((function(e){n.data_axes[e]=t.axes[e]})),"colors"in t&&Object.keys(t.colors).forEach((function(e){n.data_colors[e]=t.colors[e]})),"unload"in t&&!1!==t.unload?e.unload(e.mapToTargetIds(!0===t.unload?null:t.unload),(function(){return e.loadFromArgs(t)})):e.loadFromArgs(t)},unload:function(t){var e=this.internal,n=t||{};B(n)?n={ids:n}:O(n)&&(n={ids:[n]});var r=e.mapToTargetIds(n.ids);e.unload(r,(function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.removeCache(r),n.done&&n.done()}))}});var Xt=r(14);function It(t,e,n){var r=this,o=n||{withTransitionForAxis:!r.hasArcType()};o.withTransitionForTransform=!1,r.transiting=!1,r.setTargetType(t,e),r.updateTargets(r.data.targets),r.updateAndRedraw(o)}Q(_t.prototype,{flow:function(t){var data,e,n,r,o=this.internal,c=0,l=0;if((t.json||t.rows||t.columns)&&(data=o.convertData(t)),data&&o.isTabVisible()){var d=[],h=o.getMaxDataCount(),f=o.convertDataToTargets(data,!0);o.data.targets.forEach((function(t){for(var e=!1,i=0;i<f.length;i++)if(t.id===f[i].id){e=!0,t.values[t.values.length-1]&&(l=t.values[t.values.length-1].index+1),c=f[i].values.length;for(var n=0;n<c;n++)f[i].values[n].index=l+n,o.isTimeSeries()||(f[i].values[n].x=l+n);t.values=t.values.concat(f[i].values),f.splice(i,1);break}e||d.push(t.id)})),o.data.targets.forEach((function(t){for(var e=0;e<d.length;e++)if(t.id===d[e]){l=t.values[t.values.length-1].index+1;for(var n=0;n<c;n++)t.values.push({id:t.id,index:l+n,x:o.isTimeSeries()?o.getOtherTargetX(l+n):l+n,value:null})}})),o.data.targets.length&&f.forEach((function(t){for(var e=[],i=o.data.targets[0].values[0].index;i<l;i++)e.push({id:t.id,index:i,x:o.isTimeSeries()?o.getOtherTargetX(i):i,value:null});t.values.forEach((function(t){t.index+=l,o.isTimeSeries()||(t.x+=l)})),t.values=e.concat(t.values)})),o.data.targets=o.data.targets.concat(f);var x=o.data.targets[0],v=x.values[0];F(t.to)?(c=0,r=o.isTimeSeries()?o.parseDate(t.to):t.to,x.values.forEach((function(t){t.x<r&&c++}))):F(t.length)&&(c=t.length),h?1===h&&o.isTimeSeries()&&(n=(x.values[x.values.length-1].x-v.x)/2,e=[new Date(+v.x-n),new Date(+v.x+n)]):(n=o.isTimeSeries()?x.values.length>1?x.values[x.values.length-1].x-v.x:v.x-o.getXDomain(o.data.targets)[0]:1,e=[v.x-n,v.x]),e&&o.updateXDomain(null,!0,!0,!1,e),o.updateTargets(o.data.targets),o.redraw({flow:{index:v.index,length:c,duration:M(t.duration)?t.duration:o.config.transition_duration,done:t.done,orgDataCount:h},withLegend:!0,withTransition:h>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}}),Q(vt.prototype,{generateFlow:function(t){var e=this,n=e.config;return function(){var r,o,c=t.targets,l=t.flow,d=t.shape.type,h=d.bar,v=d.line,y=d.area,m=t.shape.pos,T=m.cx,w=m.cy,A=m.xForText,k=m.yForText,S=t.xv,M=t.duration,C=l.index,O=l.length,L=e.getValueOnIndex(e.data.targets[0].values,C),D=e.getValueOnIndex(e.data.targets[0].values,C+O),F=e.x.domain(),R=l.duration||M,E=l.done||function(){},X=e.generateWait(),z=e.xgrid||Object(f.selectAll)([]),N=e.xgridLines||Object(f.selectAll)([]),P=e.mainRegion||Object(f.selectAll)([]),B=e.mainText||Object(f.selectAll)([]),Y=e.mainBar||Object(f.selectAll)([]),j=e.mainLine||Object(f.selectAll)([]),H=e.mainArea||Object(f.selectAll)([]),V=e.mainCircle||Object(f.selectAll)([]);e.flowing=!0,e.data.targets.forEach((function(t){t.values.splice(0,O)}));var U=e.updateXDomain(c,!0,!0);e.updateXGrid&&e.updateXGrid(!0),l.orgDataCount?r=1===l.orgDataCount||(L&&L.x)===(D&&D.x)||e.isTimeSeries()?e.x(F[0])-e.x(U[0]):e.x(L.x)-e.x(D.x):1===e.data.targets[0].values.length?e.isTimeSeries()?(L=e.getValueOnIndex(e.data.targets[0].values,0),D=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),r=e.x(L.x)-e.x(D.x)):r=I(U)/2:r=e.x(F[0])-e.x(U[0]),o=I(F)/I(U);var G="translate(".concat(r,",0) scale(").concat(o,",1)");e.hideXGridFocus();var W=Object(x.transition)().ease(Xt.easeLinear).duration(R);X.add([e.axes.x.transition(W).call((function(g){return e.xAxis.setTransition(W).create(g)})),Y.transition(W).attr("transform",G),j.transition(W).attr("transform",G),H.transition(W).attr("transform",G),V.transition(W).attr("transform",G),B.transition(W).attr("transform",G),P.filter(e.isRegionOnX).transition(W).attr("transform",G),z.transition(W).attr("transform",G),N.transition(W).attr("transform",G)]),W.call(X,(function(){var t=n.axis_rotated;if(O){for(var r={shapes:[],texts:[],eventRects:[]},i=0;i<O;i++)r.shapes.push(".".concat(_.shape,"-").concat(i)),r.texts.push(".".concat(_.text,"-").concat(i)),r.eventRects.push(".".concat(_.eventRect,"-").concat(i));["shapes","texts","eventRects"].forEach((function(t){e.svg.selectAll(".".concat(_[t])).selectAll(r[t]).remove()})),e.svg.select(".".concat(_.xgrid)).remove()}z.size()&&z.attr("transform",null).attr(e.xgridAttr),N.attr("transform",null),N.select("line").attr("x1",t?0:S).attr("x2",t?e.width:S),N.select("text").attr("x",t?e.width:0).attr("y",S),Y.attr("transform",null).attr("d",h),j.attr("transform",null).attr("d",v),H.attr("transform",null).attr("d",y),V.attr("transform",null),e.isCirclePoint()?V.attr("cx",T).attr("cy",w):V.attr("x",(function(t){return T(t)-n.point_r})).attr("y",(function(t){return w(t)-n.point_r})).attr("cx",T).attr("cy",w),B.attr("transform",null).attr("x",A).attr("y",k).style("fill-opacity",e.opacityForText.bind(e)),P.attr("transform",null),P.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),n.interaction_enabled&&e.redrawEventRect(),E(),e.flowing=!1}))}}}),Q(_t.prototype,{selected:function(t){var e=this.internal,n=[];return e.main.selectAll(".".concat(_.shapes+e.getTargetSelectorSuffix(t))).selectAll(".".concat(_.shape)).filter((function(){return Object(f.select)(this).classed(_.SELECTED)})).each((function(t){return n.push(t)})),n},select:function(t,e,n){var r=this.internal,o=r.config;o.data_selection_enabled&&r.main.selectAll(".".concat(_.shapes)).selectAll(".".concat(_.shape)).each((function(c,i){var l=Object(f.select)(this),d=c.data?c.data.id:c.id,h=r.getToggle(this,c).bind(r),x=o.data_selection_grouped||!t||t.indexOf(d)>=0,v=!e||e.indexOf(i)>=0,y=l.classed(_.SELECTED);l.classed(_.line)||l.classed(_.area)||(x&&v?o.data_selection_isselectable(c)&&!y&&h(!0,l.classed(_.SELECTED,!0),c,i):F(n)&&n&&y&&h(!1,l.classed(_.SELECTED,!1),c,i))}))},unselect:function(t,e){var n=this.internal,r=n.config;r.data_selection_enabled&&n.main.selectAll(".".concat(_.shapes)).selectAll(".".concat(_.shape)).each((function(o,i){var c=Object(f.select)(this),l=o.data?o.data.id:o.id,d=n.getToggle(this,o).bind(n),h=r.data_selection_grouped||!t||t.indexOf(l)>=0,x=!e||e.indexOf(i)>=0,v=c.classed(_.SELECTED);c.classed(_.line)||c.classed(_.area)||h&&x&&r.data_selection_isselectable(o)&&v&&d(!1,c.classed(_.SELECTED,!1),o,i)}))}}),Q(_t.prototype,{transform:function(t,e){var n=this.internal,r=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;It.bind(n)(e,t,r)}}),Q(_t.prototype,{groups:function(t){var e=this.internal,n=e.config;return D(t)||(n.data_groups=t,e.redraw()),n.data_groups}});var zt=function(t){var e=this.internal,n=e.config;return t?(n.grid_x_lines=t,e.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines};Q(zt,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});var Nt=function(t){var e=this.internal,n=e.config;return t?(n.grid_y_lines=t,e.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines};Q(Nt,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}}),Q(_t.prototype,{xgrids:zt,ygrids:Nt});var Pt=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),t):n.regions};Q(Pt,{add:function(t){var e=this.internal,n=e.config;return t?(n.regions=n.regions.concat(t),e.redrawWithoutRescale(),n.regions):n.regions},remove:function(t){var e=this.internal,n=e.config,r=t||{},o=j(r,"duration",n.transition_duration),c=j(r,"classes",[_.region]),l=e.main.select(".".concat(_.regions)).selectAll(c.map((function(t){return".".concat(t)})));return(o?l.transition().duration(o):l).style("opacity","0").remove(),l=n.regions,Object.keys(r).length?(l=l.filter((function(t){var e=!1;return!t.class||(t.class.split(" ").forEach((function(t){c.indexOf(t)>=0&&(e=!0)})),!e)})),n.regions=l):n.regions=[],l}}),Q(_t.prototype,{regions:Pt});var Bt=function(t){var e=this.internal.data.targets;if(!D(t)){var n=B(t)?t:[t];return e.filter((function(t){return n.some((function(e){return e===t.id}))}))}return e};Q(Bt,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;if(t){var r=this.data(t);r&&B(r)&&(n=[],r.forEach((function(t){var r=t.values.map((function(t){return t.value}));e?n=n.concat(r):n.push(r)})))}return n},names:function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}}),Q(_t.prototype,{data:Bt}),Q(_t.prototype,{category:function(i,t){var e=this.internal,n=e.config;return arguments.length>1&&(n.axis_x_categories[i]=t,e.redraw()),n.axis_x_categories[i]},categories:function(t){var e=this.internal,n=e.config;return arguments.length?(n.axis_x_categories=t,e.redraw(),n.axis_x_categories):n.axis_x_categories}}),Q(_t.prototype,{color:function(t){return this.internal.color(t)}}),Q(_t.prototype,{x:function(t){var e=this.internal,n=e.isCustomX()&&e.isCategorized();return B(t)&&(n?e.api.categories(t):(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),n?e.api.categories():e.data.xs},xs:function(t){var e=this.internal;return Y(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}});var Yt=function(t,e,n){var r=t.config,o="axis_x_".concat(e),c="axis_y_".concat(e),l="axis_y2_".concat(e);F(n)&&(z(n)?(M(n.x)&&(r[o]=n.x),M(n.y)&&(r[c]=n.y),M(n.y2)&&(r[l]=n.y2)):(r[c]=n,r[l]=n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))},jt=function(t,e){var n=t.config;return{x:n["axis_x_".concat(e)],y:n["axis_y_".concat(e)],y2:n["axis_y2_".concat(e)]}},Ht=Q((function(){}),{labels:function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach((function(n){e.axis.setLabelText(n,t[n])})),e.axis.updateLabels())},min:function(t){var e=this.internal;return arguments.length?Yt(e,"min",t):jt(e,"min")},max:function(t){var e=this.internal;return arguments.length?Yt(e,"max",t):jt(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};F(t.max)&&e.max(t.max),F(t.min)&&e.min(t.min)}});Q(_t.prototype,{axis:Ht});var legend=Q((function(){}),{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}});Q(_t.prototype,{legend:legend}),Q(_t.prototype,{resize:function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush(!1,!0)},flush:function(t,e){var n=this.internal;n.rendered?(e?n.brush&&n.brush.updateResize():n.axis&&n.axis.setOrient(),n.zoomScale=null,t?n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})):n.initToRender(!0)},destroy:function(){var t=this,e=this.internal;return P(e)&&(e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),e.svg.select("*").interrupt(),F(e.resizeTimeout)&&k.clearTimeout(e.resizeTimeout),k.removeEventListener("resize",e.resizeFunction),e.selectChart.classed("bb",!1).html(""),Object.keys(this).forEach((function(n){"internal"===n&&Object.keys(e).forEach((function(t){e[t]=null})),t[n]=null,delete t[n]}))),null},config:function(t,e,n){var r,o=this.internal,c=t&&t.replace(/\./g,"_");return c in o.config&&(F(e)?(o.config[c]=e,r=e,n&&this.flush()):r=o.config[c]),r}});var Vt=Q((function(){}),{show:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.internal;if(n.mouse&&(e=n.mouse),n.data){var o=r.getYScale(n.data.id)(n.data.value);r.isMultipleX()?e=[r.x(n.data.x),o]:(!r.config.tooltip_grouped&&(e=[0,o]),t=M(n.data.index)?n.data.index:r.getIndexByX(n.data.x))}else F(n.x)?t=r.getIndexByX(n.x):F(n.index)&&(t=n.index);("mouse"===r.inputType?["mouseover","mousemove"]:["touchstart"]).forEach((function(n){r.dispatchEvent(n,t,e)}))},hide:function(){var t=this.internal;t.hideTooltip(!0),t.hideXGridFocus(),t.unexpandCircles(),t.unexpandBars()}});Q(_t.prototype,{tooltip:Vt});var Ut=function(t,e){var n,r,o=new XMLSerializer,c=t.cloneNode(!0),l=(n=tt(S.styleSheets),r=[],n.forEach((function(t){try{t.cssRules&&t.cssRules.length&&(r=r.concat(tt(t.cssRules)))}catch(e){console.error("Error while reading rules from ".concat(t.href,": ").concat(e.toString()))}})),r).filter((function(t){return t.cssText})).map((function(t){return t.cssText}));c.setAttribute("xmlns",f.namespaces.xhtml);var d=o.serializeToString(c),style=S.createElement("style");style.appendChild(S.createTextNode(l.join("\n")));var h=o.serializeToString(style),x='<svg xmlns="'.concat(f.namespaces.svg,'" width="').concat(e.width,'" height="').concat(e.height,'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t').concat(h,"\n\t\t\t\t").concat(d.replace(/(url\()[^#]+/g,"$1"),"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,".concat(btoa(encodeURIComponent(x).replace(/%([0-9A-F]{2})/g,(function(t,p){return String.fromCharCode("0x".concat(p))}))))};Q(_t.prototype,{export:function(t,e){var n=this.internal,r={width:n.currentWidth,height:n.currentHeight},o=Ut(this.element,r);if(C(e)){var img=new Image;img.crosssOrigin="Anonymous",img.onload=function(){var canvas=S.createElement("canvas"),n=canvas.getContext("2d");canvas.width=r.width,canvas.height=r.height,n.drawImage(img,0,0),e(canvas.toDataURL(t))},img.src=o}return o}}),r.d(n,"bb",(function(){return Wt}));var Gt={},Wt={version:"1.11.1",generate:function(t){var e=it({},Gt,t),n=new _t(e);return n.internal.charts=this.instance,this.instance.push(n),n},defaults:function(t){return Y(t)&&(Gt=t),Gt},instance:[],plugin:{},chart:{fn:_t.prototype,internal:{fn:vt.prototype,axis:{fn:xt.prototype}}}};n.default=Wt}])},t.exports=r(n(662),n(444),n(659),n(752),n(750),n(1604),n(751),n(661),n(747),n(604),n(600),n(748),n(684))}).call(this,n(20))},886:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=Math.PI/180,o=180/Math.PI},887:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var r=n(688),o=n(628),c=n(886),l=-.14861,d=1.78277,h=-.29227,f=-.90649,x=1.97294,v=x*f,_=x*d,y=d*h-f*l;function m(t){if(t instanceof w)return new w(t.h,t.s,t.l,t.opacity);t instanceof o.b||(t=Object(o.h)(t));var e=t.r/255,g=t.g/255,b=t.b/255,n=(y*b+v*e-_*g)/(y+v-_),r=b-n,l=(x*(g-n)-h*r)/f,s=Math.sqrt(l*l+r*r)/(x*n*(1-n)),d=s?Math.atan2(l,r)*c.b-120:NaN;return new w(d<0?d+360:d,s,n,t.opacity)}function T(t,s,e,n){return 1===arguments.length?m(t):new w(t,s,e,null==n?1:n)}function w(t,s,e,n){this.h=+t,this.s=+s,this.l=+e,this.opacity=+n}Object(r.a)(w,T,Object(r.b)(o.a,{brighter:function(t){return t=null==t?o.c:Math.pow(o.c,t),new w(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?o.d:Math.pow(o.d,t),new w(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*c.a,e=+this.l,a=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),r=Math.sin(t);return new o.b(255*(e+a*(l*n+d*r)),255*(e+a*(h*n+f*r)),255*(e+a*(x*n)),this.opacity)}}))}}]);